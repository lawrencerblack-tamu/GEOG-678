/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["exports","./utils","../../portal/support/jsonContext","../../portal/support/portalItemUtils","../../webdoc/support/resourceUtils"],(function(e,t,r,a,s){"use strict";const o="Media Layer",n="media-layer-save",u="media-layer-save-as",i=["media-layer:unsupported-source"];function c(e){return{isValid:"media"===e.type,errorMessage:"Layer.type should be 'media'"}}function l(e){return r.createForItemWrite(e,"portal-item",!0)}function p(e){return e.layerJSON}async function y(e,t){const{title:r,fullExtent:s}=e;t.title||=r,t.extent=s?await a.getWGS84ExtentForItem(s):null,a.removeTypeKeyword(t,a.typeKeyword.METADATA)}async function m(e,r){const a={layer:e,itemType:o,validateLayer:c,createJSONContext:e=>l(e),createItemData:p,errorNamePrefix:n,supplementalUnsupportedErrors:i,saveResources:(t,r)=>s.saveResources(e.resourceReferences,r)};return t.save(a,r)}async function d(e,r,a){const n={layer:e,itemType:o,validateLayer:c,createJSONContext:e=>l(e),createItemData:p,errorNamePrefix:u,supplementalUnsupportedErrors:i,newItem:r,setItemProperties:y,saveResources:(t,r)=>s.saveResources(e.resourceReferences,r)};return t.saveAs(n,a)}e.save=m,e.saveAs=d,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
