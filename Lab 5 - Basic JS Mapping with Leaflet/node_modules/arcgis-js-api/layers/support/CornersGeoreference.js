/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["../../chunks/tslib.es6","../../core/perspectiveUtils","../../core/screenUtils","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","../../core/libs/gl-matrix-2/factories/mat3f64","../../core/libs/gl-matrix-2/math/vec2","../../core/libs/gl-matrix-2/factories/vec2f64","../../geometry/Point","../../geometry/Polygon","../../geometry/projection","./GeoreferenceBase"],(function(t,e,o,r,n,s,l,c,i,p,a,u,y,f,h){"use strict";const g=a.create();let m=class extends h{constructor(t){super(t),this.bottomLeft=null,this.bottomRight=null,this.topLeft=null,this.topRight=null,this.type="corners"}get coords(){let{topLeft:t,topRight:e,bottomLeft:o,bottomRight:r}=this;if(null==t||null==e||null==o||null==r)return null;const n=t.spatialReference;return e=this.projectOrWarn(e,n),o=this.projectOrWarn(o,n),r=this.projectOrWarn(r,n),null==e||null==o||null==r?null:new y({rings:[[[o.x,o.y],[t.x,t.y],[e.x,e.y],[r.x,r.y],[o.x,o.y]]],spatialReference:n})}set coords(t){const{topLeft:e}=this;if(null==e)return;const o=e.spatialReference;if(null==(t=this.projectOrWarn(t,o)))return;const{rings:[[r,n,s,l]]}=t;this.bottomLeft=new u({x:r[0],y:r[1],spatialReference:o}),this.topLeft=new u({x:n[0],y:n[1],spatialReference:o}),this.topRight=new u({x:s[0],y:s[1],spatialReference:o}),this.bottomRight=new u({x:l[0],y:l[1],spatialReference:o})}toSourceNormalized(t){const{topLeft:r,topRight:n,bottomRight:s,bottomLeft:l}=this;if(null==t||null==r||null==n||null==s||null==l)return null;const c=r.spatialReference;t=t.normalize();const a=f.projectOrLoad(t,c).geometry;if(null==a)return null;p.set(g,a.x,a.y);const u=e.getProjectiveTransform(i.create(),[r.x,r.y,l.x,l.y,n.x,n.y,s.x,s.y],[0,0,0,1,1,0,1,1]);return e.transformProjective(g,g,u),o.createScreenPoint(g[0],g[1])}};t.__decorate([r.property()],m.prototype,"coords",null),t.__decorate([r.property({type:u})],m.prototype,"bottomLeft",void 0),t.__decorate([r.property({type:u})],m.prototype,"bottomRight",void 0),t.__decorate([r.property({type:u})],m.prototype,"topLeft",void 0),t.__decorate([r.property({type:u})],m.prototype,"topRight",void 0),m=t.__decorate([c.subclass("esri.layers.support.CornersGeoreference")],m);return m}));
