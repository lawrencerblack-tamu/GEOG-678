/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["../../chunks/tslib.es6","../../geometry","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","../../geometry/Extent","../../geometry/Polygon","../../geometry/support/jsonUtils","./DimensionalDefinition","../../geometry/Geometry"],(function(e,t,s,r,o,n,i,a,l,c,p,u,y){"use strict";var m;const f={base:y,key:"type",typeMap:{extent:l,polygon:c}};let d=m=class extends s.JSONSupport{constructor(e){super(e),this.areaOfInterest=null,this.subsetDefinitions=null}get dimensions(){const{subsetDefinitions:e}=this;if(null==e||0===e.length)return[];const t=new Map;e.forEach((e=>{if(!e.dimensionName)return;let s,r;if(Array.isArray(e.values[0])){const t=e.values;s=t[0][0],r=t[e.values.length-1][1]}else{const t=e.values;s=t[0],r=t[e.values.length-1]}if(t.has(e.dimensionName)){const o=t.get(e.dimensionName);o[0]=Math.min(s,o[0]),o[1]=Math.max(r,o[1])}else t.set(e.dimensionName,[s,r])}));const s=[];for(const r of t)s.push({name:r[0],extent:r[1]});return s}get variables(){const{subsetDefinitions:e}=this;if(null==e||0===e.length)return[];const t=new Set;return e.forEach((e=>{e.variableName&&t.add(e.variableName)})),[...t]}clone(){const e=this.subsetDefinitions?.map((e=>e.clone())),t=this.areaOfInterest?this.areaOfInterest.clone():this.areaOfInterest;return new m({areaOfInterest:t,subsetDefinitions:e})}};e.__decorate([r.property({types:f,json:{read:p.fromJSON,write:!0}})],d.prototype,"areaOfInterest",void 0),e.__decorate([r.property({readOnly:!0})],d.prototype,"dimensions",null),e.__decorate([r.property({readOnly:!0})],d.prototype,"variables",null),e.__decorate([r.property({type:[u],json:{write:!0}})],d.prototype,"subsetDefinitions",void 0),d=m=e.__decorate([a.subclass("esri.layers.support.MultidimensionalSubset")],d);return d}));
