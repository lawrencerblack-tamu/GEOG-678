/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["exports","../../widgets/support/dateUtils"],(function(e,n){"use strict";var i;e.DomainValidationError=void 0,(i=e.DomainValidationError||(e.DomainValidationError={})).VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",i.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value";const t=new Set(["integer","small-integer","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"]);function a(e){return null!=e&&t.has(e.type)}function l(e){return null!=e&&("date-only"===e.type||"esriFieldTypeDateOnly"===e.type)}function r(e){return null!=e&&("timestamp-offset"===e.type||"esriFieldTypeTimestampOffset"===e.type)}function o(e){return null!=e&&("time-only"===e.type||"esriFieldTypeTimeOnly"===e.type)}function u(n,i){const t=n?.domain;if(!t)return null;switch(t.type){case"range":{const{min:t,max:a}=m(n);if(null!=t&&+i<t||null!=a&&+i>a)return e.DomainValidationError.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(null==t.codedValues||t.codedValues.every((e=>null==e||e.code!==i)))return e.DomainValidationError.INVALID_CODED_VALUE}return null}function m(e,n){const i=n??e?.domain;if(!i||"range"!==i.type)return;const t="range"in i?i.range[0]:i.minValue,u="range"in i?i.range[1]:i.maxValue,m=a(e);return l(e)||o(e)||r(e)?{...s(e,u,t),isInteger:m}:{min:null!=t&&"number"==typeof t?t:null,max:null!=u&&"number"==typeof u?u:null,rawMin:t,rawMax:u,isInteger:m}}function s(e,i,t){return l(e)?{min:n.dateOnlyToDateTime(t)?.toMillis(),max:n.dateOnlyToDateTime(i)?.toMillis(),rawMin:t,rawMax:i}:o(e)?{min:n.timeOnlyToDateTime(t)?.toMillis(),max:n.timeOnlyToDateTime(i)?.toMillis(),rawMin:t,rawMax:i}:r(e)?{min:n.timestampOffsetToDateTime(t)?.toMillis(),max:n.timestampOffsetToDateTime(i)?.toMillis(),rawMin:t,rawMax:i}:{max:null,min:null}}e.dateTimeFieldValuesToNumericRange=s,e.getDomainRange=m,e.validateDomainValue=u,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
