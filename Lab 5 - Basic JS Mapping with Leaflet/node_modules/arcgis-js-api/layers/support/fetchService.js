/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["exports","../../support/requestPresets"],(function(e,t){"use strict";async function r(e,r){const{loadContext:a,...n}=r||{},i=a?await a.fetchServiceMetadata(e,n):await t.fetchArcGISServiceJSON(e,n);o(i),c(i);const s={serviceJSON:i};if((i.currentVersion??0)<10.5)return s;const u=`${e}/layers`,f=a?await a.fetchServiceMetadata(u,n):await t.fetchArcGISServiceJSON(u,n);return o(f),c(f),s.layersJSON={layers:f.layers,tables:f.tables},s}function a(e){return"Feature Layer"===e.type||"Oriented Imagery Layer"===e.type}function n(e){return"Table"===e.type}function c(e){e.layers=e.layers?.filter(a),e.tables=e.tables?.filter(n)}function i(e){e.type||="Feature Layer"}function s(e){e.type||="Table"}function o(e){e.layers?.forEach(i),e.tables?.forEach(s)}e.fetchFeatureService=r,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
