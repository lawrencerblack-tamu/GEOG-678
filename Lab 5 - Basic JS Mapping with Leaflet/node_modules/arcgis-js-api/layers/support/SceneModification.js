/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["../../chunks/tslib.es6","../../geometry","../../core/JSONSupport","../../core/lang","../../core/Warning","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/accessorSupport/decorators/subclass","../../core/accessorSupport/decorators/writer","../../core/accessorSupport/decorators/persistable","../../geometry/projection","../../geometry/Polygon"],(function(e,r,t,o,s,c,a,p,i,n,l,y,u){"use strict";var d;let m=d=class extends t.JSONSupport{constructor(e){super(e),this.geometry=null,this.type="clip"}writeGeometry(e,r,t,o){if(o.layer?.spatialReference&&!o.layer.spatialReference.equals(this.geometry.spatialReference)){if(!y.canProjectWithoutEngine(e.spatialReference,o.layer.spatialReference))return void(o?.messages&&o.messages.push(new s("scenemodification:unsupported","Scene modifications with incompatible spatial references are not supported",{modification:this,spatialReference:o.layer.spatialReference,context:o})));const c=new u;y.projectPolygon(e,c,o.layer.spatialReference),r[t]=c.toJSON(o)}else r[t]=e.toJSON(o);delete r[t].spatialReference}clone(){return new d({geometry:o.clone(this.geometry),type:this.type})}};e.__decorate([c.property({type:u}),l.persistable()],m.prototype,"geometry",void 0),e.__decorate([n.writer(["web-scene","portal-item"],"geometry")],m.prototype,"writeGeometry",null),e.__decorate([c.property({type:["clip","mask","replace"],nonNullable:!0}),l.persistable()],m.prototype,"type",void 0),m=d=e.__decorate([i.subclass("esri.layers.support.SceneModification")],m);return m}));
