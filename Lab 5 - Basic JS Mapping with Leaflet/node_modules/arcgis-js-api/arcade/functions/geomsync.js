/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["exports","../../kernel","../Dictionary","../executionError","../kernel","../../chunks/languageUtils","./centroid","./measures","../../core/unitUtils","../../geometry/Extent","../../geometry/Geometry","../../geometry/Multipoint","../../geometry/Point","../../geometry/Polygon","../../geometry/Polyline","../../geometry/support/jsonUtils"],(function(e,r,n,t,o,i,a,u,c,l,s,f,d,E,m,C){"use strict";let h=null;function x(e){return 0===r.version.indexOf("4.")?E.fromExtent(e):new E({spatialReference:e.spatialReference,rings:[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]})}function y(e){h=e}function w(e,r){if("polygon"!==e.type&&"polyline"!==e.type&&"extent"!==e.type)return 0;let n=1;if(e.spatialReference.vcsWkid||e.spatialReference.latestVcsWkid){n=a.getMetersPerVerticalUnitForSR(e.spatialReference)/c.getMetersPerUnitForSR(e.spatialReference)}let t=0;if("polyline"===e.type)for(const i of e.paths)for(let e=1;e<i.length;e++)t+=a.segmentLength3d(i[e],i[e-1],n);else if("polygon"===e.type)for(const i of e.rings){for(let e=1;e<i.length;e++)t+=a.segmentLength3d(i[e],i[e-1],n);(i[0][0]!==i[i.length-1][0]||i[0][1]!==i[i.length-1][1]||void 0!==i[0][2]&&i[0][2]!==i[i.length-1][2])&&(t+=a.segmentLength3d(i[0],i[i.length-1],n))}else"extent"===e.type&&(t+=2*a.segmentLength3d([e.xmin,e.ymin,0],[e.xmax,e.ymin,0],n),t+=2*a.segmentLength3d([e.xmin,e.ymin,0],[e.xmin,e.ymax,0],n),t*=2,t+=4*Math.abs(i.defaultUndefined(e.zmax,0)*n-i.defaultUndefined(e.zmin,0)*n));const o=new m({hasZ:!1,hasM:!1,spatialReference:e.spatialReference,paths:[[0,0],[0,t]]});return h.planarLength(o,r)}function p(e,r){function c(e,r,n){if(i.pcCheck(n,2,2,e,r),n[0]instanceof s&&n[1]instanceof s);else if(n[0]instanceof s&&null===n[1]);else if(n[1]instanceof s&&null===n[0]);else if(null!==n[0]||null!==n[1])throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,r)}e.disjoint=function(e,n){return r(e,n,((r,t,o)=>(o=i.autoCastFeatureToGeometry(o),c(e,n,o),null===o[0]||null===o[1]||h.disjoint(o[0],o[1]))))},e.intersects=function(e,n){return r(e,n,((r,t,o)=>(o=i.autoCastFeatureToGeometry(o),c(e,n,o),null!==o[0]&&null!==o[1]&&h.intersects(o[0],o[1]))))},e.touches=function(e,n){return r(e,n,((r,t,o)=>(o=i.autoCastFeatureToGeometry(o),c(e,n,o),null!==o[0]&&null!==o[1]&&h.touches(o[0],o[1]))))},e.crosses=function(e,n){return r(e,n,((r,t,o)=>(o=i.autoCastFeatureToGeometry(o),c(e,n,o),null!==o[0]&&null!==o[1]&&h.crosses(o[0],o[1]))))},e.within=function(e,n){return r(e,n,((r,t,o)=>(o=i.autoCastFeatureToGeometry(o),c(e,n,o),null!==o[0]&&null!==o[1]&&h.within(o[0],o[1]))))},e.contains=function(e,n){return r(e,n,((r,t,o)=>(o=i.autoCastFeatureToGeometry(o),c(e,n,o),null!==o[0]&&null!==o[1]&&h.contains(o[0],o[1]))))},e.overlaps=function(e,n){return r(e,n,((r,t,o)=>(o=i.autoCastFeatureToGeometry(o),c(e,n,o),null!==o[0]&&null!==o[1]&&h.overlaps(o[0],o[1]))))},e.equals=function(e,n){return r(e,n,((r,t,o)=>(i.pcCheck(o,2,2,e,n),o[0]===o[1]||(o[0]instanceof s&&o[1]instanceof s?h.equals(o[0],o[1]):(i.isDate(o[0])&&i.isDate(o[1])||i.isTime(o[0])&&i.isTime(o[1])||!(!i.isDateOnly(o[0])||!i.isDateOnly(o[1])))&&o[0].equals(o[1])))))},e.relate=function(e,n){return r(e,n,((r,o,a)=>{if(a=i.autoCastFeatureToGeometry(a),i.pcCheck(a,3,3,e,n),a[0]instanceof s&&a[1]instanceof s)return h.relate(a[0],a[1],i.toString(a[2]));if(a[0]instanceof s&&null===a[1])return!1;if(a[1]instanceof s&&null===a[0])return!1;if(null===a[0]&&null===a[1])return!1;throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,n)}))},e.intersection=function(e,n){return r(e,n,((r,t,o)=>(o=i.autoCastFeatureToGeometry(o),c(e,n,o),null===o[0]||null===o[1]?null:h.intersect(o[0],o[1]))))},e.union=function(e,n){return r(e,n,((r,a,u)=>{const c=[];if(0===(u=i.autoCastFeatureToGeometry(u)).length)throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.WrongNumberOfParameters,n);if(1===u.length)if(i.isArray(u[0])){const r=i.autoCastFeatureToGeometry(u[0]);for(let o=0;o<r.length;o++)if(null!==r[o]){if(!(r[o]instanceof s))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,n);c.push(r[o])}}else{if(!i.isImmutableArray(u[0])){if(u[0]instanceof s)return i.fixSpatialReference(o.cloneGeometry(u[0]),e.spatialReference);if(null===u[0])return null;throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,n)}{const r=i.autoCastFeatureToGeometry(u[0].toArray());for(let o=0;o<r.length;o++)if(null!==r[o]){if(!(r[o]instanceof s))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,n);c.push(r[o])}}}else for(let o=0;o<u.length;o++)if(null!==u[o]){if(!(u[o]instanceof s))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,n);c.push(u[o])}return 0===c.length?null:h.union(c)}))},e.difference=function(e,n){return r(e,n,((r,t,a)=>(a=i.autoCastFeatureToGeometry(a),c(e,n,a),null!==a[0]&&null===a[1]?o.cloneGeometry(a[0]):null===a[0]?null:h.difference(a[0],a[1]))))},e.symmetricdifference=function(e,n){return r(e,n,((r,t,a)=>(a=i.autoCastFeatureToGeometry(a),c(e,n,a),null===a[0]&&null===a[1]?null:null===a[0]?o.cloneGeometry(a[1]):null===a[1]?o.cloneGeometry(a[0]):h.symmetricDifference(a[0],a[1]))))},e.clip=function(e,n){return r(e,n,((r,o,a)=>{if(a=i.autoCastFeatureToGeometry(a),i.pcCheck(a,2,2,e,n),!(a[1]instanceof l)&&null!==a[1])throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,n);if(null===a[0])return null;if(!(a[0]instanceof s))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,n);return null===a[1]?null:h.clip(a[0],a[1])}))},e.cut=function(e,n){return r(e,n,((r,a,u)=>{if(u=i.autoCastFeatureToGeometry(u),i.pcCheck(u,2,2,e,n),!(u[1]instanceof m)&&null!==u[1])throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,n);if(null===u[0])return[];if(!(u[0]instanceof s))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,n);return null===u[1]?[o.cloneGeometry(u[0])]:h.cut(u[0],u[1])}))},e.area=function(e,n){return r(e,n,((r,a,u)=>{if(i.pcCheck(u,1,2,e,n),null===(u=i.autoCastFeatureToGeometry(u))[0])return 0;if(i.isArray(u[0])||i.isImmutableArray(u[0])){const r=i.autoCastArrayOfPointsToPolygon(u[0],e.spatialReference);return null===r?0:h.planarArea(r,o.convertSquareUnitsToCode(i.defaultUndefined(u[1],-1)))}if(!(u[0]instanceof s))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,n);return h.planarArea(u[0],o.convertSquareUnitsToCode(i.defaultUndefined(u[1],-1)))}))},e.areageodetic=function(e,n){return r(e,n,((r,a,u)=>{if(i.pcCheck(u,1,2,e,n),null===(u=i.autoCastFeatureToGeometry(u))[0])return 0;if(i.isArray(u[0])||i.isImmutableArray(u[0])){const r=i.autoCastArrayOfPointsToPolygon(u[0],e.spatialReference);return null===r?0:h.geodesicArea(r,o.convertSquareUnitsToCode(i.defaultUndefined(u[1],-1)))}if(!(u[0]instanceof s))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,n);return h.geodesicArea(u[0],o.convertSquareUnitsToCode(i.defaultUndefined(u[1],-1)))}))},e.length=function(e,n){return r(e,n,((r,a,u)=>{if(i.pcCheck(u,1,2,e,n),null===(u=i.autoCastFeatureToGeometry(u))[0])return 0;if(i.isArray(u[0])||i.isImmutableArray(u[0])){const r=i.autoCastArrayOfPointsToPolyline(u[0],e.spatialReference);return null===r?0:h.planarLength(r,o.convertLinearUnitsToCode(i.defaultUndefined(u[1],-1)))}if(!(u[0]instanceof s))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,n);return h.planarLength(u[0],o.convertLinearUnitsToCode(i.defaultUndefined(u[1],-1)))}))},e.length3d=function(e,n){return r(e,n,((r,a,u)=>{if(i.pcCheck(u,1,2,e,n),null===(u=i.autoCastFeatureToGeometry(u))[0])return 0;if(i.isArray(u[0])||i.isImmutableArray(u[0])){const r=i.autoCastArrayOfPointsToPolyline(u[0],e.spatialReference);return null===r?0:!0===r.hasZ?w(r,o.convertLinearUnitsToCode(i.defaultUndefined(u[1],-1))):h.planarLength(r,o.convertLinearUnitsToCode(i.defaultUndefined(u[1],-1)))}if(!(u[0]instanceof s))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,n);return!0===u[0].hasZ?w(u[0],o.convertLinearUnitsToCode(i.defaultUndefined(u[1],-1))):h.planarLength(u[0],o.convertLinearUnitsToCode(i.defaultUndefined(u[1],-1)))}))},e.lengthgeodetic=function(e,n){return r(e,n,((r,a,u)=>{if(i.pcCheck(u,1,2,e,n),null===(u=i.autoCastFeatureToGeometry(u))[0])return 0;if(i.isArray(u[0])||i.isImmutableArray(u[0])){const r=i.autoCastArrayOfPointsToPolyline(u[0],e.spatialReference);return null===r?0:h.geodesicLength(r,o.convertLinearUnitsToCode(i.defaultUndefined(u[1],-1)))}if(!(u[0]instanceof s))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,n);return h.geodesicLength(u[0],o.convertLinearUnitsToCode(i.defaultUndefined(u[1],-1)))}))},e.distance=function(e,n){return r(e,n,((r,a,u)=>{u=i.autoCastFeatureToGeometry(u),i.pcCheck(u,2,3,e,n);let c=u[0];(i.isArray(u[0])||i.isImmutableArray(u[0]))&&(c=i.autoCastArrayOfPointsToMultiPoint(u[0],e.spatialReference));let l=u[1];if((i.isArray(u[1])||i.isImmutableArray(u[1]))&&(l=i.autoCastArrayOfPointsToMultiPoint(u[1],e.spatialReference)),!(c instanceof s))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,n);if(!(l instanceof s))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,n);return h.distance(c,l,o.convertLinearUnitsToCode(i.defaultUndefined(u[2],-1)))}))},e.distancegeodetic=function(e,n){return r(e,n,((r,a,u)=>{u=i.autoCastFeatureToGeometry(u),i.pcCheck(u,2,3,e,n);const c=u[0],l=u[1];if(!(c instanceof d))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,n);if(!(l instanceof d))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,n);const s=new m({paths:[],spatialReference:c.spatialReference});return s.addPath([c,l]),h.geodesicLength(s,o.convertLinearUnitsToCode(i.defaultUndefined(u[2],-1)))}))},e.densify=function(e,n){return r(e,n,((r,a,u)=>{if(u=i.autoCastFeatureToGeometry(u),i.pcCheck(u,2,3,e,n),null===u[0])return null;if(!(u[0]instanceof s))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,n);const c=i.toNumber(u[1]);if(isNaN(c))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,n);if(c<=0)throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,n);return u[0]instanceof E||u[0]instanceof m?h.densify(u[0],c,o.convertLinearUnitsToCode(i.defaultUndefined(u[2],-1))):u[0]instanceof l?h.densify(x(u[0]),c,o.convertLinearUnitsToCode(i.defaultUndefined(u[2],-1))):u[0]}))},e.densifygeodetic=function(e,n){return r(e,n,((r,a,u)=>{if(u=i.autoCastFeatureToGeometry(u),i.pcCheck(u,2,3,e,n),null===u[0])return null;if(!(u[0]instanceof s))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,n);const c=i.toNumber(u[1]);if(isNaN(c))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,n);if(c<=0)throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,n);return u[0]instanceof E||u[0]instanceof m?h.geodesicDensify(u[0],c,o.convertLinearUnitsToCode(i.defaultUndefined(u[2],-1))):u[0]instanceof l?h.geodesicDensify(x(u[0]),c,o.convertLinearUnitsToCode(i.defaultUndefined(u[2],-1))):u[0]}))},e.generalize=function(e,n){return r(e,n,((r,a,u)=>{if(u=i.autoCastFeatureToGeometry(u),i.pcCheck(u,2,4,e,n),null===u[0])return null;if(!(u[0]instanceof s))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,n);const c=i.toNumber(u[1]);if(isNaN(c))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,n);return h.generalize(u[0],c,i.toBoolean(i.defaultUndefined(u[2],!0)),o.convertLinearUnitsToCode(i.defaultUndefined(u[3],-1)))}))},e.buffer=function(e,n){return r(e,n,((r,a,u)=>{if(u=i.autoCastFeatureToGeometry(u),i.pcCheck(u,2,3,e,n),null===u[0])return null;if(!(u[0]instanceof s))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,n);const c=i.toNumber(u[1]);if(isNaN(c))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,n);return 0===c?o.cloneGeometry(u[0]):h.buffer(u[0],c,o.convertLinearUnitsToCode(i.defaultUndefined(u[2],-1)))}))},e.buffergeodetic=function(e,n){return r(e,n,((r,a,u)=>{if(u=i.autoCastFeatureToGeometry(u),i.pcCheck(u,2,3,e,n),null===u[0])return null;if(!(u[0]instanceof s))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,n);const c=i.toNumber(u[1]);if(isNaN(c))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,n);return 0===c?o.cloneGeometry(u[0]):h.geodesicBuffer(u[0],c,o.convertLinearUnitsToCode(i.defaultUndefined(u[2],-1)))}))},e.offset=function(e,n){return r(e,n,((r,a,u)=>{if(u=i.autoCastFeatureToGeometry(u),i.pcCheck(u,2,6,e,n),null===u[0])return null;if(!(u[0]instanceof E||u[0]instanceof m))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,n);const c=i.toNumber(u[1]);if(isNaN(c))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,n);const l=i.toNumber(i.defaultUndefined(u[4],10));if(isNaN(l))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,n);const s=i.toNumber(i.defaultUndefined(u[5],0));if(isNaN(s))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,n);return h.offset(u[0],c,o.convertLinearUnitsToCode(i.defaultUndefined(u[2],-1)),i.toString(i.defaultUndefined(u[3],"round")).toLowerCase(),l,s)}))},e.rotate=function(e,n){return r(e,n,((r,o,a)=>{a=i.autoCastFeatureToGeometry(a),i.pcCheck(a,2,3,e,n);let u=a[0];if(null===u)return null;if(!(u instanceof s))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,n);u instanceof l&&(u=E.fromExtent(u));const c=i.toNumber(a[1]);if(isNaN(c))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,n);const f=i.defaultUndefined(a[2],null);if(null===f)return h.rotate(u,c);if(f instanceof d)return h.rotate(u,c,f);throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,n)}))},e.centroid=function(e,n){return r(e,n,((r,u,c)=>{if(c=i.autoCastFeatureToGeometry(c),i.pcCheck(c,1,1,e,n),null===c[0])return null;let C=c[0];if((i.isArray(c[0])||i.isImmutableArray(c[0]))&&(C=i.autoCastArrayOfPointsToMultiPoint(c[0],e.spatialReference)),null===C)return null;if(!(C instanceof s))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,n);return C instanceof d?i.fixSpatialReference(o.cloneGeometry(c[0]),e.spatialReference):C instanceof E?C.centroid:C instanceof m?a.centroidPolyline(C):C instanceof f?a.centroidMultiPoint(C):C instanceof l?C.center:null}))},e.measuretocoordinate=function(e,o){return r(e,o,((r,a,c)=>{if(c=i.autoCastFeatureToGeometry(c),i.pcCheck(c,2,2,e,o),null===c[0])return null;let l=c[0];if((i.isArray(c[0])||i.isImmutableArray(c[0]))&&(l=i.autoCastArrayOfPointsToPolyline(c[0],e.spatialReference)),null===l)return null;if(!(l instanceof s))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,o);if(!(l instanceof m))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,o);if(i.isNumber(!1===c[1]))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,o);const f=u.measureToCoordinate(l,c[1]);return f?n.convertObjectToArcadeDictionary(f,i.defaultTimeZone(e),!1,!0):null}))},e.pointtocoordinate=function(e,o){return r(e,o,((r,a,c)=>{if(c=i.autoCastFeatureToGeometry(c),i.pcCheck(c,2,2,e,o),null===c[0])return null;let l=c[0];if((i.isArray(c[0])||i.isImmutableArray(c[0]))&&(l=i.autoCastArrayOfPointsToPolyline(c[0],e.spatialReference)),null===l)return null;if(!(l instanceof s))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,o);if(!(l instanceof m))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,o);const f=c[1];if(null===f)return null;if(!(f instanceof d))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,o);if(i.isNumber(!1===c[1]))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,o);const E=u.pointToCoordinate(l,f);return E?n.convertObjectToArcadeDictionary(E,i.defaultTimeZone(e),!1,!0):null}))},e.distancetocoordinate=function(e,o){return r(e,o,((r,a,c)=>{if(c=i.autoCastFeatureToGeometry(c),i.pcCheck(c,2,2,e,o),null===c[0])return null;let l=c[0];if((i.isArray(c[0])||i.isImmutableArray(c[0]))&&(l=i.autoCastArrayOfPointsToPolyline(c[0],e.spatialReference)),null===l)return null;if(!(l instanceof s))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,o);if(!(l instanceof m))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,o);if(i.isNumber(!1===c[1]))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,o);const f=u.distanceToCoordinate(l,c[1]);return f?n.convertObjectToArcadeDictionary(f,i.defaultTimeZone(e),!1,!0):null}))},e.multiparttosinglepart=function(e,n){return r(e,n,((r,a,u)=>{u=i.autoCastFeatureToGeometry(u),i.pcCheck(u,1,1,e,n);const c=[];if(null===u[0])return null;if(!(u[0]instanceof s))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,n);if(u[0]instanceof d)return[i.fixSpatialReference(o.cloneGeometry(u[0]),e.spatialReference)];if(u[0]instanceof l)return[i.fixSpatialReference(o.cloneGeometry(u[0]),e.spatialReference)];const x=h.simplify(u[0]);if(x instanceof E){const e=[],r=[];for(let n=0;n<x.rings.length;n++)if(x.isClockwise(x.rings[n])){const r=C.fromJSON({rings:[x.rings[n]],hasZ:!0===x.hasZ,hasM:!0===x.hasM,spatialReference:x.spatialReference.toJSON()});e.push(r)}else r.push({ring:x.rings[n],pt:x.getPoint(n,0)});for(let n=0;n<r.length;n++)for(let t=0;t<e.length;t++)if(e[t].contains(r[n].pt)){e[t].addRing(r[n].ring);break}return e}if(x instanceof m){const e=[];for(let r=0;r<x.paths.length;r++){const n=C.fromJSON({paths:[x.paths[r]],hasZ:!0===x.hasZ,hasM:!0===x.hasM,spatialReference:x.spatialReference.toJSON()});e.push(n)}return e}if(u[0]instanceof f){const r=i.fixSpatialReference(o.cloneGeometry(u[0]),e.spatialReference);for(let e=0;e<r.points.length;e++)c.push(r.getPoint(e));return c}return null}))},e.issimple=function(e,n){return r(e,n,((r,o,a)=>{if(a=i.autoCastFeatureToGeometry(a),i.pcCheck(a,1,1,e,n),null===a[0])return!0;if(!(a[0]instanceof s))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,n);return h.isSimple(a[0])}))},e.simplify=function(e,n){return r(e,n,((r,o,a)=>{if(a=i.autoCastFeatureToGeometry(a),i.pcCheck(a,1,1,e,n),null===a[0])return null;if(!(a[0]instanceof s))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,n);return h.simplify(a[0])}))},e.convexhull=function(e,n){return r(e,n,((r,o,a)=>{if(a=i.autoCastFeatureToGeometry(a),i.pcCheck(a,1,1,e,n),null===a[0])return null;if(!(a[0]instanceof s))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,n);return h.convexHull(a[0])}))},e.nearestcoordinate=function(e,o){return r(e,o,((r,a,u)=>{if(u=i.autoCastFeatureToGeometry(u),i.pcCheck(u,2,2,e,o),!(u[0]instanceof s||null===u[0]))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,o);if(!(u[1]instanceof d||null===u[1]))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,o);if(null===u[0]||null===u[1])return null;const c=h.nearestCoordinate(u[0],u[1]);return null===c||c.isEmpty?null:n.convertObjectToArcadeDictionary({coordinate:c.coordinate,distance:c.distance,sideOfLine:0===c.distance?"straddle":c.isRightSide?"right":"left"},i.defaultTimeZone(e),!1,!0)}))},e.nearestvertex=function(e,o){return r(e,o,((r,a,u)=>{if(u=i.autoCastFeatureToGeometry(u),i.pcCheck(u,2,2,e,o),!(u[0]instanceof s||null===u[0]))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,o);if(!(u[1]instanceof d||null===u[1]))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,o);if(null===u[0]||null===u[1])return null;const c=h.nearestVertex(u[0],u[1]);return null===c||c.isEmpty?null:n.convertObjectToArcadeDictionary({coordinate:c.coordinate,distance:c.distance,sideOfLine:0===c.distance?"straddle":c.isRightSide?"right":"left"},i.defaultTimeZone(e),!1,!0)}))}}e.registerFunctions=p,e.setGeometryEngine=y,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
