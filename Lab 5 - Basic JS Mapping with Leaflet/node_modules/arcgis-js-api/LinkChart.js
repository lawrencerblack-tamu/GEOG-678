/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["./chunks/tslib.es6","./Map","./core/Loadable","./core/loadAll","./core/Logger","./core/MultiOriginJSONSupport","./core/Promise","./core/Version","./core/accessorSupport/decorators/property","./core/has","./core/RandomLCG","./core/accessorSupport/decorators/reader","./core/accessorSupport/decorators/subclass","./core/accessorSupport/decorators/writer","./core/accessorSupport/read","./linkchart/InitialViewProperties","./portal/PortalItem","./webdoc/support/webdocLoadUtils"],(function(e,r,o,t,i,s,a,n,c,l,p,d,u,h,y,m,_,v){"use strict";const V=new n.Version(2,28),g="Link Chart",w="linkchart",S="link-chart",b={currentVersion:V,createInitialViewProperties:()=>new m,parseVersion:n.Version.parse,itemType:g,name:w,origin:S};let I=class extends(s.MultiOriginJSONMixin(o.LoadableMixin(a.EsriPromiseMixin(r)))){constructor(e){super(e),this.resourceReferences={portalItem:null,paths:[]},this.initialViewProperties=new m,this.portalItem=null,this.sourceVersion=null}load(e){return this.addResolvingPromise(v.loadFromSource(b,this)),Promise.resolve(this)}destroy(){const e=this.portalItem;this.portalItem=null,e?.destroy()}initialize(){if(this.when().catch((e=>{i.getLogger(this).error("#load()","Failed to load link chart",e)})),this.resourceInfo){let r;try{r=this._validateJSON(this.resourceInfo)}catch(e){return void this.addResolvingPromise(Promise.reject(e))}this.read(r)}}readSourceVersion(e,r){return n.Version.parse(r.version,w)}writeSourceVersion(e,r,o){r[o]=`${V.major}.${V.minor}`}loadAll(){return t.loadAll(this,(e=>{e(this.ground,this.basemap,this.layers,this.tables)}))}read(e,r){r={...r,origin:S},y.readLoadable(this,e,(r=>super.read(e,r)),r)}_validateJSON(e){const r=n.Version.parse(e.version||"","link-chart");return V.validate(r),e.version=`${r.major}.${r.minor}`,e}};e.__decorate([c.property({type:m,nonNullable:!0,json:{read:{source:["background","initialState.viewpoint","mapRangeInfo","spatialReference"]}}})],I.prototype,"initialViewProperties",void 0),e.__decorate([c.property({json:{read:!1}})],I.prototype,"layers",void 0),e.__decorate([c.property()],I.prototype,"linkChartProperties",void 0),e.__decorate([c.property({type:_})],I.prototype,"portalItem",void 0),e.__decorate([c.property()],I.prototype,"resourceInfo",void 0),e.__decorate([c.property({readOnly:!0,type:n.Version,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],I.prototype,"sourceVersion",void 0),e.__decorate([d.reader("sourceVersion")],I.prototype,"readSourceVersion",null),e.__decorate([h.writer("sourceVersion")],I.prototype,"writeSourceVersion",null),e.__decorate([c.property({json:{read:!1}})],I.prototype,"tables",void 0),I=e.__decorate([u.subclass("esri.LinkChart")],I);return I}));
