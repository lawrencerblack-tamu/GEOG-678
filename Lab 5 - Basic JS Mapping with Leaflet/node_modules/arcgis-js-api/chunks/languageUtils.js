/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["exports","../config","../kernel","../arcade/ArcadeDate","../arcade/ArcadeModule","../arcade/executionError","../arcade/FunctionWrapper","../arcade/ImmutableArray","../arcade/ImmutablePathArray","../arcade/ImmutablePointArray","../arcade/featureset/support/shared","../core/number","../core/sql/DateOnly","../core/sql/TimeOnly","../geometry/Extent","../geometry/Geometry","../geometry/Multipoint","../geometry/Point","../geometry/Polygon","../geometry/Polyline","../geometry/SpatialReference","../geometry/support/coordsUtils","../geometry/support/jsonUtils","../intl/locale","./datetime"],(function(e,t,n,r,i,o,a,u,l,s,c,f,d,m,y,p,g,h,b,S,N,x,A,D,Z){"use strict";class T{constructor(e){this.value=e}}class C{constructor(e){this.value=e}}const k=C,F=T,E={type:"VOID"},M={type:"BREAK"},R={type:"CONTINUE"};function O(e,t,n){return""===t||null==t||t===n||t===n?e:e=e.split(t).join(n)}function w(e){return e instanceof a.ArcadeFunction}function J(e){return e instanceof i.ArcadeModule}function I(e){return!!v(e)||(!!_(e)||(!!W(e)||(!!$(e)||(!!Q(e)||(!!G(e)||(null===e||(e===E||"number"==typeof e)))))))}function L(e,t){return void 0===e?t:e}function P(e){return null==e?"":V(e)||K(e)?"Array":W(e)?"Date":Q(e)?"Time":$(e)?"DateOnly":v(e)?"String":G(e)?"Boolean":_(e)?"Number":"esri.arcade.Attachment"===e?.declaredClass?"Attachment":"esri.arcade.Portal"===e?.declaredClass?"Portal":"esri.arcade.Dictionary"===e?.declaredClass?"Dictionary":H(e)?"KnowledgeGraph":e instanceof i.ArcadeModule?"Module":z(e)?"Feature":e instanceof h?"Point":e instanceof b?"Polygon":e instanceof S?"Polyline":e instanceof g?"Multipoint":e instanceof y?"Extent":w(e)?"Function":U(e)?"FeatureSet":B(e)?"FeatureSetCollection":e===E?"":"number"==typeof e&&isNaN(e)?"Number":"Unrecognized Type"}function v(e){return"string"==typeof e||e instanceof String}function G(e){return"boolean"==typeof e}function _(e){return"number"==typeof e}function j(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}function Y(e){return e instanceof p}function V(e){return e instanceof Array}function z(e){return"esri.arcade.Feature"===e?.arcadeDeclaredClass}function U(e){return"esri.arcade.featureset.support.FeatureSet"===e?.declaredRootClass}function q(e){return"esri.arcade.Dictionary"===e?.declaredClass}function B(e){return"esri.arcade.featureSetCollection"===e?.declaredRootClass}function H(e){return"esri.rest.knowledgeGraph.KnowledgeGraph"===e?.declaredClass}function K(e){return e instanceof u}function W(e){return e instanceof r.ArcadeDate}function $(e){return e instanceof d.DateOnly}function Q(e){return e instanceof m.TimeOnly}function X(e){return null!=e&&"object"==typeof e}function ee(e){return e instanceof Date}function te(e,t,n,r,i){if(e.length<t||e.length>n)throw new o.ArcadeExecutionError(r,o.ExecutionErrorCodes.WrongNumberOfParameters,i)}function ne(e){return e<0?-Math.round(-e):Math.round(e)}function re(){let e=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replaceAll(/[xy]/g,(t=>{const n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))}function ie(e,t){return isNaN(e)||null==t||""===t?e.toString():(t=O(t,"‰",""),t=O(t,"¤",""),f.format(e,{pattern:t}))}function oe(e,t){return null==t||""===t?e.toISOString(!0):e.toFormat(ae(t),{locale:D.getLocale(),numberingSystem:"latn"})}function ae(e,t=!1){e=e.replaceAll(/LTS|LT|LL?L?L?|l{1,4}/g,"[$&]");let n="";const r=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|Z{1,5}|.)/g;for(const i of e.match(r)||[])switch(i){case"D":n+="d";break;case"DD":n+="dd";break;case"DDD":n+="o";break;case"d":n+="c";break;case"ddd":n+="ccc";break;case"dddd":n+="cccc";break;case"M":n+="L";break;case"MM":n+="LL";break;case"MMM":n+="LLL";break;case"MMMM":n+="LLLL";break;case"YY":n+="yy";break;case"Y":case"YYYY":n+="yyyy";break;case"Q":n+="q";break;case"Z":n+="Z";break;case"ZZ":n+="ZZ";break;case"ZZZ":n+="ZZZ";break;case"ZZZZ":n+=t?"[ZZZZ]":"ZZZZ";break;case"ZZZZZ":n+=t?"[ZZZZZ]":"ZZZZZ";break;case"S":n+="'S'";break;case"SS":n+="'SS'";break;case"SSS":n+="u";break;case"A":case"a":n+="a";break;case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":case"X":case"x":n+=i;break;default:i.length>=2&&"["===i.slice(0,1)&&"]"===i.slice(-1)?n+=`'${i.slice(1,-1)}'`:n+=`'${i}'`}return n}function ue(e,t,n){switch(n){case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}return!1}function le(e,t,n){if(null===e){if(null===t||t===E)return ue(null,null,n);if(_(t))return ue(0,t,n);if(v(t))return ue(0,ye(t),n);if(G(t))return ue(0,ye(t),n);if(W(t))return ue(0,t.toNumber(),n);if(Q(t))return ue(e,t.toNumber(),n);if($(t))return ue(e,t.toNumber(),n)}if(e===E){if(null===t||t===E)return ue(null,null,n);if(_(t))return ue(0,t,n);if(v(t))return ue(0,ye(t),n);if(G(t))return ue(0,ye(t),n);if(W(t))return ue(0,t.toNumber(),n);if(Q(t))return ue(e,t.toNumber(),n);if($(t))return ue(e,t.toNumber(),n)}else if(_(e)){if(_(t))return ue(e,t,n);if(G(t))return ue(e,ye(t),n);if(null===t||t===E)return ue(e,0,n);if(v(t))return ue(e,ye(t),n);if(W(t))return ue(e,t.toNumber(),n);if(Q(t))return ue(e,t.toNumber(),n);if($(t))return ue(e,t.toNumber(),n)}else if(v(e)){if(v(t))return ue(ce(e),ce(t),n);if(W(t))return ue(ye(e),t.toNumber(),n);if(Q(t))return ue(ye(e),t.toNumber(),n);if($(t))return ue(ye(e),t.toNumber(),n);if(_(t))return ue(ye(e),t,n);if(null===t||t===E)return ue(ye(e),0,n);if(G(t))return ue(ye(e),ye(t),n)}else if(W(e)){if(W(t))return e.timeZone!==t.timeZone&&(e.isUnknownTimeZone?e=r.ArcadeDate.arcadeDateAndZoneToArcadeDate(e,t.timeZone):t.isUnknownTimeZone&&(t=r.ArcadeDate.arcadeDateAndZoneToArcadeDate(t,e.timeZone))),ue(e.toNumber(),t.toNumber(),n);if(null===t||t===E)return ue(e.toNumber(),0,n);if(_(t))return ue(e.toNumber(),t,n);if(G(t))return ue(e.toNumber(),ye(t),n);if(v(t))return ue(e.toNumber(),ye(t),n);if(Q(t))throw new o.ArcadeExecutionError(null,o.ExecutionErrorCodes.CannotCompareDateAndTime,null);if($(t))return ue(e.toNumber(),t.toNumber(),n)}else if(G(e)){if(G(t))return ue(e,t,n);if(_(t))return ue(ye(e),ye(t),n);if(W(t))return ue(ye(e),t.toNumber(),n);if(Q(t))return ue(ye(e),t.toNumber(),n);if($(t))return ue(ye(e),t.toNumber(),n);if(null===t||t===E)return ue(ye(e),0,n);if(v(t))return ue(ye(e),ye(t),n)}else if($(e)){if(W(t))return ue(e.toNumber(),t.toNumber(),n);if(null===t||t===E)return ue(e.toNumber(),0,n);if(_(t))return ue(e.toNumber(),t,n);if(G(t))return ue(e.toNumber(),ye(t),n);if(v(t))return ue(e.toNumber(),ye(t),n);if(Q(t))throw new o.ArcadeExecutionError(null,o.ExecutionErrorCodes.CannotCompareDateAndTime,null);if($(t))return ue(e.toNumber(),t.toNumber(),n)}else if(Q(e)){if(W(t))throw new o.ArcadeExecutionError(null,o.ExecutionErrorCodes.CannotCompareDateAndTime,null);if(null===t||t===E)return ue(e.toNumber(),0,n);if(_(t))return ue(e.toNumber(),t,n);if(G(t))return ue(e.toNumber(),ye(t),n);if(v(t))return ue(e.toNumber(),ye(t),n);if(Q(t))return ue(e.toNumber(),t.toNumber(),n);if($(t))throw new o.ArcadeExecutionError(null,o.ExecutionErrorCodes.CannotCompareDateAndTime,null)}return!!se(e,t)&&("<="===n||">="===n)}function se(e,t){if(e===t)return!0;if(null===e&&t===E||null===t&&e===E)return!0;if(W(e)&&W(t))return e.equals(t);if(Q(e)&&Q(t))return e.equals(t);if($(e)&&$(t))return e.equals(t);if(e instanceof l)return e.equalityTest(t);if(e instanceof s)return e.equalityTest(t);if(e instanceof h&&t instanceof h){const n=e.cache._arcadeCacheId,r=t.cache._arcadeCacheId;if(null!=n)return n===r}if(X(e)&&X(t)){if(e._arcadeCacheId===t._arcadeCacheId&&void 0!==e._arcadeCacheId&&null!==e._arcadeCacheId)return!0;if(e._underlyingGraphic===t._underlyingGraphic&&void 0!==e._underlyingGraphic&&null!==e._underlyingGraphic)return!0}return!1}function ce(e,t){if(v(e))return e;if(null===e)return"";if(_(e))return ie(e,t);if(G(e))return e.toString();if(W(e))return oe(e,t);if(Q(e))return e.toFormat(t);if($(e))return e.toFormat(t);if(e instanceof p)return JSON.stringify(e.toJSON());if(V(e)){const t=[];for(let n=0;n<e.length;n++)t[n]=me(e[n]);return"["+t.join(",")+"]"}if(e instanceof u){const t=[];for(let n=0;n<e.length();n++)t[n]=me(e.get(n));return"["+t.join(",")+"]"}return null!==e&&"object"==typeof e&&void 0!==e.castToText?e.castToText():w(e)?"object, Function":e===E?"":J(e)?"object, Module":""}function fe(e){const t=[];if(!V(e))return null;if(e instanceof u){for(let n=0;n<e.length();n++)t[n]=ye(e.get(n));return t}for(let n=0;n<e.length;n++)t[n]=ye(e[n]);return t}function de(e,t,n=!1){if(v(e))return e;if(null===e)return"";if(_(e))return ie(e,t);if(G(e))return e.toString();if(W(e))return oe(e,t);if(Q(e))return e.toFormat(t);if($(e))return e.toFormat(t);if(e instanceof p)return e instanceof y?'{"xmin":'+e.xmin.toString()+',"ymin":'+e.ymin.toString()+","+(e.hasZ?'"zmin":'+e.zmin.toString()+",":"")+(e.hasM?'"mmin":'+e.mmin.toString()+",":"")+'"xmax":'+e.xmax.toString()+',"ymax":'+e.ymax.toString()+","+(e.hasZ?'"zmax":'+e.zmax.toString()+",":"")+(e.hasM?'"mmax":'+e.mmax.toString()+",":"")+'"spatialReference":'+Te(e.spatialReference)+"}":Te(e.toJSON(),((e,t)=>e.key===t.key?0:"spatialReference"===e.key?1:"spatialReference"===t.key||e.key<t.key?-1:e.key>t.key?1:0));if(V(e)){const t=[];for(let r=0;r<e.length;r++)t[r]=me(e[r],n);return"["+t.join(",")+"]"}if(e instanceof u){const t=[];for(let r=0;r<e.length();r++)t[r]=me(e.get(r),n);return"["+t.join(",")+"]"}return null!==e&&"object"==typeof e&&void 0!==e.castToText?e.castToText(n):w(e)?"object, Function":e===E?"":J(e)?"object, Module":""}function me(e,t=!1){if(null===e)return"null";if(G(e)||_(e)||v(e))return JSON.stringify(e);if(e instanceof p)return de(e,null,t);if(e instanceof u)return de(e,null,t);if(e instanceof Array)return de(e,null,t);if(W(e))return t?JSON.stringify(e.getTime()):JSON.stringify(oe(e,""));if(Q(e))return JSON.stringify(e.toString());if($(e))return JSON.stringify(e.toString());if(null!==e&&"object"==typeof e){if(void 0!==e.castToText)return e.castToText(t)}else if(e===E)return"null";return"null"}function ye(e,t){return _(e)?e:null===e||""===e?0:W(e)||$(e)||Q(e)?NaN:G(e)?e?1:0:V(e)||""===e||void 0===e?NaN:void 0!==t&&v(e)?(t=O(t,"‰",""),t=O(t,"¤",""),f.parse(e,{pattern:t})):e===E?0:Number(e)}function pe(e,t){if(W(e))return e;if(v(e)){const n=ge(e,t);if(n)return r.ArcadeDate.dateTimeToArcadeDate(n)}return null}function ge(e,t){const n=/ (\d\d)/,i=r.createDateTimeZone(t);let o=Z.DateTime.fromISO(e,{zone:i});return o.isValid||n.test(e)&&(e=e.replace(n,"T$1"),o=Z.DateTime.fromISO(e,{zone:t}),o.isValid)?o:null}function he(e){return G(e)?e:v(e)?"true"===(e=e.toLowerCase()):!!_(e)&&(0!==e&&!isNaN(e))}function be(e,t){const n=JSON.parse(e);return n&&!n.spatialReference&&(n.spatialReference=t),A.fromJSON(n)}function Se(e,t){return null==e?null:(null!==e.spatialReference&&void 0!==e.spatialReference||(e.spatialReference=t),e)}function Ne(e){if(null===e)return null;if(e instanceof h)return"NaN"===e.x||null===e.x||isNaN(e.x)?null:e;if(e instanceof b){if(0===e.rings.length)return null;for(const t of e.rings)if(t.length>0)return e;return null}if(e instanceof S){if(0===e.paths.length)return null;for(const t of e.paths)if(t.length>0)return e;return null}return e instanceof g?0===e.points.length?null:e:e instanceof y?"NaN"===e.xmin||null===e.xmin||isNaN(e.xmin)?null:e:null}function xe(e,t){if(!e)return t;if(!e.domain)return t;let n=null,r=null;if(W(t))n=t.toNumber();else if($(t))n=t.toString();else if(Q(t))n=t.toStorageString();else if("string"===e.field.type||"esriFieldTypeString"===e.field.type)n=ce(t);else{if(null==t)return null;if(""===t)return t;n=ye(t)}for(let i=0;i<e.domain.codedValues.length;i++){const t=e.domain.codedValues[i];t.code===n&&(r=t)}return null===r?ce(t):r.name}function Ae(e,t){if(!e)return t;if(!e.domain)return t;let n=null;const r=ce(t);for(let i=0;i<e.domain.codedValues.length;i++){const t=e.domain.codedValues[i];t.name===r&&(n=t)}return null===n?t:n.code}function De(e,t,n=null,r=null){if(!t)return null;if(!t.fields)return null;let i,a,u=null;for(let o=0;o<t.fields.length;o++){const n=t.fields[o];n.name.toLowerCase()===e.toString().toLowerCase()&&(u=n)}if(null===u)throw new o.ArcadeExecutionError(null,o.ExecutionErrorCodes.FieldNotFound,null,{key:e});let l=t.typeIdField,s="id",c=t.types;if(t.subtypeField&&(l=t.subtypeField,s="code",c=t.subtypes??[]),null===r&&n&&l)r=n.hasField(l)?n.field(l):null;else if(l&&null!==r){let e=!1;for(const t of c||[])if(r===t[s]){e=!0;break}if(!e)for(const t of c||[])if(r===t.name){r=t[s],e=!0;break}e||(r=null,n&&l&&(r=n.hasField(l)?n.field(l):null))}return null!=r&&c.some((e=>e[s]===r&&(i=e.domains?.[u.name],i&&"inherited"===i.type&&(i=Ze(u.name,t),a=!0),!0))),a||i||(i=Ze(e,t)),{field:u,domain:i}}function Ze(e,t){let n;return t.fields.some((t=>(t.name.toLowerCase()===e.toLowerCase()&&(n=t.domain),!!n))),n}function Te(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});const n="boolean"==typeof t.cycles&&t.cycles,r=t.cmp&&(i=t.cmp,function(e){return function(t,n){const r={key:t,value:e[t]},o={key:n,value:e[n]};return i(r,o)}});var i;const o=[];return function e(t){if(t?.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0===t)return;if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);let i,a;if(Array.isArray(t)){for(a="[",i=0;i<t.length;i++)i&&(a+=","),a+=e(t[i])||"null";return a+"]"}if(null===t)return"null";if(o.includes(t)){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const u=o.push(t)-1,l=Object.keys(t).sort(r?.(t));for(a="",i=0;i<l.length;i++){const n=l[i],r=e(t[n]);r&&(a&&(a+=","),a+=JSON.stringify(n)+":"+r)}return o.splice(u,1),"{"+a+"}"}(e)}function Ce(e){if(null===e)return null;const t=[];for(const n of e)n?.arcadeDeclaredClass&&"esri.arcade.Feature"===n.arcadeDeclaredClass?t.push(n.geometry()):t.push(n);return t}function ke(e,t){if(!(t instanceof h))throw new o.ArcadeExecutionError(null,o.ExecutionErrorCodes.InvalidParameter,null);e.push(t.hasZ?t.hasM?[t.x,t.y,t.z,t.m]:[t.x,t.y,t.z]:[t.x,t.y])}function Fe(e,t){if(V(e)||K(e)){let n=!1,r=!1,i=[],a=t;if(V(e)){for(const t of e)ke(i,t);i.length>0&&(a=e[0].spatialReference,n=e[0].hasZ,r=e[0].hasM)}else if(e instanceof s)i=e._elements,i.length>0&&(n=e._hasZ,r=e._hasM,a=e.get(0).spatialReference);else{if(!K(e))throw new o.ArcadeExecutionError(null,o.ExecutionErrorCodes.InvalidParameter,null);for(const t of e.toArray())ke(i,t);i.length>0&&(a=e.get(0).spatialReference,n=!0===e.get(0).hasZ,r=!0===e.get(0).hasM)}if(0===i.length)return null;return x.isClockwise(i)||(i=i.slice(0).reverse()),new b({rings:[i],spatialReference:a,hasZ:n,hasM:r})}return e}function Ee(e,t){if(V(e)||K(e)){let n=!1,r=!1,i=[],o=t;if(V(e)){for(const t of e)ke(i,t);i.length>0&&(o=e[0].spatialReference,n=!0===e[0].hasZ,r=!0===e[0].hasM)}else if(e instanceof s)i=e._elements,i.length>0&&(n=e._hasZ,r=e._hasM,o=e.get(0).spatialReference);else if(K(e)){for(const t of e.toArray())ke(i,t);i.length>0&&(o=e.get(0).spatialReference,n=!0===e.get(0).hasZ,r=!0===e.get(0).hasM)}return 0===i.length?null:new S({paths:[i],spatialReference:o,hasZ:n,hasM:r})}return e}function Me(e,t){if(V(e)||K(e)){let n=!1,r=!1,i=[],o=t;if(V(e)){for(const t of e)ke(i,t);i.length>0&&(o=e[0].spatialReference,n=!0===e[0].hasZ,r=!0===e[0].hasM)}else if(e instanceof s)i=e._elements,i.length>0&&(n=e._hasZ,r=e._hasM,o=e.get(0).spatialReference);else if(K(e)){for(const t of e.toArray())ke(i,t);i.length>0&&(o=e.get(0).spatialReference,n=!0===e.get(0).hasZ,r=!0===e.get(0).hasM)}return 0===i.length?null:new g({points:i,spatialReference:o,hasZ:n,hasM:r})}return e}function Re(e,t=!1){const n=[];if(null===e)return n;if(!0===V(e)){for(let r=0;r<e.length;r++){const i=ce(e[r]);""===i&&!0!==t||n.push(i)}return n}if(e instanceof u){for(let r=0;r<e.length();r++){const i=ce(e.get(r));""===i&&!0!==t||n.push(i)}return n}if(I(e)){const r=ce(e);return""===r&&!0!==t||n.push(r),n}return[]}let Oe=0;function we(e){return Oe++,Oe%100==0?(Oe=0,new Promise((t=>{setTimeout((()=>{t(e)}),0)}))):e}function Je(e,t,n){switch(n){case"&":return e&t;case"|":return e|t;case"^":return e^t;case"<<":return e<<t;case">>":return e>>t;case">>>":return e>>>t}}function Ie(e,t=null){return null==e?null:G(e)||_(e)||v(e)?e:e instanceof p?!0===t?.keepGeometryType?e:e.toJSON():e instanceof u?e.toArray().map((e=>Ie(e,t))):e instanceof Array?e.map((e=>Ie(e,t))):ee(e)?e:W(e)?e.toJSDate():Q(e)?e.toString():$(e)?e.toJSDate():null!==e&&"object"==typeof e&&void 0!==e.castAsJson?e.castAsJson(t):null}async function Le(e,t,n,r,i){const o=await Pe(e,t,n);i[r]=o}async function Pe(e,t=null,n=null){if(e instanceof u&&(e=e.toArray()),null==e)return null;if(I(e)||e instanceof p||ee(e)||W(e))return Ie(e,n);if(e instanceof Array){const r=[],i=[];for(const o of e)null===o||I(o)||o instanceof p||ee(o)||W(o)?i.push(Ie(o,n)):(i.push(null),r.push(Le(o,t,n,i.length-1,i)));return r.length>0&&await Promise.all(r),i}return null!==e&&"object"==typeof e&&void 0!==e.castAsJsonAsync?e.castAsJsonAsync(t,n):null}function ve(e){return Ge(e)?e.parent:e}function Ge(e){return e&&"declaredClass"in e&&"esri.layers.support.SubtypeSublayer"===e.declaredClass}function _e(e){return e&&"declaredClass"in e&&"esri.layers.SubtypeGroupLayer"===e.declaredClass}function je(e,t,n){const r=ve(e.fullSchema());if(null===r)return null;if(!r.fields)return null;return De(t,r,e,n)}function Ye(e){const t=ve(e.fullSchema());return null===t?null:t.fields?t.subtypeField?{subtypeField:t.subtypeField,subtypes:t.subtypes?t.subtypes.map((e=>({name:e.name,code:e.code}))):[]}:t.typeIdField?{subtypeField:t.typeIdField,subtypes:t.types?t.types.map((e=>({name:e.name,code:e.id}))):[]}:null:null}function Ve(e,t,n,r){const i=ve(e.fullSchema());if(null===i)return null;if(!i.fields)return null;const o=De(t,i,e,r);if(void 0===n)try{n=e.field(t)}catch(a){return null}return xe(o,n)}function ze(e,t,n,r){const i=ve(e.fullSchema());if(null===i)return null;if(!i.fields)return null;if(void 0===n){try{n=e.field(t)}catch(o){return null}return n}return Ae(De(t,i,e,r),n)}function Ue(e){return e?.timeZone??"system"}function qe(e){const t=ve(e.fullSchema());if(null===t)return null;if(!t.fields)return null;const n=[];for(const r of t.fields)n.push(c.esriFieldToJson(r));return{objectIdField:t.objectIdField,globalIdField:t.globalIdField??"",geometryType:void 0===c.layerGeometryEsriRestConstants[t.geometryType]?"":c.layerGeometryEsriRestConstants[t.geometryType],fields:n}}function Be(e,i){return"system"===e&&(e=r.ArcadeDate.systemTimeZoneCanonicalName),{version:He,engineVersion:n.version,timeZone:e,spatialReference:i instanceof N?i.toJSON():i,application:t.applicationName??"",engine:"web",locale:D.getLocale()}}const He="1.24",Ke=Object.freeze(Object.defineProperty({__proto__:null,ImplicitResultE:C,ReturnResultE:T,absRound:ne,arcadeVersion:He,autoCastArrayOfPointsToMultiPoint:Me,autoCastArrayOfPointsToPolygon:Fe,autoCastArrayOfPointsToPolyline:Ee,autoCastFeatureToGeometry:Ce,binaryOperator:Je,breakResult:M,castAsJson:Ie,castAsJsonAsync:Pe,continueResult:R,defaultExecutingContext:Be,defaultTimeZone:Ue,defaultUndefined:L,equalityTest:se,featureDomainCodeLookup:ze,featureDomainValueLookup:Ve,featureFullDomain:je,featureSchema:qe,featureSubtypes:Ye,fixNullGeometry:Ne,fixSpatialReference:Se,formatDate:oe,formatNumber:ie,generateUUID:re,getDomain:De,getDomainCode:Ae,getDomainValue:xe,getType:P,greaterThanLessThan:le,implicitResult:k,isArray:V,isBoolean:G,isDate:W,isDateOnly:$,isDictionary:q,isFeature:z,isFeatureSet:U,isFeatureSetCollection:B,isFunctionParameter:w,isGeometry:Y,isImmutableArray:K,isInteger:j,isJsDate:ee,isKnowledgeGraph:H,isModule:J,isNumber:_,isObject:X,isSimpleType:I,isString:v,isSubtypeGrouplayer:_e,isSubtypeSublayer:Ge,isTime:Q,multiReplace:O,parseGeometryFromJson:be,pcCheck:te,returnResult:F,stableStringify:Te,standardiseDateFormat:ae,tick:we,toBoolean:he,toDate:pe,toNumber:ye,toNumberArray:fe,toString:ce,toStringArray:Re,toStringExplicit:de,voidOperation:E},Symbol.toStringTag,{value:"Module"}));e.ImplicitResultE=C,e.ReturnResultE=T,e.absRound=ne,e.arcadeVersion=He,e.autoCastArrayOfPointsToMultiPoint=Me,e.autoCastArrayOfPointsToPolygon=Fe,e.autoCastArrayOfPointsToPolyline=Ee,e.autoCastFeatureToGeometry=Ce,e.binaryOperator=Je,e.breakResult=M,e.castAsJson=Ie,e.castAsJsonAsync=Pe,e.continueResult=R,e.defaultExecutingContext=Be,e.defaultTimeZone=Ue,e.defaultUndefined=L,e.equalityTest=se,e.featureDomainCodeLookup=ze,e.featureDomainValueLookup=Ve,e.featureFullDomain=je,e.featureSchema=qe,e.featureSubtypes=Ye,e.fixNullGeometry=Ne,e.fixSpatialReference=Se,e.formatDate=oe,e.formatNumber=ie,e.generateUUID=re,e.getDomain=De,e.getDomainCode=Ae,e.getDomainValue=xe,e.getType=P,e.greaterThanLessThan=le,e.implicitResult=k,e.isArray=V,e.isBoolean=G,e.isDate=W,e.isDateOnly=$,e.isDictionary=q,e.isFeature=z,e.isFeatureSet=U,e.isFeatureSetCollection=B,e.isFunctionParameter=w,e.isGeometry=Y,e.isImmutableArray=K,e.isInteger=j,e.isJsDate=ee,e.isKnowledgeGraph=H,e.isModule=J,e.isNumber=_,e.isObject=X,e.isSimpleType=I,e.isString=v,e.isSubtypeGrouplayer=_e,e.isSubtypeSublayer=Ge,e.isTime=Q,e.lc=Ke,e.multiReplace=O,e.parseGeometryFromJson=be,e.pcCheck=te,e.returnResult=F,e.stableStringify=Te,e.standardiseDateFormat=ae,e.tick=we,e.toBoolean=he,e.toDate=pe,e.toNumber=ye,e.toNumberArray=fe,e.toString=ce,e.toStringArray=Re,e.toStringExplicit=de,e.voidOperation=E}));
