/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["exports","./guid","./componentsUtils"],(function(t,e,n){"use strict";
/*!
   * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
   * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
   * v2.4.0
   */var r=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],o=r.join(","),i="undefined"==typeof Element,u=i?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,a=!i&&Element.prototype.getRootNode?function(t){var e;return null==t||null===(e=t.getRootNode)||void 0===e?void 0:e.call(t)}:function(t){return null==t?void 0:t.ownerDocument},l=function t(e,n){var r;void 0===n&&(n=!0);var o=null==e||null===(r=e.getAttribute)||void 0===r?void 0:r.call(e,"inert");return""===o||"true"===o||n&&e&&t(e.parentNode)},c=function(t){var e,n=null==t||null===(e=t.getAttribute)||void 0===e?void 0:e.call(t,"contenteditable");return""===n||"true"===n},s=function(t,e,n){if(l(t))return[];var r=Array.prototype.slice.apply(t.querySelectorAll(o));return e&&u.call(t,o)&&r.unshift(t),r=r.filter(n)},d=function t(e,n,r){for(var i=[],a=Array.from(e);a.length;){var c=a.shift();if(!l(c,!1))if("SLOT"===c.tagName){var s=c.assignedElements(),d=t(s.length?s:c.children,!0,r);r.flatten?i.push.apply(i,d):i.push({scopeParent:c,candidates:d})}else{u.call(c,o)&&r.filter(c)&&(n||!e.includes(c))&&i.push(c);var f=c.shadowRoot||"function"==typeof r.getShadowRoot&&r.getShadowRoot(c),h=!l(f,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(c));if(f&&h){var p=t(!0===f?c.children:f.children,!0,r);r.flatten?i.push.apply(i,p):i.push({scopeParent:c,candidates:p})}else a.unshift.apply(a,c.children)}}return i},f=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},h=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||c(t))&&!f(t)?0:t.tabIndex},p=function(t,e){var n=h(t);return n<0&&e&&!f(t)?0:n},m=function(t,e){return t.tabIndex===e.tabIndex?t.documentOrder-e.documentOrder:t.tabIndex-e.tabIndex},g=function(t){return"INPUT"===t.tagName},y=function(t){return g(t)&&"hidden"===t.type},v=function(t){return"DETAILS"===t.tagName&&Array.prototype.slice.apply(t.children).some((function(t){return"SUMMARY"===t.tagName}))},S=function(t,e){for(var n=0;n<t.length;n++)if(t[n].checked&&t[n].form===e)return t[n]},b=function(t){if(!t.name)return!0;var e,n=t.form||a(t),r=function(t){return n.querySelectorAll('input[type="radio"][name="'+t+'"]')};if("undefined"!=typeof window&&void 0!==window.CSS&&"function"==typeof window.CSS.escape)e=r(window.CSS.escape(t.name));else try{e=r(t.name)}catch(i){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",i.message),!1}var o=S(e,t.form);return!o||o===t},w=function(t){return g(t)&&"radio"===t.type},E=function(t){return w(t)&&!b(t)},A=function(t){var e,n,r,o,i=t&&a(t),u=null===(e=i)||void 0===e?void 0:e.host,l=!1;if(i&&i!==t)for(l=!!(null!==(n=u)&&void 0!==n&&null!==(r=n.ownerDocument)&&void 0!==r&&r.contains(u)||null!=t&&null!==(o=t.ownerDocument)&&void 0!==o&&o.contains(t));!l&&u;){var c,s,d;l=!(null===(s=u=null===(c=i=a(u))||void 0===c?void 0:c.host)||void 0===s||null===(d=s.ownerDocument)||void 0===d||!d.contains(u))}return l},N=function(t){var e=t.getBoundingClientRect(),n=e.width,r=e.height;return 0===n&&0===r},C=function(t,e){var n=e.displayCheck,r=e.getShadowRoot;if("hidden"===getComputedStyle(t).visibility)return!0;var o=u.call(t,"details>summary:first-of-type")?t.parentElement:t;if(u.call(o,"details:not([open]) *"))return!0;if(n&&"full"!==n&&"legacy-full"!==n){if("non-zero-area"===n)return N(t)}else{if("function"==typeof r){for(var i=t;t;){var l=t.parentElement,c=a(t);if(l&&!l.shadowRoot&&!0===r(l))return N(t);t=t.assignedSlot?t.assignedSlot:l||c===t.ownerDocument?l:c.host}t=i}if(A(t))return!t.getClientRects().length;if("legacy-full"!==n)return!0}return!1},I=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var e=t.parentElement;e;){if("FIELDSET"===e.tagName&&e.disabled){for(var n=0;n<e.children.length;n++){var r=e.children.item(n);if("LEGEND"===r.tagName)return!!u.call(e,"fieldset[disabled] *")||!r.contains(t)}return!0}e=e.parentElement}return!1},R=function(t,e){return!(e.disabled||l(e)||y(e)||C(e,t)||v(e)||I(e))},T=function(t,e){return!(E(e)||h(e)<0||!R(t,e))},x=function(t){var e=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(e)||e>=0)},D=function t(e){var n=[],r=[];return e.forEach((function(e,o){var i=!!e.scopeParent,u=i?e.scopeParent:e,a=p(u,i),l=i?t(e.candidates):u;0===a?i?n.push.apply(n,l):n.push(u):r.push({documentOrder:o,tabIndex:a,item:e,isScope:i,content:l})})),r.sort(m).reduce((function(t,e){return e.isScope?t.push.apply(t,e.content):t.push(e.content),t}),[]).concat(n)},L=function(t,e){var n;return n=(e=e||{}).getShadowRoot?d([t],e.includeContainer,{filter:T.bind(null,e),flatten:!1,getShadowRoot:e.getShadowRoot,shadowRootFilter:x}):s(t,e.includeContainer,T.bind(null,e)),D(n)},O=function(t,e){return(e=e||{}).getShadowRoot?d([t],e.includeContainer,{filter:R.bind(null,e),flatten:!0,getShadowRoot:e.getShadowRoot}):s(t,e.includeContainer,R.bind(null,e))},B=function(t,e){if(e=e||{},!t)throw new Error("No node provided");return!1!==u.call(t,o)&&T(e,t)},F=r.concat("iframe").join(","),q=function(t,e){if(e=e||{},!t)throw new Error("No node provided");return!1!==u.call(t,F)&&R(e,t)};const P={getShadowRoot:!0};function $(t){return t?t.id=t.id||`${t.tagName.toLowerCase()}-${e.guid()}`:""}function k(t){return Array.isArray(t)?t:Array.from(t)}function U(t){const e=W(t,`.${n.CSS_UTILITY.darkMode}, .${n.CSS_UTILITY.lightMode}`);return e?.classList.contains("calcite-mode-dark")?"dark":"light"}function M(t){const e="dir",n=W(t,`[${e}]`);return n?n.getAttribute(e):"ltr"}function j(t){return t?parseFloat(getComputedStyle(t).inlineSize):0}function G(t){return t.getRootNode()}function Y(t){const e=G(t);return"host"in e?e:null}function _(t,e){if(!t)return 0;const n=document.createElement("canvas").getContext("2d");return n.font=e,n.measureText(t).width}function z(t){return t.host||null}function H(t,{selector:e,id:n}){function r(t){if(!t)return null;t.assignedSlot&&(t=t.assignedSlot);const o=G(t),i=n?"getElementById"in o?o.getElementById(n):null:e?o.querySelector(e):null,u=z(o);return i||(u?r(u):null)}return r(t)}function W(t,e){function n(t){return t?t.closest(e)||n(z(G(t))):null}return n(t)}function X(t,e){return V(t,e)}function V(t,e){if(!t)return;const n=e(t);if(void 0!==n)return n;const{parentNode:r}=t;return V(r instanceof ShadowRoot?r.host:r,e)}function J(t,e){return!!X(e,(e=>e===t||void 0))}function K(t){return"function"==typeof t?.setFocus}async function Q(t){if(t)return K(t)?t.setFocus():t.focus()}function Z(t){if(t)return L(t,P)[0]??t}function tt(t){Z(t)?.focus()}const et=":not([slot])";function nt(t,e,n){e&&!Array.isArray(e)&&"string"!=typeof e&&(n=e,e=null);const r=e?Array.isArray(e)?e.map((t=>`[slot="${t}"]`)).join(","):`[slot="${e}"]`:et;return n?.all?ot(t,r,n):it(t,r,n)}function rt(t,e){return t?Array.from(t.children||[]).filter((t=>t?.matches(e))):[]}function ot(t,e,n){let r=e===et?rt(t,et):Array.from(t.querySelectorAll(e));r=n&&!1===n.direct?r:r.filter((e=>e.parentElement===t)),r=n?.matches?r.filter((t=>t?.matches(n.matches))):r;const o=n?.selector;return o?r.map((t=>Array.from(t.querySelectorAll(o)))).reduce(((t,e)=>[...t,...e]),[]).filter((t=>!!t)):r}function it(t,e,n){let r=e===et?rt(t,et)[0]||null:t.querySelector(e);r=n&&!1===n.direct||r?.parentElement===t?r:null,r=n?.matches?r?.matches(n.matches)?r:null:r;const o=n?.selector;return o?r?.querySelector(o):r}function ut(t,e){return Array.from(t.children).filter((t=>t.matches(e)))}function at(t,e,n){return"string"==typeof e&&""!==e?e:""===e?t[n]:void 0}function lt(t,e){return!(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)}function ct(t){return Boolean(t).toString()}function st(t){return pt(t)||ft(t)}function dt(t){return ht(t).filter((t=>t.nodeType===Node.TEXT_NODE)).map((t=>t.textContent)).join("").trim()}function ft(t){return!!dt(t)}function ht(t){return t.target.assignedNodes({flatten:!0})}function pt(t){return!!mt(t).length}function mt(t){return t.target.assignedElements({flatten:!0})}function gt(t){return!(!t.isPrimary||0!==t.button)}const yt=(t,e,n,r=!0)=>{const o=t.indexOf(e),i=0===o,u=o===t.length-1;let a;return r&&(n="previous"===n&&i?"last":"next"===n&&u?"first":n),a="previous"===n?t[o-1]||t[r?t.length-1:o]:"next"===n?t[o+1]||t[r?0:o]:"last"===n?t[t.length-1]:t[0],Q(a),a};function vt(t,e){if(t.parentNode!==e.parentNode)return!1;const n=Array.from(t.parentNode.children);return n.indexOf(t)<n.indexOf(e)}t.closestElementCrossShadowBoundary=W,t.containsCrossShadowBoundary=J,t.ensureId=$,t.filterDirectChildren=ut,t.focusElement=Q,t.focusElementInGroup=yt,t.focusFirstTabbable=tt,t.focusable=O,t.getElementDir=M,t.getElementWidth=j,t.getFirstTabbable=Z,t.getModeName=U,t.getShadowRootNode=Y,t.getSlotted=nt,t.getTabIndex=h,t.getTextWidth=_,t.intersects=lt,t.isBefore=vt,t.isFocusable=q,t.isPrimaryPointerButton=gt,t.isTabbable=B,t.nodeListToArray=k,t.queryElementRoots=H,t.setRequestedIcon=at,t.slotChangeGetAssignedElements=mt,t.slotChangeHasAssignedElement=pt,t.slotChangeHasContent=st,t.tabbable=L,t.tabbableOptions=P,t.toAriaBoolean=ct}));
