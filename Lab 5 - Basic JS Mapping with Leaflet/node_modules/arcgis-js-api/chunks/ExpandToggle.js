/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["exports","./componentsUtils","./dom","./action-group","./action-menu"],(function(t,e,o,n,i){"use strict";
/*!
     * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
     * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
     * v2.4.0
     */const c=150,l=2,r=t=>t.reduce(((t,e)=>t+e),0)/t.length,a=t=>{const e=t.filter((t=>t.slot!==n.SLOTS.menuActions)),o=e?.length;return{actionWidth:o?r(e.map((t=>t.clientWidth||0))):0,actionHeight:o?r(e.map((t=>t.clientHeight||0))):0}},s=({width:t,actionWidth:e,layout:o,height:n,actionHeight:i,groupCount:c})=>{const r="horizontal"===o?t:n,a="horizontal"===o?e:i;return Math.floor((r-c*l)/a)},h=({layout:t,actionCount:e,actionWidth:o,width:n,actionHeight:i,height:c,groupCount:l})=>Math.max(e-s({width:n,actionWidth:o,layout:t,height:c,actionHeight:i,groupCount:l}),0),u=t=>Array.from(t.querySelectorAll("calcite-action")).filter((t=>!t.closest("calcite-action-menu")||t.slot===i.SLOTS.trigger)),d=({actionGroups:t,expanded:o,overflowCount:i})=>{let c=i;t.reverse().forEach((t=>{let i=0;const l=u(t).reverse();l.forEach((t=>{t.slot===n.SLOTS.menuActions&&(t.removeAttribute("slot"),t.textEnabled=o)})),c>0&&l.some((t=>(l.filter((t=>!t.slot)).length>1&&l.length>2&&!t.closest("calcite-action-menu")&&(t.textEnabled=!0,t.setAttribute("slot",n.SLOTS.menuActions),i++,i>1&&c--),c<1))),e.forceUpdate(t)}))},g={chevronsLeft:"chevrons-left",chevronsRight:"chevrons-right"};function f(t,e){return t||e.closest("calcite-shell-panel")?.position||"start"}function p({el:t,expanded:e}){u(t).filter((t=>t.slot!==n.SLOTS.menuActions)).forEach((t=>t.textEnabled=e)),t.querySelectorAll("calcite-action-group, calcite-action-menu").forEach((t=>t.expanded=e))}const m=({tooltip:t,referenceElement:e,expanded:o,ref:n})=>(t&&(t.referenceElement=!o&&e?e:null),n&&n(e),e),x=({expanded:t,expandText:n,collapseText:i,toggle:c,el:l,position:r,tooltip:a,ref:s,scale:h})=>{const u="rtl"===o.getElementDir(l),d=t?i:n,p=[g.chevronsLeft,g.chevronsRight];u&&p.reverse();const x="end"===f(r,l),v=x?p[1]:p[0],A=x?p[0]:p[1];return e.h("calcite-action",{icon:t?v:A,onClick:c,scale:h,text:d,textEnabled:t,title:t||a?null:d,ref:e=>m({tooltip:a,referenceElement:e,expanded:t,ref:s})})};t.ExpandToggle=x,t.geActionDimensions=a,t.getOverflowCount=h,t.overflowActions=d,t.overflowActionsDebounceInMs=c,t.queryActions=u,t.toggleChildActionText=p}));
