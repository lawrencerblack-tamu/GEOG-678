/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["exports","../../core/floatRGBA","../../core/mathUtils","./constants"],(function(o,t,e,a){"use strict";const r=o=>"vertical"===o||"horizontal"===o||"cross"===o||"esriSFSCross"===o||"esriSFSVertical"===o||"esriSFSHorizontal"===o;function i(o,t,a){const i=t.style,n=e.nextPowerOfTwo(Math.ceil(a)),s=r(i)?8*n:16*n,l=2*n;o.width=s,o.height=s;const c=o.getContext("2d");c.strokeStyle="#FFFFFF",c.lineWidth=n,c.beginPath(),"vertical"!==i&&"cross"!==i&&"esriSFSCross"!==i&&"esriSFSVertical"!==i||(c.moveTo(s/2,-l),c.lineTo(s/2,s+l)),"horizontal"!==i&&"cross"!==i&&"esriSFSCross"!==i&&"esriSFSHorizontal"!==i||(c.moveTo(-l,s/2),c.lineTo(s+l,s/2)),"backward-diagonal"!==i&&"diagonal-cross"!==i&&"esriSFSDiagonalCross"!==i&&"esriSFSBackwardDiagonal"!==i||(c.moveTo(-l,-l),c.lineTo(s+l,s+l),c.moveTo(s-l,-l),c.lineTo(s+l,l),c.moveTo(-l,s-l),c.lineTo(l,s+l)),"forward-diagonal"!==i&&"diagonal-cross"!==i&&"esriSFSForwardDiagonal"!==i&&"esriSFSDiagonalCross"!==i||(c.moveTo(s+l,-l),c.lineTo(-l,s+l),c.moveTo(l,-l),c.lineTo(-l,l),c.moveTo(s+l,s-l),c.lineTo(s-l,s+l)),c.stroke();const h=c.getImageData(0,0,o.width,o.height),S=new Uint8Array(h.data);let m;for(let e=0;e<S.length;e+=4)m=S[e+3]/255,S[e]=S[e]*m,S[e+1]=S[e+1]*m,S[e+2]=S[e+2]*m;return[S,o.width,o.height,n]}function n(o,e){const r="Butt"===e,i="Square"===e,n=!r&&!i;o.length%2==1&&(o=[...o,...o]);const s=a.dashRadius,l=2*s;let c=0;for(const t of o)c+=t;const h=Math.round(c*s),S=new Float32Array(h*l),m=.5*s;let F=0,d=0,g=.5,T=!0;for(const t of o){for(F=d,d+=t*s;g<=d;){let o=.5;for(;o<l;){const t=(o-.5)*h+g-.5,e=n?(o-s)*(o-s):Math.abs(o-s);S[t]=T?r?Math.max(Math.max(F+m-g,e),Math.max(g-d+m,e)):e:n?Math.min((g-F)*(g-F)+e,(g-d)*(g-d)+e):i?Math.min(Math.max(g-F,e),Math.max(d-g,e)):Math.min(Math.max(g-F+m,e),Math.max(d+m-g,e)),o++}g++}T=!T}const f=S.length,M=new Uint8Array(4*f);for(let a=0;a<f;++a){const o=(n?Math.sqrt(S[a]):S[a])/s;t.packFloatRGBA(o,M,4*a)}return[M,h,l]}o.rasterizeDash=n,o.rasterizeFillStyle=i,Object.defineProperty(o,Symbol.toStringTag,{value:"Module"})}));
