/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["exports","../../../core/Logger","../Entity","../GraphObject","../ObjectValue","../Path","../Relationship","./KnowledgeWasmInterface","./WasmQueryWrapperInterfaces","./wasmToGeometryFactories"],(function(e,t,n,r,o,s,a,u,p,c){"use strict";const i=()=>t.getLogger("esri.rest.knowledgeGraph.WasmToQueryResponseObjConstructors"),y={decodedWasmObjToQueryResponseObj:(e,t,n)=>{if(null==e)return null;if("object"!=typeof e)return e;if("getDate"in e)return e;if("geometry_type"in e)switch(e.geometry_type.value){case null:return null;case u.WasmGeometryTypeCodes.ESRI_GEOMETRY_POINT:return c.wasmToPointGeometry(e,n);case u.WasmGeometryTypeCodes.ESRI_GEOMETRY_MULTIPOINT:return c.wasmToMultipointGeometry(e,n);case u.WasmGeometryTypeCodes.ESRI_GEOMETRY_POLYLINE:return c.wasmToPolylineGeometry(e,n);case u.WasmGeometryTypeCodes.ESRI_GEOMETRY_POLYGON:return c.wasmToPolygonGeometry(e,n);case u.WasmGeometryTypeCodes.ESRI_GEOMETRY_ENVELOPE:case u.WasmGeometryTypeCodes.ESRI_GEOMETRY_MULTI_PATCH:return i().warnOnce("Envelope and Multipatch are not supported on knowledge entities, but one of those geometry types was detected. Result interpreted as null"),null;case u.WasmGeometryTypeCodes.ESRI_GEOMETRY_NULL:case u.WasmGeometryTypeCodes.ESRI_GEOMETRY_ANY:default:return i().warnOnce("Unknown or blank geometry type returned - Result interpreted as null"),null}else{if(!("object_value_type"in e))return i().warnOnce("A decoded value came back of a type that is not supported. Result interpreted as null"),null;switch(e.object_value_type.value){case p.WasmGraphQueryResponseTypeCodes.OBJECT:return O(e,t,n);case p.WasmGraphQueryResponseTypeCodes.ENTITY:return m(e,t,n);case p.WasmGraphQueryResponseTypeCodes.RELATIONSHIP:return R(e,t,n);case p.WasmGraphQueryResponseTypeCodes.PATH:return E(e,t,n);case p.WasmGraphQueryResponseTypeCodes.ARRAY:return l(e,t,n);default:return i().warnOnce("Unknown graph object type detected!  Result interpreted as null"),null}}}};function l(e,t,n){const r=[],o=e.count();for(let s=0;s<o;s++){const o=e.get_value_at(s);r.push(d(o,t,n))}return r}function d(e,t,n){return y.decodedWasmObjToQueryResponseObj(e,t,n)}function m(e,t,r){const o=e.type_name,s=_(e,t,r),a=e.get_id();return new n(Object.assign({typeName:o,id:a},s))}function T(e,t,n){return new r(_(e,t,n))}function _(e,t,n){const r={},o=e.key_count();for(let s=0;s<o;s++)r[e.get_key_at(s)]=d(e.get_value_at(s),t,n);return{properties:r}}function O(e,t,n){return new o(_(e,t,n))}function E(e,t,n){const r=e.entity_count(),o=e.relationship_count(),a=[];for(let s=0;s<r;s++)a.push(m(e.get_entity_at(s),t,n)),s<o&&a.push(R(e.get_relationship_at(s),t,n));return new s({path:a})}function R(e,t,n){const r=e.type_name,o=_(e,t,n);return new a(Object.assign({typeName:r,id:e.get_id(),originId:e.get_origin_entity_id(),destinationId:e.get_destination_entity_id()},o))}e.decodeWasmObjectTest=y,e.decodedWasmObjToQueryResponseObj=d,e.wasmArrayToArray=l,e.wasmToEntity=m,e.wasmToGraphObject=T,e.wasmToObjectValue=O,e.wasmToPath=E,e.wasmToRelationship=R,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
