/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["exports","../../core/ObjectStack","../../core/libs/gl-matrix-2/math/mat4","../../chunks/vec32","../../core/libs/gl-matrix-2/factories/vec3f64","../../chunks/vec42","../../core/libs/gl-matrix-2/factories/vec4f64","./clipRay","./plane","./vectorStacks"],(function(e,n,t,T,o,_,i,r,O,R){"use strict";function P(e){return e?[O.create(e[0]),O.create(e[1]),O.create(e[2]),O.create(e[3]),O.create(e[4]),O.create(e[5])]:[O.create(),O.create(),O.create(),O.create(),O.create(),O.create()]}function I(){return[o.create(),o.create(),o.create(),o.create(),o.create(),o.create(),o.create(),o.create()]}function c(e,n){for(let t=0;t<B;t++)O.copy(e[t],n[t]);return e}function a(e,n,o,i=m){const r=t.multiply(R.sm4d.get(),n,e);t.invert(r,r);for(let t=0;t<G;++t){const e=_.transformMat4(R.sv4d.get(),H[t],r);T.set(i[t],e[0]/e[3],e[1]/e[3],e[2]/e[3])}A(o,i)}function A(n,t){O.fromPoints(t[e.PointIndex.FAR_BOTTOM_LEFT],t[e.PointIndex.NEAR_BOTTOM_LEFT],t[e.PointIndex.NEAR_TOP_LEFT],n[e.PlaneIndex.LEFT]),O.fromPoints(t[e.PointIndex.NEAR_BOTTOM_RIGHT],t[e.PointIndex.FAR_BOTTOM_RIGHT],t[e.PointIndex.FAR_TOP_RIGHT],n[e.PlaneIndex.RIGHT]),O.fromPoints(t[e.PointIndex.FAR_BOTTOM_LEFT],t[e.PointIndex.FAR_BOTTOM_RIGHT],t[e.PointIndex.NEAR_BOTTOM_RIGHT],n[e.PlaneIndex.BOTTOM]),O.fromPoints(t[e.PointIndex.NEAR_TOP_LEFT],t[e.PointIndex.NEAR_TOP_RIGHT],t[e.PointIndex.FAR_TOP_RIGHT],n[e.PlaneIndex.TOP]),O.fromPoints(t[e.PointIndex.NEAR_BOTTOM_LEFT],t[e.PointIndex.NEAR_BOTTOM_RIGHT],t[e.PointIndex.NEAR_TOP_RIGHT],n[e.PlaneIndex.NEAR]),O.fromPoints(t[e.PointIndex.FAR_BOTTOM_RIGHT],t[e.PointIndex.FAR_BOTTOM_LEFT],t[e.PointIndex.FAR_TOP_LEFT],n[e.PlaneIndex.FAR])}function d(e,n){for(let t=0;t<B;t++){const T=e[t];if(T[0]*n[0]+T[1]*n[1]+T[2]*n[2]+T[3]>=n[3])return!1}return!0}function E(e,n){return f(e,r.fromRay(n,L.get()))}function F(e,n){for(let t=0;t<B;t++){const T=e[t];if(!O.clipInfinite(T,n))return!1}return!0}function x(e,n,t){return f(e,r.fromLineSegmentAndDirection(n,t,L.get()))}function s(e,n){for(let t=0;t<B;t++){if(O.signedDistance(e[t],n)>0)return!1}return!0}function f(e,n){for(let t=0;t<B;t++)if(!O.clip(e[t],n))return!1;return!0}var l,u;e.PlaneIndex=void 0,(l=e.PlaneIndex||(e.PlaneIndex={}))[l.LEFT=0]="LEFT",l[l.RIGHT=1]="RIGHT",l[l.BOTTOM=2]="BOTTOM",l[l.TOP=3]="TOP",l[l.NEAR=4]="NEAR",l[l.FAR=5]="FAR",e.PointIndex=void 0,(u=e.PointIndex||(e.PointIndex={}))[u.NEAR_BOTTOM_LEFT=0]="NEAR_BOTTOM_LEFT",u[u.NEAR_BOTTOM_RIGHT=1]="NEAR_BOTTOM_RIGHT",u[u.NEAR_TOP_RIGHT=2]="NEAR_TOP_RIGHT",u[u.NEAR_TOP_LEFT=3]="NEAR_TOP_LEFT",u[u.FAR_BOTTOM_LEFT=4]="FAR_BOTTOM_LEFT",u[u.FAR_BOTTOM_RIGHT=5]="FAR_BOTTOM_RIGHT",u[u.FAR_TOP_RIGHT=6]="FAR_TOP_RIGHT",u[u.FAR_TOP_LEFT=7]="FAR_TOP_LEFT";const M={bottom:[e.PointIndex.FAR_BOTTOM_RIGHT,e.PointIndex.NEAR_BOTTOM_RIGHT,e.PointIndex.NEAR_BOTTOM_LEFT,e.PointIndex.FAR_BOTTOM_LEFT],near:[e.PointIndex.NEAR_BOTTOM_LEFT,e.PointIndex.NEAR_BOTTOM_RIGHT,e.PointIndex.NEAR_TOP_RIGHT,e.PointIndex.NEAR_TOP_LEFT],far:[e.PointIndex.FAR_BOTTOM_RIGHT,e.PointIndex.FAR_BOTTOM_LEFT,e.PointIndex.FAR_TOP_LEFT,e.PointIndex.FAR_TOP_RIGHT],right:[e.PointIndex.NEAR_BOTTOM_RIGHT,e.PointIndex.FAR_BOTTOM_RIGHT,e.PointIndex.FAR_TOP_RIGHT,e.PointIndex.NEAR_TOP_RIGHT],left:[e.PointIndex.FAR_BOTTOM_LEFT,e.PointIndex.NEAR_BOTTOM_LEFT,e.PointIndex.NEAR_TOP_LEFT,e.PointIndex.FAR_TOP_LEFT],top:[e.PointIndex.FAR_TOP_LEFT,e.PointIndex.NEAR_TOP_LEFT,e.PointIndex.NEAR_TOP_RIGHT,e.PointIndex.FAR_TOP_RIGHT]},B=6,G=8,H=[i.fromValues(-1,-1,-1,1),i.fromValues(1,-1,-1,1),i.fromValues(1,1,-1,1),i.fromValues(-1,1,-1,1),i.fromValues(-1,-1,1,1),i.fromValues(1,-1,1,1),i.fromValues(1,1,1,1),i.fromValues(-1,1,1,1)],L=new n.ObjectStack(r.create),m=I();e.computePlanes=A,e.copy=c,e.create=P,e.createPoints=I,e.fromMatrix=a,e.intersectClipRay=F,e.intersectsLineSegment=x,e.intersectsPoint=s,e.intersectsRay=E,e.intersectsSphere=d,e.numPlanes=B,e.numPoints=G,e.planePointIndices=M,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
