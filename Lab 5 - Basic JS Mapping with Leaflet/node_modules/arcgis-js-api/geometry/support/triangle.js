/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["exports","../../core/ObjectStack","../../chunks/vec32","../../core/libs/gl-matrix-2/factories/vec3f64","./lineSegment","./vectorStacks"],(function(t,e,c,r,n,s){"use strict";function o(t){return t?{p0:r.clone(t.p0),p1:r.clone(t.p1),p2:r.clone(t.p2)}:{p0:r.create(),p1:r.create(),p2:r.create()}}function a(t,e,c){const r=l.get();return r.p0=t,r.p1=e,r.p2=c,r}function u(t,e=o()){return i(t.p0,t.p1,t.p2,e)}function i(t,e,r,n=o()){return c.copy(n.p0,t),c.copy(n.p1,e),c.copy(n.p2,r),n}function p(t,e){const r=t.p0,o=t.p1,a=t.p2,u=c.subtract(s.sv3d.get(),o,r),i=c.subtract(s.sv3d.get(),a,o),p=c.subtract(s.sv3d.get(),r,a),d=c.subtract(s.sv3d.get(),e,r),f=c.subtract(s.sv3d.get(),e,o),g=c.subtract(s.sv3d.get(),e,a),l=c.cross(u,u,p),v=c.dot(c.cross(s.sv3d.get(),u,l),d),m=c.dot(c.cross(s.sv3d.get(),i,l),f),y=c.dot(c.cross(s.sv3d.get(),p,l),g);if(v>0&&m>0&&y>0){const t=c.dot(l,d);return t*t/c.dot(l,l)}const S=n.distance2(n.fromValues(r,u,b.get()),e),k=n.distance2(n.fromValues(o,i,b.get()),e),h=n.distance2(n.fromValues(a,p,b.get()),e);return Math.min(S,k,h)}function d(t,e,r){const n=1e-5,{direction:s,origin:o}=e,{p0:a,p1:u,p2:i}=t,p=u[0]-a[0],d=u[1]-a[1],f=u[2]-a[2],g=i[0]-a[0],b=i[1]-a[1],l=i[2]-a[2],v=s[1]*l-b*s[2],m=s[2]*g-l*s[0],y=s[0]*b-g*s[1],S=p*v+d*m+f*y;if(S>-n&&S<n)return!1;const k=1/S,h=o[0]-a[0],j=o[1]-a[1],O=o[2]-a[2],V=k*(h*v+j*m+O*y);if(V<0||V>1)return!1;const w=j*f-d*O,M=O*p-f*h,P=h*d-p*j,x=k*(s[0]*w+s[1]*M+s[2]*P);if(x<0||V+x>1)return!1;if(r){const t=k*(g*w+b*M+l*P);c.scale(r,s,t),c.add(r,o,r)}return!0}function f(t,e,c){const r=e[0]-t[0],n=e[1]-t[1],s=c[0]-t[0],o=c[1]-t[1];return.5*Math.abs(r*o-n*s)}function g(t,e,r){return c.subtract(v,e,t),c.subtract(m,r,t),.5*c.length(c.cross(v,v,m))}const b=new e.ObjectStack(n.create),l=new e.ObjectStack((()=>o())),v=r.create(),m=r.create();t.areaPoints2d=f,t.areaPoints3d=g,t.copy=u,t.create=o,t.distance2=p,t.fromValues=i,t.intersectRay=d,t.wrap=a,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
