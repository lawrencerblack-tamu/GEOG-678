/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["../../../chunks/tslib.es6","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/Logger","../../../core/RandomLCG","../../../core/accessorSupport/decorators/subclass","../../Slider","./SliderWithDropdownViewModel","../../support/TimezonePicker","../../support/widgetUtils","../../support/jsxFactory"],(function(e,o,t,r,s,i,n,l,d,p,h){"use strict";const a="esri-slider-with-dropdown",c={label:"esri-slider__label",box:`${a}__box`,boxDropDownOn:`${a}__box--drop-down-on`,boxDropDownOff:`${a}__box--drop-down-off`};let b=class extends n{constructor(e,o){super(e,o),this.viewModel=new l.SliderWithDropdownViewModel,this.showDropDown=!0,this._labelWidth=0,this._onLabelAfterCreate=e=>{const o="label-size-observer";this.removeHandles(o),this.addHandles(p.onResize(e,(({contentRect:e})=>{this._labelWidth=e.width})),o)},this._getLabelStyles=()=>{if(!this.trackElement)return;const e=this._trackWidth,o=this._labelWidth/2,t=this.getCurrentPosition(),r=t-o,s=t+o;let i=-o;return r<0?i+=-r:s>e&&(i+=e-s),{left:`${i}px`}},this._onTimezoneChange=e=>{this.viewModel.utcOffset=e},this._onTimezonePickerOpen=()=>{this.viewModel.timezonePickerOpen=!0},this._onTimezonePickerClose=()=>{this.viewModel.timezonePickerOpen=!1}}renderThumbLabel(e){const{showDropDown:o,viewModel:t}=this;return h.tsx("div",{afterCreate:this._onLabelAfterCreate,class:this.classes({[c.box]:!0,[c.label]:!0,[c.boxDropDownOn]:o,[c.boxDropDownOff]:!o}),key:"thumb-label",styles:this._getLabelStyles()},super.renderThumbLabel(e),o?h.tsx(d.TimezonePicker,{open:t.timezonePickerOpen,value:t.utcOffset,onChange:this._onTimezoneChange,onClose:this._onTimezonePickerClose,onOpen:this._onTimezonePickerOpen}):null)}};e.__decorate([o.property()],b.prototype,"viewModel",void 0),e.__decorate([o.property()],b.prototype,"showDropDown",void 0),e.__decorate([o.property()],b.prototype,"_labelWidth",void 0),b=e.__decorate([i.subclass("esri.widgets.Daylight.support.SliderWithDropdown")],b);return b}));
