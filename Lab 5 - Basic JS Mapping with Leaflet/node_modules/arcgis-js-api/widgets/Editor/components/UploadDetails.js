/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["require","exports","../../../layers/graphics/sources/support/uploadAssetErrors","./FooterActions","./PanelContent","../../../chunks/componentsUtils","../../support/widgetUtils","../../support/jsxFactory"],(function(e,t,s,o,l,i,n,r){"use strict";const a="esri-editor__upload-details",c={base:a,status:`${a}__status`,titleWrapper:`${a}__title-wrapper`,title:`${a}__title`,description:`${a}__description`,loader:`${a}__loader`,iconSuccess:`${a}__icon ${a}__icon--success`,iconError:`${a}__icon ${a}__icon--error`,fileList:`${a}__file-list`,file:`${a}__file`,fileIcon:`${a}__file-icon`,fileName:`${a}__file-name`},d=()=>Promise.all([i.loadCalciteComponents({icon:()=>new Promise(((t,s)=>e(["../../../chunks/calcite-icon"],t,s))),loader:()=>new Promise(((t,s)=>e(["../../../chunks/calcite-loader"],t,s)))}),o.loadFooterActionsComponents(),l.loadPanelContentComponents()]);function p(e){const{messages:t,key:s,upload:i}=e;return r.tsx(r.tsxFragment,null,r.tsx(l.PanelContent,{key:s??"upload-details"},r.tsx(l.PanelContentSection,null,u(e))),"error"===i.state?r.tsx(o.FooterActions,{buttons:[{onClick:()=>i.retry(),label:t.modelUploads.error.uploadNew,iconStart:"upload-to"}],key:"upload-details-footer-actions"}):null)}function u(e){const t=f(e);return t?r.tsx("div",{class:c.base,"data-testid":"upload-details",key:"upload-details-content"},r.tsx("div",{class:c.status,key:"status"},t.iconContent,r.tsx("div",{class:c.titleWrapper,key:"text"},r.tsx("div",{class:c.title,key:"title"},t.title),r.tsx("div",{class:c.description,key:"description"},t.description))),_(e.upload)):null}function f({helpMessage:e,messages:t,upload:s}){switch(s.state){case"pending":{const{title:e,description:o}=t.modelUploads.pending;return{title:e,description:o,iconContent:r.tsx("calcite-loader",{"aria-hidden":"true",class:c.loader,label:"",scale:"s",type:"determinate",value:Math.min(Math.round(100*s.progress),1===s.progress?100:99)})}}case"success":{const{title:s}=t.modelUploads.success;return{title:s,description:e||t.helpMessages3d.mesh,iconContent:r.tsx("calcite-icon",{class:n.classes(c.iconSuccess),icon:"check",scale:"l"})}}case"error":{const{title:e}=t.modelUploads.error;return{title:e,description:m(s.error,t),iconContent:r.tsx("calcite-icon",{class:n.classes(c.iconError),icon:"exclamation-mark-circle",scale:"l"})}}default:return null}}function m(e,t){if(!e)return null;const o=t.modelUploads.error.messages;switch(e.constructor){case s.NoModelError:return o.noModel;case s.MultipleModelsError:return o.multipleModels;case s.Convert3DFailedError:return o.conversionFailed;default:return o.default}}function _(e){return r.tsx("div",{class:c.fileList,key:"file-list"},e.files.map((e=>r.tsx("div",{class:c.file,key:`file-${e.name}`},r.tsx("calcite-icon",{class:c.fileIcon,icon:x(e),scale:"s"}),r.tsx("span",{class:c.fileName},g(e.name))))))}function g(e){return e.split("/").pop()?.split("\\").pop()??""}function x(e){const t=e.name.split(".").pop()?.toLowerCase();return(t?h[t]:null)??k}const k="file",y="file-shape",C="file-image",h={glb:y,gltf:y,jpeg:C,jpg:C,png:C,svg:C,zip:"file-zip"};t.UploadDetails=p,t.css=c,t.loadUploadDetailsComponents=d,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
