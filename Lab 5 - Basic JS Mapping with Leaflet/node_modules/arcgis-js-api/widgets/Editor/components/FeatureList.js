/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["exports","../../../core/arrayUtils","../../../layers/support/fieldUtils","./PanelContent","../../FeatureTemplates/ItemList","../../support/widgetUtils","../../support/jsxFactory"],(function(e,t,a,l,n,o,s){"use strict";const r=()=>l.loadPanelContentComponents();function i({editorItems:e,filterText:a,id:o,messagesTemplates:r,onFilterTextChange:i,onSelectFeature:u,workflow:c}){const m=new Map,f=c.data.candidates;let p=0;f.map((e=>({label:d(e),id:e.attributes[e.layer.objectIdField],data:e}))).filter((({label:t,data:l})=>{const n=a.toLowerCase(),{title:o}=l.layer,s=e.find((e=>e.layer===l.sourceLayer));return s?s.supportsUpdateWorkflow&&(!n||t?.toLowerCase().includes(n)||o?.toLowerCase().includes(n)):null})).filter(t.isSome).forEach((e=>{p++;const t=e.data.layer;m.has(t)?m.get(t)?.items.push(e):m.set(t,{id:`${t.id}`,label:t.title??"",items:[e]})}));const y=e.toArray().map((({layer:e})=>m.get(e))).filter(t.isSome),g=p>10||a.length>0;return s.tsx(l.PanelContent,{key:"feature-list"},s.tsx(l.PanelContentSection,null,n.ItemList({enableListScroll:!1,filterEnabled:g,filterText:a,id:o,items:y,messages:{filterPlaceholder:r.filterPlaceholder,noItems:r.noItems,noMatches:r.noMatches},onFilterChange:e=>i(e),onItemMouseEnter:e=>u(e.data),onItemMouseLeave:()=>u(null),onItemSelect:e=>u(e.data,!0)})))}function d(e){const t=e.layer;if(!t)return null;const l=t.fieldsIndex.get(t.objectIdField),n=l.alias||l.name,{attributes:o}=e,s=a.getDisplayFieldName(t);return s&&o[s]&&`${o[s]}`||`${n}: ${o[l.name]}`}e.FeatureList=i,e.loadFeatureListComponents=r,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
