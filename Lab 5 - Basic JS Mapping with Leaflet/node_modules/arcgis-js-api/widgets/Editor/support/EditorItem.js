/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["../../../chunks/tslib.es6","../../../core/Accessor","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/Logger","../../../core/RandomLCG","../../../core/accessorSupport/decorators/subclass","../../../layers/support/layerUtils","./EditorEditingCapabilities","../../FeatureForm/featureFormUtils"],(function(e,t,r,o,a,s,l,p,i,d){"use strict";let n=class extends t{constructor(e){super(e),this.disabled=!1,this.layer=null,this.layerInfo=null,this.layerView=null}get _suspended(){return!!this.layerView?.suspended}get capabilities(){return new i({layer:this.layer,layerInfo:this.layerInfo,layerView:this.layerView})}get editable(){const{create:e,relationship:t,update:r,delete:{enabled:o}}=this.capabilities,a=e.attachments.enabled||r.attachments.enabled;return!this.disabled&&(e.enabled||r.enabled||a||o||t.enabled)}get formTemplate(){return this.capabilities.formTemplate}get hasInvalidFormTemplate(){return d.formTemplateHasInvalidFields(this.layer,this.formTemplate)}get isTable(){return p.isTable(this.layer)}get supportsCreateFeaturesWorkflow(){if(this.disabled)return!1;const{enabled:e,geometry:t}=this.capabilities.create;return this.isTable?e:e&&t}get supportsUpdateWorkflow(){const{capabilities:e}=this;return!this.disabled&&(e.update.enabled||e.update.attachments.enabled||e.delete.enabled)}get visible(){const{layer:e}=this,t=e.parent;return!this._suspended&&e.visible&&(!t||!("visible"in t)||t.visible)}};e.__decorate([r.property()],n.prototype,"_suspended",null),e.__decorate([r.property()],n.prototype,"capabilities",null),e.__decorate([r.property()],n.prototype,"disabled",void 0),e.__decorate([r.property()],n.prototype,"editable",null),e.__decorate([r.property()],n.prototype,"formTemplate",null),e.__decorate([r.property()],n.prototype,"hasInvalidFormTemplate",null),e.__decorate([r.property()],n.prototype,"isTable",null),e.__decorate([r.property()],n.prototype,"layer",void 0),e.__decorate([r.property()],n.prototype,"layerInfo",void 0),e.__decorate([r.property()],n.prototype,"layerView",void 0),e.__decorate([r.property()],n.prototype,"supportsCreateFeaturesWorkflow",null),e.__decorate([r.property()],n.prototype,"supportsUpdateWorkflow",null),e.__decorate([r.property()],n.prototype,"visible",null),n=e.__decorate([l.subclass("esri.widgets.editor.support.EditorItem")],n);return n}));
