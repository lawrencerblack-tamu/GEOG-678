/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["../../chunks/tslib.es6","../../Color","../../core/accessorSupport/decorators/property","../../core/accessorSupport/decorators/cast","../../core/RandomLCG","../../core/has","../../core/accessorSupport/decorators/subclass","./SmartMappingSliderBase","./OpacitySlider/OpacitySliderViewModel","../support/globalCss","../support/legacyIcon","../support/widgetUtils","../support/decorators/messageBundle","../support/jsxFactory"],(function(e,t,s,r,i,a,o,l,n,p,d,c,g,m){"use strict";var u;const h="esri-opacity-slider",b={base:h,widgetIcon:d.legacyIcon.edit,rampElement:`${h}__ramp`,sliderContainer:`${h}__slider-container`,histogramContainer:`${h}__histogram-container`,track:`${h}--interactive-track`},y={trackFillColor:new t([0,121,193])};let v=u=class extends l.SmartMappingSliderBase{constructor(e,t){super(e,t),this.messages=null,this.style={...y},this.viewModel=new n,this._rampFillId=`${this.id}-ramp-fill`,this._bgFillId=`${this.id}-bg-fill`}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get stops(){return this.viewModel.stops}set stops(e){this.viewModel.stops=e}castStyle(e){return{...y,...e}}static fromVisualVariableResult(e,t){const{visualVariable:{stops:s},statistics:r}=e,{avg:i,max:a,min:o,stddev:l}=r;return new u({max:a,min:o,stops:s,histogramConfig:{average:i,standardDeviation:l,bins:t?t.bins:[]}})}updateFromVisualVariableResult(e,t){const{visualVariable:{stops:s},statistics:r}=e,{avg:i,max:a,min:o,stddev:l}=r;this.set({max:a,min:o,stops:s,histogramConfig:{average:i,standardDeviation:l,bins:t?t.bins:[]}})}render(){const{state:e,label:t,visibleElements:s}=this,r="disabled"===e,i=this.classes(b.base,p.globalCss.widget,p.globalCss.panel,{[p.globalCss.disabled]:r,[b.track]:!!s.interactiveTrack});return m.tsx("div",{"aria-label":t,class:i},r?null:this.renderContent(this._renderRamp(),b.sliderContainer,b.histogramContainer))}_renderRamp(){const{_bgFillId:e,_rampFillId:t,style:{trackFillColor:s},viewModel:r,zoomOptions:i}=this,a=r.getStopInfo(s);return m.tsx("div",{class:b.rampElement},m.tsx("svg",{xmlns:"http://www.w3.org/2000/svg"},m.tsx("defs",null,this.renderRampFillDefinition(t,a),this.renderBackgroundFillDefinition(e)),m.tsx("rect",{fill:`url(#${e})`,height:"100%",width:"100%",x:"0",y:"0"}),m.tsx("rect",{fill:`url(#${t})`,height:"100%",width:"100%",x:"0",y:"0"})),i?this.renderZoomCaps():null)}};e.__decorate([s.property()],v.prototype,"label",null),e.__decorate([s.property(),g.messageBundle("esri/widgets/smartMapping/OpacitySlider/t9n/OpacitySlider")],v.prototype,"messages",void 0),e.__decorate([s.property()],v.prototype,"stops",null),e.__decorate([s.property()],v.prototype,"style",void 0),e.__decorate([r.cast("style")],v.prototype,"castStyle",null),e.__decorate([s.property()],v.prototype,"viewModel",void 0),v=u=e.__decorate([o.subclass("esri.widgets.smartMapping.OpacitySlider")],v);return v}));
