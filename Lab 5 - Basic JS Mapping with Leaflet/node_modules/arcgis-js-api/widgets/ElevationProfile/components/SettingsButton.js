/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["require","exports","../../../chunks/tslib.es6","../../../core/reactiveUtils","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/Logger","../../../core/RandomLCG","../../../core/accessorSupport/decorators/subclass","../../Widget","../css","../../../chunks/componentsUtils","../../support/UnitSelect","../../support/widgetUtils","../../support/jsxFactory"],(function(e,t,o,n,i,s,r,a,c,l,p,g,h,u,d){"use strict";t.SettingsButton=class extends l{constructor(){super(...arguments),this.messages=null,this._popover=null,this._popoverIsOpen=!1,this._onPopoverAfterCreate=e=>{this._popover=e},this._onUniformChartScalingChange=e=>{this.onUniformChartScalingChange(e.target.checked)}}loadDependencies(){return g.loadCalciteComponents({action:()=>new Promise(((t,o)=>e(["../../../chunks/calcite-action"],t,o))),checkbox:()=>new Promise(((t,o)=>e(["../../../chunks/calcite-checkbox"],t,o))),label:()=>new Promise(((t,o)=>e(["../../../chunks/calcite-label"],t,o))),popover:()=>new Promise(((t,o)=>e(["../../../chunks/calcite-popover"],t,o))),tooltip:()=>new Promise(((t,o)=>e(["../../../chunks/calcite-tooltip"],t,o)))})}initialize(){const e=()=>this._popover;this.addHandles([n.on(e,"calcitePopoverOpen",(()=>this._popoverIsOpen=!0)),n.on(e,"calcitePopoverClose",(()=>this._popoverIsOpen=!1))])}render(){const{id:e,messages:t,visibleElements:o}=this,{unitSelector:n,uniformChartScalingToggle:i}=o;if(!t||!n&&!i)return d.tsx("div",{key:`${e}-empty`});const s=`${e}__action`,r=this._popoverIsOpen?t.hideSettings:t.showSettings;return d.tsx("div",{class:p.settingsCss.base,key:this},d.tsx("calcite-popover",{afterCreate:this._onPopoverAfterCreate,autoClose:!0,label:r,overlayPositioning:"fixed",placement:"bottom-end",referenceElement:s},this._renderPopoverContent()),d.tsx("calcite-action",{appearance:"transparent","data-testid":"settings-button",icon:"gear",id:s,label:r,scale:"s",text:r}))}_renderPopoverContent(){const{unitSelector:e,uniformChartScalingToggle:t}=this.visibleElements;return d.tsx("div",{class:p.settingsCss.popoverContent},e?this._renderUnitSelector():null,t?this._renderUniformChartScalingToggle():null)}_renderUnitSelector(){const{messages:e}=this;return d.tsx(h.UnitSelect,{key:"unit-selector-label",options:this.unitOptions,selectLabel:e?.unitSelectLabel??"",value:this.unit,onChange:this.onUnitChange})}_renderUniformChartScalingToggle(){const{messages:e}=this,t=this.uniformChartScaling,o=`${this.id}__uniform-chart-scaling-toggle`,n=e?.[t?"uniformChartScalingDisable":"uniformChartScalingEnable"]??"";return d.tsx("calcite-label",{class:p.settingsCss.uniformChartScalingLabel,key:"uniform-chart-scaling-label",layout:"inline"},d.tsx("calcite-checkbox",{checked:t,class:p.settingsCss.uniformChartScalingCheckbox,id:o,onCalciteCheckboxChange:this._onUniformChartScalingChange}),d.tsx("calcite-tooltip",{overlayPositioning:"fixed",referenceElement:o},n),e?.uniformChartScalingLabel)}},o.__decorate([i.property()],t.SettingsButton.prototype,"messages",void 0),o.__decorate([i.property()],t.SettingsButton.prototype,"onUniformChartScalingChange",void 0),o.__decorate([i.property()],t.SettingsButton.prototype,"onUnitChange",void 0),o.__decorate([i.property()],t.SettingsButton.prototype,"uniformChartScaling",void 0),o.__decorate([i.property()],t.SettingsButton.prototype,"unit",void 0),o.__decorate([i.property()],t.SettingsButton.prototype,"unitOptions",void 0),o.__decorate([i.property()],t.SettingsButton.prototype,"visibleElements",void 0),o.__decorate([i.property()],t.SettingsButton.prototype,"_popover",void 0),o.__decorate([i.property()],t.SettingsButton.prototype,"_popoverIsOpen",void 0),t.SettingsButton=o.__decorate([c.subclass("esri.widgets.ElevationProfile.components.SettingsButton")],t.SettingsButton),Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
