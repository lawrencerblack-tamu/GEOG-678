/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["require","../chunks/tslib.es6","../core/Collection","../core/lang","../core/Logger","../core/reactiveUtils","../core/urlUtils","../core/accessorSupport/decorators/property","../core/has","../core/accessorSupport/decorators/subclass","../rest/utils","../rest/support/fileFormat","./Widget","./Print/FileLink","./Print/PrintViewModel","./Print/TemplateOptions","../chunks/componentsUtils","./support/globalCss","./support/Heading","./support/legacyIcon","./support/widgetUtils","./support/decorators/messageBundle","./support/jsxFactory"],(function(t,e,a,i,s,n,o,l,r,p,d,c,u,h,m,b,_,y,g,x,v,f,w){"use strict";const O=a.ofType(h),T="MAP_ONLY";var C;!function(t){t.layout="layoutTab",t.mapOnly="mapOnlyTab"}(C||(C={}));const I="esri-print",S=`${I}__advanced-options-button`,k={base:I,widgetIcon:x.legacyIcon.printer,headerTitle:`${I}__header-title`,inputText:`${I}__input-text`,layoutTabList:`${I}__layout-tab-list`,layoutTab:`${I}__layout-tab`,layoutSection:`${I}__layout-section`,mapOnlySection:`${I}__map-only-section`,scaleInput:`${I}__scale-input`,loader:`${I}__loader`,advancedOptionsButton:S,advancedOptionsButtonContainer:`${S}-container`,advancedOptionsButtonTitle:`${S}-title`,advancedOptionsButtonIconOpened:`${S}-icon--opened`,advancedOptionsButtonIconClosed:`${S}-icon--closed`,advancedOptionsButtonIconClosed_RTL:`${S}-icon--closed-rtl`,refreshButton:`${I}__refresh-button`,swapButton:`${I}__swap-button`,printButton:`${I}__export-button`,formSectionContainer:`${I}__form-section-container`,advancedOptionsSection:`${I}__advanced-options-section`,advancedOptionsContainer:`${I}__advanced-options-container`,authorInfoContainer:`${I}__author-info-container`,copyrightInfoContainer:`${I}__copyright-info-container`,exportedFilesContainer:`${I}__export-panel-container`,exportedFilesTitle:`${I}__export-title`,exportedFile:`${I}__exported-file`,exportedFileLink:`${I}__exported-file-link`,exportedFileLinkTitle:`${I}__exported-file-link-title`,heightContainer:`${I}__height-container`,legendInfoContainer:`${I}__legend-info-container`,printWidgetContainer:`${I}__container`,panelContainer:`${I}__panel-container`,scaleInfoContainer:`${I}__scale-info-container`,scaleInputContainer:`${I}__scale-input-container`,sizeContainer:`${I}__size-container`,widthContainer:`${I}__width-container`,panelError:`${I}__panel--error`,exportedFileError:`${I}__exported-file--error`};function L(t){const e=8.3333,a=11.4583;return{width:Math.round(t*e),height:Math.round(t*a)}}function M(t){return!isNaN(t)&&t>0}function $(t){return t?.toUpperCase()===T}let F=class extends u{constructor(t,e){super(t,e),this._activeTabFocusRequested=!1,this._advancedOptionsVisibleForLayout=!1,this._advancedOptionsVisibleForMapOnly=!1,this._awaitingServerResponse=!1,this._exportedFileNameMap={},this._layoutTabSelected=!0,this._pendingExportScroll=!1,this._rootNode=null,this.exportedLinks=new O,this.headingLevel=3,this.iconClass=k.widgetIcon,this.icon=null,this.templateOptions=new b,this.viewModel=new m,this._onInput=t=>{this._layoutTabSelected?this.templateOptions.title=t.target.value:this.templateOptions.fileName=t.target.value},this._removeLink=t=>{const e=t.currentTarget["data-item"];e&&"error"===e.state&&this.exportedLinks.remove(e)},this._handleLinkClick=t=>{const e=t.currentTarget,{href:a}=e,i=d.getToken(this.viewModel.effectivePrintServiceUrl);if(!i)return;if(!t.isTrusted)return void t.stopPropagation();t.preventDefault();const s=new URL(a);s.searchParams.set("token",i),e.href=s.href,e.click(),e.href=a},this._focusOnTabChange=this._focusOnTabChange.bind(this)}initialize(){this.addHandles([n.watch((()=>[this.templateOptions.format,this.viewModel.templatesInfo?.format.defaultValue]),(([t,e])=>{if(e&&!t)return void(this.templateOptions.format=e);if(!t||!e||!this.viewModel.templatesInfo)return;if(this.viewModel.templatesInfo.format.choiceList.includes(t))return;const a=this.viewModel.templatesInfo.format.choiceList.find((e=>e.toUpperCase().includes(`(${t.toUpperCase()})`)));this.templateOptions.format=a??e})),n.watch((()=>[this.templateOptions.layout,this.viewModel.templatesInfo?.layout.defaultValue]),(([t,e])=>{if(e&&!t)return void(this.templateOptions.layout=e);if(!t||!e||!this.viewModel.templatesInfo)return;if(this._layoutTabSelected=!$(t),!this._layoutTabSelected)return;this.viewModel.templatesInfo.layout.choiceList.includes(t)||(this.templateOptions.layout=e);const a=this.viewModel.effectiveTemplateCustomTextElements[this.templateOptions.layout];this.templateOptions.customTextElements=a?i.clone(a):null})),n.watch((()=>this.templateOptions.dpi),(t=>{t<=0&&(this.templateOptions.dpi=1)})),n.watch((()=>this.viewModel.view?.scale),(t=>{!t||this.templateOptions.scaleEnabled&&this.templateOptions.scale||(this.templateOptions.scale=t)}))]);const{height:t,width:e}=this.templateOptions;this.templateOptions.width=e||800,this.templateOptions.height=t||1100;const a=setTimeout((()=>{this._awaitingServerResponse=!0,this.scheduleRender()}),500);this.viewModel.load().then((()=>{clearTimeout(a),this._awaitingServerResponse=!1}))}loadDependencies(){return _.loadCalciteComponents({combobox:()=>new Promise(((e,a)=>t(["../chunks/calcite-combobox"],e,a))),"combobox-item":()=>new Promise(((e,a)=>t(["../chunks/calcite-combobox-item"],e,a))),input:()=>new Promise(((e,a)=>t(["../chunks/calcite-input"],e,a))),label:()=>new Promise(((e,a)=>t(["../chunks/calcite-label"],e,a)))})}get allowedFormats(){return this.viewModel.allowedFormats}set allowedFormats(t){this.viewModel.allowedFormats=t}get allowedLayouts(){return this.viewModel.allowedLayouts}set allowedLayouts(t){this.viewModel.allowedLayouts=t}get error(){return this.viewModel.error}get extraParameters(){return this.viewModel.extraParameters}set extraParameters(t){this.viewModel.extraParameters=t}get includeDefaultTemplates(){return this.viewModel.includeDefaultTemplates}set includeDefaultTemplates(t){this.viewModel.includeDefaultTemplates=t}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}get portal(){return this.viewModel.portal}set portal(t){this.viewModel.portal=t}get printServiceUrl(){return this.viewModel.printServiceUrl}set printServiceUrl(t){this.viewModel.printServiceUrl=t}get templateCustomTextElements(){return this.viewModel.templateCustomTextElements}set templateCustomTextElements(t){this.viewModel.templateCustomTextElements=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const{includeDefaultTemplates:t,messages:e,templateOptions:a,viewModel:i,view:s}=this,{attributionEnabled:n,author:o,copyright:l,dpi:r,format:p,height:d,layout:u,layoutItem:h,legendEnabled:m,northArrowEnabled:b,scaleEnabled:_,scale:v,width:f}=a,O="ready"!==i.state||this._awaitingServerResponse,T=this._renderTitleOrFileNameSection(),I=w.tsx("div",{class:k.formSectionContainer},w.tsx("calcite-label",null,e.fileFormatTitle,w.tsx("calcite-combobox",{clearDisabled:!0,label:e.formatDefaultOption,maxItems:6,placeholder:e.formatDefaultOption,selectionMode:"single-persist",onCalciteComboboxChange:({target:t})=>{this.templateOptions.format=t.selectedItems[0].value}},i.templatesInfo?.format?.choiceList.sort().map(((t,e)=>w.tsx("calcite-combobox-item",{key:`file-format-${e}`,selected:t===this.templateOptions.format,textLabel:c.toJSON(t),value:t})))))),S=i.defaultTemplates.length&&t?i.defaultTemplates.toArray().filter((({label:t})=>!$(t))).sort(((t,e)=>(t.label??"")>(e.label??"")?1:-1)).map(((t,a)=>w.tsx("calcite-combobox-item",{"data-item-id":t.layoutItem?.id,key:`organization-template-${a}`,textLabel:t.label??e.untitled,title:t.description??"",value:t.layout}))):null,L=!i.templatesInfo?.layout?.choiceList.length||t&&i.defaultTemplates.length?null:i.templatesInfo.layout.choiceList.map((t=>({label:e[t]??t.replaceAll("_"," "),value:t}))).sort(((t,e)=>t.label>e.label?1:0)).map((({label:t,value:e},a)=>w.tsx("calcite-combobox-item",{key:`service-template-${a}`,selected:e===this.templateOptions.layout,textLabel:t,value:e}))),M=w.tsx("div",{class:k.formSectionContainer},w.tsx("calcite-label",null,e.template,w.tsx("calcite-combobox",{clearDisabled:!0,label:e.selectTemplate,maxItems:6,placeholder:e.selectTemplate,selectionMode:"single",onCalciteComboboxChange:({target:t})=>{const e=t.selectedItems[0],a=e.getAttribute("data-item-id");if(a){const t=this.viewModel.defaultTemplates.find((({layoutItem:t})=>a===t?.id));this._applyTemplate(t)}else this._applyTemplate(e.value)}},S,L))),F=w.tsx("div",{class:k.formSectionContainer},w.tsx("label",null,e.dpi,w.tsx("input",{bind:this,class:this.classes(k.inputText,y.globalCss.input),"data-input-name":"dpi",min:"1",onchange:this._handleDPIChange,tabIndex:0,type:"number",value:`${r}`}))),E=w.tsx("div",{class:this.classes(k.scaleInfoContainer,k.formSectionContainer)},w.tsx("label",null,w.tsx("input",{bind:this,checked:_,"data-option-name":"scaleEnabled",onchange:this._toggleInputValue,tabIndex:0,type:"checkbox"}),e.scale),w.tsx("div",{class:k.scaleInputContainer},w.tsx("input",{"aria-label":e.scaleLabel,"aria-valuenow":`${v}`,bind:this,class:this.classes(k.inputText,y.globalCss.input,k.scaleInput),"data-input-name":"scale",disabled:!_,onchange:this._updateInputValue,role:"spinbutton",tabIndex:0,type:"number",value:`${v}`}),w.tsx("button",{"aria-label":e.reset,bind:this,class:this.classes(y.globalCss.widgetButton,k.refreshButton,x.legacyIcon.refresh),onclick:this._resetToCurrentScale,tabIndex:0,type:"button"}))),A=this._advancedOptionsVisibleForLayout?w.tsx("div",{"aria-labelledby":`${this.id}__advancedOptionsForLayout`,class:k.advancedOptionsContainer},E,w.tsx("div",{class:this.classes(k.authorInfoContainer,k.formSectionContainer)},w.tsx("label",null,e.author,w.tsx("input",{bind:this,class:this.classes(k.inputText,y.globalCss.input),"data-input-name":"author",onchange:this._updateInputValue,tabIndex:0,type:"text",value:o??""}))),w.tsx("div",{class:this.classes(k.copyrightInfoContainer,k.formSectionContainer)},w.tsx("label",null,e.copyright,w.tsx("input",{bind:this,class:this.classes(k.inputText,y.globalCss.input),"data-input-name":"copyright",onchange:this._updateInputValue,tabIndex:0,type:"text",value:l??""}))),F,w.tsx("div",{class:this.classes(k.legendInfoContainer,k.formSectionContainer)},w.tsx("label",null,w.tsx("input",{bind:this,checked:m,"data-option-name":"legendEnabled",onchange:this._toggleInputValue,tabIndex:0,type:"checkbox"}),e.legend)),this.viewModel.templateToNorthArrowInfo[h?.id??u]?w.tsx("div",{class:this.classes(k.legendInfoContainer,k.formSectionContainer),key:"north-arrow"},w.tsx("label",null,w.tsx("input",{bind:this,checked:b,"data-option-name":"northArrowEnabled",onchange:this._toggleInputValue,tabIndex:0,type:"checkbox"}),e.northArrow)):null,this._renderCustomTextElementSection()):null,P=this._advancedOptionsVisibleForMapOnly?w.tsx("div",{"aria-labelledby":`${this.id}__advancedOptionsForMapOnly`,class:k.advancedOptionsContainer},E,F,w.tsx("div",{class:k.formSectionContainer},w.tsx("label",null,w.tsx("input",{bind:this,checked:n,"data-option-name":"attributionEnabled",onchange:this._toggleInputValue,tabIndex:0,type:"checkbox"}),e.attribution)),this._renderCustomTextElementSection()):null,V=this._layoutTabSelected?w.tsx("section",{"aria-labelledby":`${this.id}__layoutTab`,class:k.layoutSection,id:`${this.id}__layoutContent`,key:"esri-print__layoutContent",role:"tabpanel"},w.tsx("div",{class:k.panelContainer},T,M,this._layoutTabSelected?I:null),w.tsx("div",{class:this.classes(k.panelContainer,k.advancedOptionsSection)},w.tsx("button",{"aria-expanded":this._advancedOptionsVisibleForLayout?"true":"false","aria-label":e.advancedOptions,bind:this,class:k.advancedOptionsButton,onclick:this._showAdvancedOptions,type:"button"},w.tsx("div",{class:k.advancedOptionsButtonContainer},w.tsx("span",{"aria-hidden":"true",class:this.classes(x.legacyIcon.rightTriangleArrow,k.advancedOptionsButtonIconClosed)}),w.tsx("span",{"aria-hidden":"true",class:this.classes(x.legacyIcon.leftTriangleArrow,k.advancedOptionsButtonIconClosed_RTL)}),w.tsx("span",{"aria-hidden":"true",class:this.classes(x.legacyIcon.downArrow,k.advancedOptionsButtonIconOpened)}),w.tsx("span",{class:k.advancedOptionsButtonTitle},e.advancedOptions))),A)):w.tsx("section",{"aria-labelledby":`${this.id}__mapOnlyTab`,class:k.mapOnlySection,id:`${this.id}__mapOnlyContent`,key:"esri-print__mapOnlyContent",role:"tabpanel"},w.tsx("div",{class:k.panelContainer},T,this._layoutTabSelected?null:I,w.tsx("div",{class:this.classes(k.sizeContainer,k.formSectionContainer)},w.tsx("div",{class:k.widthContainer},w.tsx("label",null,e.width,w.tsx("input",{bind:this,class:this.classes(k.inputText,y.globalCss.input),"data-input-name":"width",onchange:this._updateInputValue,tabIndex:0,type:"number",value:`${f}`}))),w.tsx("div",{class:k.heightContainer},w.tsx("label",null,e.height,w.tsx("input",{bind:this,class:this.classes(k.inputText,y.globalCss.input),"data-input-name":"height",onchange:this._updateInputValue,tabIndex:0,type:"number",value:`${d}`}))),w.tsx("button",{"aria-label":e.swap,bind:this,class:this.classes(y.globalCss.widgetButton,k.swapButton,x.legacyIcon.swap),onclick:this._switchInput,tabIndex:0,type:"button"})),w.tsx("div",{class:this.classes(k.panelContainer,k.advancedOptionsSection)},w.tsx("button",{"aria-expanded":this._advancedOptionsVisibleForMapOnly?"true":"false","aria-label":e.advancedOptions,bind:this,class:k.advancedOptionsButton,onclick:this._showAdvancedOptions,type:"button"},w.tsx("div",{class:k.advancedOptionsButtonContainer},w.tsx("span",{"aria-hidden":"true",class:this.classes(x.legacyIcon.rightTriangleArrow,k.advancedOptionsButtonIconClosed)}),w.tsx("span",{"aria-hidden":"true",class:this.classes(x.legacyIcon.leftTriangleArrow,k.advancedOptionsButtonIconClosed_RTL)}),w.tsx("span",{"aria-hidden":"true",class:this.classes(x.legacyIcon.downArrow,k.advancedOptionsButtonIconOpened)}),w.tsx("span",{class:k.advancedOptionsButtonTitle},e.advancedOptions))),P))),B=this.exportedLinks.toArray(),N=this._renderExportedLink(B),D={[y.globalCss.buttonDisabled]:O||!u&&!p},R=!s||"2d"!==s.type,U=w.tsx("div",{class:k.panelError},R?e.sceneViewError:e.serviceError),H=w.tsx("div",null,w.tsx("ul",{bind:this,class:k.layoutTabList,onclick:this._toggleLayoutPanel,onkeydown:this._handleLayoutPanelKeyDown,role:"tablist"},w.tsx("li",{afterCreate:this._focusOnTabChange,afterUpdate:this._focusOnTabChange,"aria-selected":`${this._layoutTabSelected}`,class:k.layoutTab,"data-tab-id":C.layout,id:`${this.id}__layoutTab`,role:"tab",tabIndex:0},e.layoutTab),w.tsx("li",{afterCreate:this._focusOnTabChange,afterUpdate:this._focusOnTabChange,"aria-selected":`${!this._layoutTabSelected}`,class:k.layoutTab,"data-tab-id":C.mapOnly,id:`${this.id}__mapOnlyTab`,role:"tab",tabIndex:0},e.mapOnlyTab)),V,w.tsx("button",{"aria-label":e.exportDescription,bind:this,class:this.classes(k.printButton,y.globalCss.button,D),disabled:O,onclick:this._handlePrintMap,tabIndex:0,type:"button"},e.export),w.tsx("div",{afterUpdate:this._scrollExportIntoView,bind:this,class:k.exportedFilesContainer},w.tsx(g.Heading,{class:k.exportedFilesTitle,level:this.headingLevel},e.exportText),B.length>0?null:w.tsx("div",null,w.tsx("div",null,e.exportHint)),N)),z=w.tsx("div",{class:k.printWidgetContainer},w.tsx("header",{class:k.headerTitle},e.export),this.error||R||!s?U:H),q="initializing"===i.state?this._renderLoader():z;return w.tsx("div",{bind:this,class:this.classes(k.base,y.globalCss.widget,y.globalCss.panel)},q)}_renderCustomTextElementSection(){const{customTextElements:t}=this.templateOptions;return t?w.tsx("div",{class:k.formSectionContainer,key:"custom-text-elements"},t.map((t=>{const[e,a]=Object.entries(t)[0];return"date"===e?null:w.tsx("label",{key:e},e,w.tsx("input",{bind:this,class:this.classes(k.inputText,y.globalCss.input),"data-input-custom":!0,"data-input-name":e,onchange:this._updateInputValue,type:"text",value:a}))}))):null}async _applyTemplate(t){if(!t)return;if("string"==typeof t)return this.templateOptions.layout=t,void(this.templateOptions.layoutItem=null);if(!t.layoutTemplateInfo&&t.layoutItem)try{this._awaitingServerResponse=!0,t.layoutTemplateInfo=await this.viewModel.getLayoutTemplateInfo(t.layoutItem);const{hasLegend:e,mapSurroundInfos:a}=t.layoutTemplateInfo.layoutOptions,i=a.some((({type:t,visible:e})=>"CIMMarkerNorthArrow"===t&&e));t.layoutOptions={legend:e,northArrow:i}}catch(l){s.getLogger(this).error(`Failed to load layout info for ${t.label}`,l)}finally{this._awaitingServerResponse=!1}const{format:e,layoutItem:a}=t,i=t.layout??this.templateOptions.layout,n=t.layoutOptions?.legend??this.templateOptions.legendEnabled,o=t.layoutOptions?.northArrow??this.templateOptions.northArrowEnabled;this.templateOptions.set({format:e,layout:i,layoutItem:a,legendEnabled:n,northArrowEnabled:o})}_renderTitleOrFileNameSection(){const{title:t,fileName:e,titlePlaceHolder:a,fileNamePlaceHolder:i}=this.messages,s=this._layoutTabSelected?t:e,n=this._layoutTabSelected?a:i,o=this._layoutTabSelected?this.templateOptions.title:this.templateOptions.fileName;return w.tsx("div",{class:k.formSectionContainer},w.tsx("calcite-label",null,s,w.tsx("calcite-input",{placeholder:n,value:o??"",onCalciteInputInput:this._onInput})))}_focusOnTabChange(t){if(!this._activeTabFocusRequested)return;const e=t.getAttribute("data-tab-id");("layoutTab"===e&&this._layoutTabSelected||"mapOnlyTab"===e&&!this._layoutTabSelected)&&(t.focus(),this._activeTabFocusRequested=!1)}_renderLoader(){const t={[k.loader]:this._awaitingServerResponse};return w.tsx("div",{class:this.classes(t),key:"loader"})}_createFileLink(t,e){const a=e||this.messages.untitled,i=t.format.toLowerCase(),s=i.includes("png")?"png":i,n=a+s;return void 0!==this._exportedFileNameMap[n]?this._exportedFileNameMap[n]++:this._exportedFileNameMap[n]=0,new h({name:a,extension:s,count:this._exportedFileNameMap[n]})}_resetToCurrentScale(){this.templateOptions.scale=this.viewModel.view?.scale}_updateCustomTextElementValue(t,e,a){t.find((t=>{const[a]=Object.entries(t)[0];return a===e}))[e]=a}_updateInputValue(t){const e=t.target,a=e.getAttribute("data-input-name"),i=!!e["data-input-custom"],{templateOptions:s}=this;if(i)return void this._updateCustomTextElementValue(s.customTextElements,a,e.value);let n;if("number"===e.type){if(!M(e.valueAsNumber)){const t=s[a];return void(e.value=`${t}`)}n=e.valueAsNumber}else n=e.value;s[a]=n}_handleDPIChange(t){this._updateInputValue(t);const e=t.currentTarget.valueAsNumber,{height:a,width:i}=L(e),{templateOptions:s}=this;s.height=a,s.width=i}_handlePrintMap(){this._pendingExportScroll=!0;const{templateOptions:t}=this,e=this.viewModel.toPrintTemplate(t),a=this._layoutTabSelected?e.layoutOptions?.titleText:t.fileName,i=this._createFileLink(e,a);this.exportedLinks.add(i),this.emit("submit",{link:i}),this.viewModel.print(e).then((t=>{i.set({url:t&&t.url,state:"ready"})})).catch((t=>{i.set({error:t,state:"error"})})).then((()=>{this.emit("complete",{link:i}),this.scheduleRender()}))}_switchInput(){[this.templateOptions.width,this.templateOptions.height]=[this.templateOptions.height,this.templateOptions.width]}_showAdvancedOptions(){this._layoutTabSelected?this._advancedOptionsVisibleForLayout=!this._advancedOptionsVisibleForLayout:this._advancedOptionsVisibleForMapOnly=!this._advancedOptionsVisibleForMapOnly}_scrollExportIntoView(){if(!this._pendingExportScroll)return;this._pendingExportScroll=!1;const t=this._rootNode;if(!t)return;const{clientHeight:e,scrollHeight:a}=t,i=a-e;i>0&&(t.scrollTop=i)}_toggleInputValue(t){const e=t.target,a=e.getAttribute("data-option-name");this.templateOptions[a]=e.checked,"scaleEnabled"===a&&(this.templateOptions[a]||this._resetToCurrentScale())}_renderExportedLink(t){const e=this.messages;return t.map((t=>{const{error:a,url:i,state:s}=t,n=t.formattedName??"",l="error"===s,r="pending"===s,p="ready"===s,d={[y.globalCss.anchorDisabled]:r||l};let c=i||null;c&&(c=o.addProxy(c));const u=o.hasSameOrigin(i,location.href),h={[x.legacyIcon.loadingIndicator]:r,[y.globalCss.rotating]:r,[x.legacyIcon.download]:u&&p,[x.legacyIcon.launchLinkExternal]:!u&&p,[x.legacyIcon.error]:l,[k.exportedFileError]:l},m={[k.exportedFileError]:l};let b;b=r?e.pending:p?e.ready:e.errorMessage;const _=l?"print-task:cim-symbol-unsupported"===a?.name?e.exportWebMapCIMError:e.exportWebMapError:"";return w.tsx("div",{"aria-label":b,class:k.exportedFile,"data-item":t,key:n,onclick:this._removeLink,title:_},w.tsx("a",{"aria-label":`${n}. ${e.linkReady}`,class:this.classes(k.exportedFileLink,y.globalCss.anchor,d),download:n,href:c??"",onclick:this._handleLinkClick,rel:"noreferrer",tabIndex:0,target:"_blank"},w.tsx("span",{class:this.classes(h)}),w.tsx("span",{class:this.classes(k.exportedFileLinkTitle,m)},n)))}))}_toggleLayoutPanel(t){const e=t.target;this._toggleTab(e.getAttribute("data-tab-id"))}_toggleTab(t,e=!0){this._layoutTabSelected=t===C.layout,this.templateOptions.layout=this._layoutTabSelected?this.viewModel.templatesInfo?.layout?.defaultValue??"letter-ansi-a-landscape":T,this.templateOptions.layoutItem=null,e&&(this._activeTabFocusRequested=!0)}_handleLayoutPanelKeyDown(t){const{key:e}=t,a=t.target.getAttribute("data-tab-id");if(v.isActivationKey(e))return this._toggleTab(a),t.preventDefault(),void t.stopPropagation();"ArrowLeft"!==e&&"ArrowRight"!==e||(this._toggleTab(a===C.layout?C.mapOnly:C.layout),t.preventDefault(),t.stopPropagation())}};e.__decorate([l.property()],F.prototype,"allowedFormats",null),e.__decorate([l.property()],F.prototype,"allowedLayouts",null),e.__decorate([l.property()],F.prototype,"error",null),e.__decorate([l.property({type:O})],F.prototype,"exportedLinks",void 0),e.__decorate([l.property()],F.prototype,"extraParameters",null),e.__decorate([l.property()],F.prototype,"headingLevel",void 0),e.__decorate([l.property()],F.prototype,"iconClass",void 0),e.__decorate([l.property()],F.prototype,"icon",void 0),e.__decorate([l.property()],F.prototype,"includeDefaultTemplates",null),e.__decorate([l.property()],F.prototype,"label",null),e.__decorate([l.property(),f.messageBundle("esri/widgets/Print/t9n/Print")],F.prototype,"messages",void 0),e.__decorate([l.property()],F.prototype,"portal",null),e.__decorate([l.property()],F.prototype,"printServiceUrl",null),e.__decorate([l.property()],F.prototype,"templateCustomTextElements",null),e.__decorate([l.property({type:b})],F.prototype,"templateOptions",void 0),e.__decorate([l.property()],F.prototype,"view",null),e.__decorate([l.property({type:m})],F.prototype,"viewModel",void 0),F=e.__decorate([p.subclass("esri.widgets.Print")],F);return F}));
