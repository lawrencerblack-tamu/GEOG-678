/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["require","../../chunks/tslib.es6","../../assets","../../Color","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","../../symbols/LineSymbolMarker","../../symbols/SimpleLineSymbol","../Widget","../../chunks/componentsUtils","../support/widgetUtils","../support/decorators/messageBundle","../support/jsxFactory","./VisibleElementsSettingsPane"],(function(e,t,o,s,r,n,i,l,a,c,d,p,u,m,w,h,g){"use strict";const b="esri-un-associations",y={divControlsSymbolPicker:`${b}__div-controls-symbol-picker`,dropdown:`${b}__dropdown`,dropdownItemLineCap:`${b}__dropdown-item-line-cap`,dropdownItemLinePattern:`${b}__dropdown-item-line-pattern`,dropdownSelectedItemLineCap:`${b}__dropdown-selected-item-line-cap`,dropdownSelectedItemLinePattern:`${b}__dropdown-selected-item-line-pattern`,dropdownTrigger:`${b}__dropdown-trigger`,labelAndToggle:`${b}__label-and-toggle`};let _=class extends p{constructor(e,t){super(e,t),this._lineCapTypes=["butt","round","square"],this._lineStyleTypes=["solid","dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","short-dash","short-dash-dot","short-dash-dot-dot","short-dot"],this.lineSymbol=new d,this.messages=null,this.showArrows=!1,this.visibleElements=new g,this._afterComponentCreate=this._afterComponentCreate.bind(this)}render(){const{messages:{input:{lineCap:e,lineColor:t,lineStyle:o,lineWidth:s,showArrows:r}},visibleElements:n}=this,i=this.lineSymbol;return h.tsx("div",{class:y.divControlsSymbolPicker},n.arrowsToggle?this._renderToggle(r,this.showArrows,i,"marker"):void 0,n.capSelect?this._renderLineStylePicker(e,this._lineCapTypes,i,"cap"):void 0,n.colorPicker&&i.color?this._renderColorPicker(t,i.color.toHex(),i,"color"):void 0,n.stylePicker?this._renderLineStylePicker(o,this._lineStyleTypes,i,"style"):void 0,n.widthInput?this._renderNumberInput(s,i.width.toString(),i,"width"):void 0)}loadDependencies(){return u.loadCalciteComponents({dropdown:()=>new Promise(((t,o)=>e(["../../chunks/calcite-dropdown"],t,o))),"dropdown-group":()=>new Promise(((t,o)=>e(["../../chunks/calcite-dropdown-group"],t,o))),"dropdown-item":()=>new Promise(((t,o)=>e(["../../chunks/calcite-dropdown-item"],t,o))),input:()=>new Promise(((t,o)=>e(["../../chunks/calcite-input"],t,o))),"input-number":()=>new Promise(((t,o)=>e(["../../chunks/calcite-input-number"],t,o))),label:()=>new Promise(((t,o)=>e(["../../chunks/calcite-label"],t,o))),switch:()=>new Promise(((t,o)=>e(["../../chunks/calcite-switch"],t,o)))})}_afterComponentCreate(e){"value"in e&&null!=e.value&&"setNumberValue"in e&&e.setNumberValue({committing:!1,value:e.value,origin:"direct"})}_renderColorPicker(e,t,o,r){return h.tsx("calcite-label",{scale:"s"},e,h.tsx("calcite-input",{scale:"s",type:"color",value:t,onCalciteInputInput:e=>{const t=e.target;o.set(r,new s(t.value))}}))}_renderLineStylePicker(e,t,s,r){const n="style"===r,i="esri/widgets/UtilityNetworkAssociations/assets/img";function l(e,t){return h.tsx("calcite-dropdown-item",{label:e,selected:s[t]===e},h.tsx("div",{class:n?y.dropdownItemLinePattern:y.dropdownItemLineCap,style:`background-image:url(${o.getAssetUrl(`${i}/line-${n?"patterns":"caps"}/${e}.png`)})`}))}return h.tsx("calcite-label",{scale:"s"},e,h.tsx("calcite-dropdown",{class:y.dropdown,onCalciteDropdownSelect:e=>{const t=e.target;s.set(r,t.selectedItems[0].label)}},h.tsx("div",{class:y.dropdownTrigger,role:"button",slot:"trigger"},h.tsx("div",{class:n?y.dropdownSelectedItemLinePattern:y.dropdownSelectedItemLineCap,style:`background-image:url(${o.getAssetUrl(`${i}/line-${n?"patterns":"caps"}/${s[r]}.png`)})`})),h.tsx("calcite-dropdown-group",null,t.map((e=>l(e,r))))))}_renderNumberInput(e,t,o,s){return h.tsx("calcite-label",{scale:"s"},e,h.tsx("calcite-input-number",{afterCreate:this._afterComponentCreate,max:10,min:1,scale:"s",step:1,type:"number",value:t,onCalciteInputNumberChange:e=>{const t=e.target;o.set(s,t.value)}}))}_renderToggle(e,t,o,s){return h.tsx("div",{class:y.labelAndToggle},h.tsx("calcite-label",{scale:"s"},e),h.tsx("calcite-switch",{bind:this,checked:t,scale:"m",onCalciteSwitchChange:e=>{e.target.checked?o.set(s,new c({style:"arrow"})):o.set(s,null)}}))}};t.__decorate([r.property()],_.prototype,"lineSymbol",void 0),t.__decorate([r.property(),w.messageBundle("esri/widgets/UtilityNetworkAssociations/t9n/UtilityNetworkAssociations")],_.prototype,"messages",void 0),t.__decorate([r.property()],_.prototype,"showArrows",void 0),t.__decorate([r.property({type:g,nonNullable:!0})],_.prototype,"visibleElements",void 0),_=t.__decorate([a.subclass("esri.widgets.UtilityNetworkAssociations.UtilityNetworkAssociationsLineSymbolPicker")],_);return _}));
