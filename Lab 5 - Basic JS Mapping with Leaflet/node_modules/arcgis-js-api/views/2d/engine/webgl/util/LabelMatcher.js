/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["exports","../shaderGraph/techniques/mesh/createMeshWriter","./Matcher"],(function(e,a,r){"use strict";class t extends r.FeatureMatcher{static async fromLabelSchema(e,r,s,l){const c=s.classes.map((async t=>{const s=await a.createMeshWriterGroupFromSchema(e,r,t.meshes,l);return{minScale:t.minScale,maxScale:t.maxScale,meshes:s,expression:null,where:await e.createWhereClause(t.where)}})),i=await Promise.all(c);return new t(i)}constructor(e){super(),this._labels=e}match(e,a){if(!this._labels.length)return null;const r=this._getLabels(a.$view.scale),t=[];for(const s of r)s.where&&!s.where(e)||t.push(...s.meshes);return t}_getLabels(e){return this._labels.filter((a=>this._validForTileScale(a,e)))}_validForTileScale(e,a){const r=a-a/4,t=a+a/2;return(!e.minScale||e.minScale>=r)&&(!e.maxScale||e.maxScale<=t)}}e.LabelMatcher=t,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
