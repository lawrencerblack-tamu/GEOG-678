/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["exports","../shaderGraph/techniques/mesh/createMeshWriter","./Matcher"],(function(e,t,r){"use strict";class a extends r.FeatureMatcher{constructor(e,t){super(),this._intervals=[],this._isMaxInclusive=t,this._field=e}static async fromIntervalSchema(e,r,s,i){const n=await e.createComputedField(s),l=new a(n,s.isMaxInclusive);await Promise.all(s.intervals.map((async a=>{const s=await t.createMeshWriterGroupFromSchema(e,r,a.meshes,i);l.add(a,s)})));const c=await t.createMeshWriterGroupFromSchema(e,r,s.defaultSymbol,i);l.setDefault(c);const u=await t.createMeshWriterGroupFromSchema(e,r,s.backgroundFill,i);return l.setBackgroundFill(u),l}add(e,t){this._intervals.push({interval:e,result:t}),this._intervals.sort(((e,t)=>e.interval.min-t.interval.min))}size(){return super.size()+this._intervals.length}doMatch(e,t){const r=this._field?.read(e,t);if(null==r||isNaN(r)||r===1/0||r===-1/0)return null;for(let a=0;a<this._intervals.length;a++){const{interval:e,result:t}=this._intervals[a],s=r>=e.min,i=this._isMaxInclusive?r<=e.max:r<e.max;if(s&&i)return t}return null}}e.IntervalMatcher=a,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
