/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["exports","../../../enums","../featureTechniqueUtils","../Technique","../mesh/MeshWriterRegistry","./PieChartShader"],(function(e,t,i,s,r,a){"use strict";class n extends s.Technique{constructor(){super(...arguments),this.meshWriter=r.meshWriterRegistry.PieChartMeshWriter,this.shaders={geometry:new a.PieChartShader},this.symbologyPlane=t.FeatureSymbologyDrawOrder.MARKER}render(e,t){const{context:s,painter:r}=e,{instance:a,target:n}=t,o=this.shaders.geometry,u=a.getInput(),h=u.numberOfFields,l=i.isHittest(e),S=i.getFeatureUniforms(e,n),g=i.getSelectionDefines(e);o.setNumberOfFields(h),r.setShader({shader:o,uniforms:{...i.resolveDynamicUniforms(e,t.target,u.geometry),...S.storage,...S.view,hittestUniforms:S.hittestRequest?{hittestDist:S.hittestRequest?.distance,hittestPos:S.hittestRequest?.position}:null},defines:{VV_SIZE_MIN_MAX_VALUE:!!u.geometry.visualVariableSizeMinMaxValue,VV_SIZE_SCALE_STOPS:!!u.geometry.visualVariableSizeScaleStops,VV_SIZE_FIELD_STOPS:!!u.geometry.visualVariableSizeStops,VV_SIZE_UNIT_VALUE:!!u.geometry.visualVariableSizeUnitValue,VV_OPACITY:!!u.geometry.visualVariableOpacity,HITTEST:l,highlight:S.highlight?1:0,...g,numberOfFields:h},optionalAttributes:{},useComputeBuffer:l}),r.setPipelineState(i.getFeaturePipelineState(e)),r.submitDraw(s,t)}}e.PieChartTechnique=n,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
