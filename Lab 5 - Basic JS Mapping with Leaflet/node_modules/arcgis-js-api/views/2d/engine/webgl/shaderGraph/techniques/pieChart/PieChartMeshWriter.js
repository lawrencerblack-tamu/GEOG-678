/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["exports","../../../../../../../core/screenUtils","../fill/meshWriterUtils","../mesh/MeshWriter","../../../../../../webgl/enums"],(function(e,t,r,i,a){"use strict";const o={createComputedParams:e=>e,attributes:{pos:{type:a.DataType.SHORT,count:2,packPrecisionFactor:10,pack:"position"},id:{type:a.DataType.UNSIGNED_BYTE,count:3,pack:"id"},bitset:{type:a.DataType.UNSIGNED_BYTE,count:1,pack:e=>0},offset:{type:a.DataType.SHORT,count:2,packPrecisionFactor:16,packAlternating:{count:4,pack:({size:e})=>{const r=t.pt2px(e),i=-r/2,a=-r/2;return[[i,a],[i+r,a],[i,a+r],[i+r,a+r]]}}},texCoords:{type:a.DataType.SHORT,count:2,packPrecisionFactor:4,packAlternating:{count:4,pack:()=>[[0,1],[1,1],[0,0],[1,0]]}},size:{type:a.DataType.UNSIGNED_BYTE,count:2,pack:({size:e})=>[e,e]},referenceSize:{type:a.DataType.UNSIGNED_BYTE,count:1,pack:({size:e})=>t.pt2px(e)},zoomRange:{type:a.DataType.UNSIGNED_BYTE,count:2,pack:({scaleInfo:e},{tileInfo:t})=>r.getMinMaxZoom(e,t)}}};class s extends i.MeshWriter{constructor(){super(...arguments),this.vertexSpec=o}_write(e,r){const i=r.getDisplayId(),a=this.evaluatedMeshParams.minPixelBuffer,o=Math.max(t.pt2px(this.evaluatedMeshParams.size),a);let s,n;if("esriGeometryPoint"===r.geometryType)s=r.readXForDisplay(),n=r.readYForDisplay();else{const e=r.readCentroidForDisplay();if(!e)return;s=e?.coords[0],n=e?.coords[1]}e.recordStart(this.instanceId,this.attributeLayout),e.recordBounds(s,n,o,o);const c=e.vertexCount();this._writeVertex(e,i,s,n),e.indexWrite(c+0),e.indexWrite(c+1),e.indexWrite(c+2),e.indexWrite(c+1),e.indexWrite(c+3),e.indexWrite(c+2),e.recordEnd()}}e.PieChartMeshWriter=s,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
