/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["exports","../../../../../../../chunks/tslib.es6","../../../../../../../core/has","../../GraphShaderModule","../../graph/glsl","./utils"],(function(t,e,a,r,i,o){"use strict";class s extends r.UniformGroup{getVisualVariableData(t){if(!this._vvData){const e=this.getAttributeDataCoords(t);this._vvData=i.texture2D(this.visualVariableData,e).setDebugName("storage2")}return this._vvData}getAttributeDataCoords(t){if(!this._uv){const e=o.unpackDisplayIdTexel(t),a=this.size,r=i.int(e.x),s=i.int(e.y).multiply(i.int(256)),u=i.int(e.z).multiply(i.int(256)).multiply(i.int(256)),n=i.float(r.add(s).add(u)),l=i.mod(n,a),D=n.subtract(l).divide(a);this._uv=new i.Vec2(l,D).add(.5).divide(a)}return this._uv}getFilterData(t){const e=this.getAttributeDataCoords(t);return i.texture2D(this.filterFlags,e).setDebugName("storage0")}getAnimationData(t){const e=this.getAttributeDataCoords(t);return i.texture2D(this.animation,e).setDebugName("storage1")}getVVData(t){return this.getVisualVariableData(t)}getDataDrivenData0(t){const e=this.getAttributeDataCoords(t);return i.texture2D(this.dataDriven0,e).setDebugName("storage30")}getDataDrivenData1(t){const e=this.getAttributeDataCoords(t);return i.texture2D(this.dataDriven1,e).setDebugName("storage31")}getDataDrivenData2(t){const e=this.getAttributeDataCoords(t);return i.texture2D(this.dataDriven2,e).setDebugName("storage32")}getGPGPUData(t){const e=this.getAttributeDataCoords(t);return i.texture2D(this.gpgpu,e).setDebugName("storage4")}getFilterFlags(t){return a("webgl-ignores-sampler-precision")?i.ceil(this.getFilterData(t).x.multiply(i.float(255))):this.getFilterData(t).x.multiply(i.float(255))}getAnimationValue(t){return this.getAnimationData(t).x}getSizeValue(t){return this.getVisualVariableData(t).x}getColorValue(t){return this.getVisualVariableData(t).y}getOpacityValue(t){return this.getVisualVariableData(t).z}getRotationValue(t){return this.getVisualVariableData(t).w}}e.__decorate([r.uniform(i.Sampler2D)],s.prototype,"filterFlags",void 0),e.__decorate([r.uniform(i.Sampler2D)],s.prototype,"animation",void 0),e.__decorate([r.uniform(i.Sampler2D)],s.prototype,"gpgpu",void 0),e.__decorate([r.uniform(i.Sampler2D)],s.prototype,"visualVariableData",void 0),e.__decorate([r.uniform(i.Sampler2D)],s.prototype,"dataDriven0",void 0),e.__decorate([r.uniform(i.Sampler2D)],s.prototype,"dataDriven1",void 0),e.__decorate([r.uniform(i.Sampler2D)],s.prototype,"dataDriven2",void 0),e.__decorate([r.uniform(i.Float)],s.prototype,"size",void 0),t.EntityStorage=s,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
