/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["exports","./definitions","./Mesh","../shaderGraph/techniques/mesh/utils"],(function(t,e,i,n){"use strict";class r extends i.Mesh{static create(t,i){const o=[];let{stride:s,hash:l}=i.layout;if(null==s){s=0;for(const{count:t,type:n,offset:r}of i.layout.attributes){if(null!=r)throw new Error("Stride cannot be computed automatically when attribute offsets are supplied explicitly.");s+=t*e.dataSizeInBytes[n]}}let a=0,u=0;for(const{count:n,name:r,offset:p,type:x,normalized:y}of i.layout.attributes){null!=p&&(u=p);const t={name:r,location:a,vertex:0,count:n,type:x,offset:u,stride:s,divisor:0,normalized:null!=y&&y};o.push(t),a++,u+=n*e.dataSizeInBytes[x]}const d={attributes:o,primitive:i.primitive};null!=i.index&&(d.index=0);let{count:c}=i;if(null==c&&(c=i.index?i.index.length:i.vertex.byteLength/s,Math.floor(c)!==c))throw new Error(`The byte length of vertex data must be an exact multiple of the stride, which is ${s}.`);const h={start:0,count:c,group:0,primitive:i.primitive},f={vertex:[i.vertex],parts:[h],groups:[d]};null!=i.index&&(f.index=[i.index]),null==l&&(l=n.vertexLayoutHash(o));return new r(t,f,{hash:l,attributes:o,stride:s})}constructor(t,e,i){super(t,e),this.layout=i}bind(t,e=0){super.bind(t,e)}}t.SimpleMesh=r,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
