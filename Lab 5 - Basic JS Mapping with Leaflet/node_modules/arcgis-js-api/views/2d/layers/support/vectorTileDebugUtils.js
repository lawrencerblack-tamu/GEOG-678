/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["exports","./DebugOverlay"],(function(e,t){"use strict";function o(e,o){e.container.addChild(new t({getMesh:t=>s(e,t,o),getColors:n,getOpacities:r}))}const s=(e,o,s)=>{const{pixelRatio:n}=o.state;let r=0;const c=[],i=[];for(const l of e._vectorTileContainer.children)if(l.symbols)for(const[e,o]of l.symbols)for(const a of o)for(const e of a.colliders){const o=(e.xScreen+e.dxScreen)*n,l=(e.yScreen+e.dyScreen)*n,u=e.width*n,f=e.height*n,h=a.unique.parts[e.partIndex].targetOpacity>.5;if(!h&&"all"!==s)continue;const p=3,d=1,g=3,y=0,x=h?2:0,m=h?3:0,b=t.makeFlags(x,m);c.push(o,l,b,o+u,l,b,o,l+f,b,o+u,l+f,b),i.push(r,r+1,r+2,r+1,r+3,r+2),r+=4;const S=h?p:d,v=h?g:y,w=t.makeFlags(S,v);c.push(o,l,w,o+u,l,w,o,l+1,w,o+u,l+1,w),i.push(r,r+1,r+2,r+1,r+3,r+2),r+=4,c.push(o,l+f-1,w,o+u,l+f-1,w,o,l+f,w,o+u,l+f,w),i.push(r,r+1,r+2,r+1,r+3,r+2),r+=4,c.push(o,l,w,o+1,l,w,o,l+f,w,o+1,l+f,w),i.push(r,r+1,r+2,r+1,r+3,r+2),r+=4,c.push(o+u-1,l,w,o+u,l,w,o+u-1,l+f,w,o+u,l+f,w),i.push(r,r+1,r+2,r+1,r+3,r+2),r+=4}const{symbolFader:a}=e._vectorTileContainer;if(a){const[e,o]=a.decluttererOffset,s=t.makeFlags(2,3),n=256,l=256,u=n+e,f=l+o;for(const t of[-3,3])for(const e of[-3,3])c.push(n,l,s,n+t,l+e,s,u,f,s,u+t,f+e,s),i.push(r,r+1,r+2,r+1,r+3,r+2),r+=4}return{vertexData:new Int16Array(c),indexData:new Uint32Array(i)}},n=()=>[1,.5,0,1,1,0,0,1,0,1,.5,1,0,.5,0,1],r=()=>[.05,.01,.15,.2];e.showCollisionBoxes=o,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
