/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["exports","../../../../../core/string","../../../../../support/arcadeOnDemand","../../../arcade/callExpressionWithCursor","./AComputedField"],(function(e,r,t,s,a){"use strict";class c extends a.AComputedField{static async create(e,s){const a=await t.createRendererExpression(e,s.spatialReference,s.fields),i=r.numericHash(e);return new c(a,i)}constructor(e,r){super(),this._compiled=e,this._cacheKey=r}resize(e){}read(e,r){return this.referencesScale()||"system"!==r.$view.timeZone?s.callExpressionWithCursor(this._compiled,e,r):this._readCached(e,r)}readWithDefault(e,r,t){return this.referencesScale()||"system"!==r.$view.timeZone?s.callExpressionWithCursorWithDefault(this._compiled,e,r,t):this._readWithDefaultCached(e,r,t)}referencesScale(){return this._compiled?.referencesScale()??!1}referencesGeometry(){return this._compiled?.referencesGeometry()??!1}_readCached(e,r){if(e.setCache(this._cacheKey),e.hasCachedValue())return e.getCachedValue();const t=s.callExpressionWithCursor(this._compiled,e,r);return e.setCachedValue(t),t}_readWithDefaultCached(e,r,t){if(e.setCache(this._cacheKey),e.hasCachedValue())return e.getCachedValue();const a=s.callExpressionWithCursorWithDefault(this._compiled,e,r,t);return e.setCachedValue(a),a}}e.ComputedExpression=c,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
