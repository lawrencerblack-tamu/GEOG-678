/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["exports","../../../chunks/tslib.es6","../../../core/Accessor","../../../core/Identifiable","../../../core/Logger","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/RandomLCG","../../../core/accessorSupport/decorators/subclass","../../../geometry/projection","../../../geometry/support/contains","../../../geometry/support/near"],(function(e,t,r,o,n,s,i,a,c,l,y,m){"use strict";var p;e.GeometryConstraint=p=class extends(o.NumericIdentifiableMixin(r)){constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(null==this.geometry||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return l.project(this.geometry,this.spatialReference)}catch(e){return n.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(null==this.normalizedGeometry)return e;const r=e.targetGeometry;if("extent"===this.normalizedGeometry.type?y.extentContainsPoint(this.normalizedGeometry,r):y.polygonContainsPoint(this.normalizedGeometry,r))return e;const{coordinate:o}=m.nearestCoordinate(this.normalizedGeometry,r);return o?(e.targetGeometry=o,e):e}clone(){return new p({geometry:this.geometry?.clone(),spatialReference:this.spatialReference?.clone()})}},t.__decorate([s.property({constructOnly:!0})],e.GeometryConstraint.prototype,"geometry",void 0),t.__decorate([s.property({readOnly:!0})],e.GeometryConstraint.prototype,"normalizedGeometry",null),t.__decorate([s.property({constructOnly:!0})],e.GeometryConstraint.prototype,"spatialReference",void 0),e.GeometryConstraint=p=t.__decorate([c.subclass("esri.views.2d.constraints.GeometryConstraint")],e.GeometryConstraint),Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
