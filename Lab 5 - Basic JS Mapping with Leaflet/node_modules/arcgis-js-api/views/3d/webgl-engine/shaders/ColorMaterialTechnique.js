/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["require","exports","../../../../core/libs/gl-matrix-2/factories/vec4f64","../core/shaderLibrary/ShaderOutput","../core/shaderTechnique/ReloadableShaderModule","../core/shaderTechnique/ShaderTechnique","../lib/DefaultVertexAttributeLocations","../lib/OrderIndependentTransparency","../lib/Program","../lib/StencilUtils","../lib/TransparencyPassType","../materials/VisualVariablePassParameters","../../../../chunks/ColorMaterial.glsl","../../../webgl/renderState"],(function(e,t,a,r,l,i,s,n,o,c,u,d,p,h){"use strict";class P extends d.VisualVariablePassParameters{constructor(){super(...arguments),this.color=a.ZEROS}}class g extends i.ShaderTechnique{initializeProgram(e){return new o.Program(e.rctx,g.shader.get().build(this.configuration),s.Default3D)}_createPipeline(e,t){const a=this.configuration,l=e===u.TransparencyPassType.NONE,i=e===u.TransparencyPassType.FrontFace;return h.makePipelineState({blending:a.output!==r.ShaderOutput.Color&&a.output!==r.ShaderOutput.Alpha||!a.transparent?null:l?n.blendingDefault:n.oitBlending(e),culling:h.cullingParams(a.cullFace),depthTest:a.draped?null:{func:n.oitDepthTest(e)},depthWrite:a.draped?null:(l||i)&&a.writeDepth?h.defaultDepthWriteParams:null,colorWrite:h.defaultColorWriteParams,stencilWrite:a.hasOccludees?c.stencilWriteMaskOn:null,stencilTest:a.hasOccludees?t?c.stencilToolMaskBaseParams:c.stencilBaseAllZerosParams:null,polygonOffset:l||i?a.polygonOffset?f:null:n.getOITPolygonOffset(a.enableOffset)})}initializePipeline(){return this._occludeePipelineState=this._createPipeline(this.configuration.transparencyPassType,!0),this._createPipeline(this.configuration.transparencyPassType,!1)}getPipeline(e){return e?this._occludeePipelineState:super.getPipeline()}}g.shader=new l.ReloadableShaderModule(p.ColorMaterial,(()=>new Promise(((t,a)=>e(["./ColorMaterial.glsl"],t,a)))));const f={factor:1,units:1};t.ColorMaterialPassParameters=P,t.ColorMaterialTechnique=g,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
