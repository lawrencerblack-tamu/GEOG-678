/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/tslib.es6","../../../../core/maybe","../../../../core/promiseUtils","../../../../core/Logger","../../../../core/has","../../../../core/RandomLCG","../../../../core/Error","../../../../core/accessorSupport/decorators/subclass","../../../ViewAnimation","./CameraController"],(function(t,e,s,i,n,a,o,r,l,h,c){"use strict";t.AnimationController=class extends c.CameraController{constructor(){super(...arguments),this._asyncResult=null}get canStop(){return!0}set asyncResult(t){this._asyncResult&&(this._asyncResult.reject(i.createAbortError()),this._asyncResult=null),this.state===c.State.Finished||this.state===c.State.Stopped?(s.assertIsSome(t),this.state===c.State.Finished?t.resolve():t.reject(i.createAbortError())):this._asyncResult=t}get asyncResult(){return this._asyncResult}onControllerStart(){this.state=c.State.Running,null!=this.viewAnimation&&this.viewAnimation.when((()=>this.updateStateFromViewAnimation()),(()=>this.updateStateFromViewAnimation()))}updateStateFromViewAnimation(){null==this.viewAnimation||this.state!==c.State.Ready&&this.state!==c.State.Running||(this.viewAnimation.state===h.State.FINISHED?this.finish():this.viewAnimation.state===h.State.STOPPED&&(this.state=c.State.Stopped))}onControllerEnd(){null==this.viewAnimation||this.viewAnimation.done||(this.state===c.State.Finished?this.viewAnimation.finish():this.state===c.State.Stopped&&this.viewAnimation.stop()),this._asyncResult&&(this.state===c.State.Finished?this._asyncResult.resolve():this._asyncResult.reject(i.createAbortError()))}finish(){this.finishController()}},t.AnimationController=e.__decorate([l.subclass("esri.views.3d.state.controllers.AnimationController")],t.AnimationController),Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
