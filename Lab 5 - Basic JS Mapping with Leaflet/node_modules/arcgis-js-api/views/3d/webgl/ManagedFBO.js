/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["../../../core/maybe","./ManagedFBObject","../../webgl/enums"],(function(t,e,h){"use strict";class s extends e.ManagedFBObject{constructor(t,h,s,o,r,i){super(t,i),this.type=e.AttachmentType.FBO,this._colors=new Map,this._name="composite-color",this.acquireDepth=null,this.acquireColor=null,this._name=h,this.fbo=s,this.acquireDepth=o,this.acquireColor=r}dispose(){this.fbo.dispose()}get usedMemory(){return this.fbo.usedMemory}get name(){return this._name}setName(t){this._name=t}getTexture(t=h.ColorAttachment.COLOR_ATTACHMENT0){return t===h.DepthStencilAttachment?this.fbo?.depthStencilTexture:this.fbo?.getColorTexture(t)}getAttachment(t=h.ColorAttachment.COLOR_ATTACHMENT0){return t===h.DepthStencilAttachment?this._depth:this._colors.get(t)}attachDepth(t){return t?.retain(),this.detachDepth(),t&&this.fbo.attachDepthStencil(t.attachment),this._depth=t,this}detachDepth(){this.fbo.detachDepthStencilTexture(),this.fbo.detachDepthStencilBuffer(),this._depth=t.releaseMaybe(this._depth)}attachColor(t,e){return t.retain(),this.detachColor(e),this.fbo.attachColorTexture(t.attachment,e),this._colors.set(e,t),this}detachColor(t){this.fbo.detachColorTexture(t);const e=this._colors.get(t);this._colors.delete(t),e?.release()}detachAll(){this._colors.forEach(((t,e)=>this.detachColor(e))),this.detachDepth()}}return s}));
