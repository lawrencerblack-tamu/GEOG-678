/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["exports","../../../../core/time","../../../../chunks/vec32","../../../../core/libs/gl-matrix-2/factories/vec3f64","./Camera","../../webgl-engine/lib/Camera","../../../animation/pointToPoint/Animation"],(function(e,t,i,n,r,a,s){"use strict";class c{get finished(){return this.currentTime>=this._animation.time}get time(){return this._animation.time}constructor(e){this.currentTime=t.Milliseconds(0),this._animation=new s.Animation((()=>new r.Camera(e))),this._current=new r.Camera(e)}update(e,n,r){const{source:a,target:s}=this._animation.definition,c=i.subtract(o,n.center,e.center),m=i.length(c);m>=1e-5?(c[0]/=m,c[1]/=m,c[2]/=m):(c[0]=0,c[1]=1,c[0]=0),i.copy(a.direction,c),i.copy(s.direction,c),a.copyFromRenderCamera(e),s.copyFromRenderCamera(n),this._current.copyFrom(a),this._animation.update(a,s,r),this.currentTime=t.Milliseconds(0),e.almostEquals(n)&&(this.currentTime=this._animation.time)}cameraAt(e,t){return this._animation.cameraAt(e,this._current),t=t||new a.Camera,this._current.copyToRenderCamera(t),t}step(e,i){return this.finished||(this.currentTime=t.Milliseconds(this.currentTime+t.millisecondsFromSeconds(e)),this.currentTime>=this.time&&(this.currentTime=this.time)),this.cameraAt(this.currentTime/this.time,i)}}const o=n.create();e.Animation=c,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
