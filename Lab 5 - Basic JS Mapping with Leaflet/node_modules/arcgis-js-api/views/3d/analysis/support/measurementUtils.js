/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/vec32","../../../../core/libs/gl-matrix-2/factories/vec3f64","../../../../geometry/geometryEngine","../../../../geometry/Polygon","../../../../geometry/SpatialReference","../../../../geometry/projection/projectPointToVector","../../../../geometry/projection/projectPointToWGS84ComparableLonLat","../../../../geometry/projection/projectVectorToWGS84ComparableLonLat","../../../../geometry/support/geodesicUtils","../../../../chunks/sphere","../../support/mathUtils"],(function(e,t,o,r,n,i,c,a,s,l,u,p){"use strict";function g(e,o){const r=u.getCenter(o);t.set(r,0,0,0);for(let i=0;i<e.length;++i)t.add(r,r,e[i]);t.scale(r,r,1/e.length);let n=0;for(let i=0;i<e.length;++i)n=Math.max(n,t.squaredDistance(r,e[i]));o[3]=Math.sqrt(n)}function f(e,t){if(e.length<3)throw new Error("need at least 3 points to fit a plane");p.planeFromPoints(e[0],e[1],e[2],t)}function m(e,o){return t.dot(e,o)+e[3]}function d(e,o,r){return c.projectPointToVector(e,P,r)&&c.projectPointToVector(o,b,r)?t.distance(P,b):0}function h(e,t){if(!a.projectPointToWGS84ComparableLonLat(e,P)||!a.projectPointToWGS84ComparableLonLat(t,b))return 0;const o=new l.InverseGeodeticSolverResult;return l.inverseGeodeticSolver(o,[P[0],P[1]],[b[0],b[1]],i.WGS84),o.distance}function S(e,t,o){const r=new l.InverseGeodeticSolverResult;return l.inverseGeodeticSolver(r,[e[0],e[1]],[t[0],t[1]],o??i.WGS84),r.distance}function G(e,t,o,n){const i=T;return s.projectVectorToWGS84ComparableLonLat(e,n,P)&&s.projectVectorToWGS84ComparableLonLat(t,n,b)&&s.projectVectorToWGS84ComparableLonLat(o,n,j)?(i.setPoint(0,0,P),i.setPoint(0,1,b),i.setPoint(0,2,j),Math.abs(r.geodesicArea(i,"square-meters"))):0}function L(e,o=null,r=!0){const n=1e-6,i=(e,o)=>{if(0===o[0]&&0===o[1]&&0===o[2])return!1;for(let r=0;r<e.length;++r)if(t.dot(o,e[r])<-n)return!1;return!0};if(0===e.length)return!1;if(1===e.length)return o&&t.copy(o,e[0]),!0;t.set(v,0,0,0);for(let c=0;c<e.length;++c)t.add(v,v,e[c]);if(t.normalize(v,v),i(e,v))return o&&t.copy(o,v),!0;if(!r)return!1;for(let c=0;c<e.length;++c)for(let r=0;r<e.length;++r)if(c!==r&&(t.cross(v,e[c],e[r]),t.normalize(v,v),i(e,v)))return o&&t.copy(o,v),!0;return!1}function y(e){return"mouse"!==e.pointerType||0===e.button}const P=o.create(),b=o.create(),j=o.create(),T=new n({rings:[[P,b,j]],spatialReference:i.WGS84}),v=o.create();e.bestFitPlane=f,e.boundingSphere=g,e.fitHemisphere=L,e.isPrimaryPointerAction=y,e.planePointDistance=m,e.segmentLengthEuclidean=d,e.segmentLengthGeodesic=h,e.segmentLengthGeodesicVector=S,e.triangleAreaGeodesic=G,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
