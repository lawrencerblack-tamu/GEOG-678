/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["exports","../dragEventPipeline3D","../ManipulatorType","./Manipulation","./moveUtils","../../../../interactive/dragEventPipeline","../../../../interactive/GraphicManipulator"],(function(t,e,a,i,r,n,o){"use strict";class l extends i.Manipulation{constructor(t){super(),this._view=t.view,this._tool=t.tool,this._graphicState=t.graphicState,this._createManipulator(),this.forEachManipulator((t=>this._tool.manipulators.add(t)))}destroy(){this.forEachManipulator((t=>{this._tool.manipulators.remove(t),t.destroy()})),this._tool=null,this._view=null,this._manipulator=null,this._graphicState=null}forEachManipulator(t){t(this._manipulator,a.ManipulatorType.TRANSLATE_XY)}createGraphicDragPipeline(t){return r.createGraphicMoveDragPipeline(this._graphicState.graphic,t,(t=>this.createDragPipeline(t)))}createDragPipeline(t){const a=this._view,i=this._graphicState.graphic,r=null!=i.geometry?i.geometry.spatialReference:null;return n.createManipulatorDragEventPipeline(this._manipulator,((o,l,p,c,s)=>{const h=l.next(e.screenToMapXYForGraphic(s,a,i,r)).next(n.addMapDelta()).next(n.addScreenDelta());t(o,h,p,c,s)}))}_createManipulator(){const t=this._view,e=this._graphicState.graphic;this._manipulator=new o.GraphicManipulator({graphic:e,view:t,selectable:!0,cursor:"move"})}}t.MoveXYGraphicManipulation=l,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
