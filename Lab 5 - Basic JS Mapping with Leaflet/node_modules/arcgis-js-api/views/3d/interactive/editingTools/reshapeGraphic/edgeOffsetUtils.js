/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["exports","../../../../../core/screenUtils","../../../../../core/libs/gl-matrix-2/factories/mat4f64","../../../../../chunks/vec32","../../../../../core/libs/gl-matrix-2/factories/vec3f64","../../../../../geometry/support/plane","../../../../../layers/graphics/dehydratedPoint","../../../../interactive/editGeometry/operations/OffsetEdgeVertex"],(function(e,r,t,n,o,c,a,s){"use strict";function i(e,r,t){const n="on-the-ground"===t.mode?s.PlaneType.XY:s.PlaneType.XYZ;return new s.OffsetEdgeVertex(e,n,r,0)}function d(e,r,t){const a=o.create();if(!e.renderCoordsHelper.toRenderCoords(r,a))return null;const s=l(e,r,c.getNormal(t.plane)),i=l(e,r,t.edgeDirection);if(null==s||null==i)return null;const d=n.cross(o.create(),s,i);return c.fromPositionAndNormal(a,d,c.create())}function l(e,r,t){const c=a.makeDehydratedPoint(r.x+t[0],r.y+t[1],r.z+t[2],r.spatialReference),s=o.create(),i=o.create();return e.renderCoordsHelper.toRenderCoords(r,s)&&e.renderCoordsHelper.toRenderCoords(c,i)?n.direction(i,s,i):null}function u(e,r,a){const s=c.getNormal(e),i=n.direction(o.create(),r,a),d=n.cross(o.create(),i,s),l=n.cross(o.create(),i,d);return t.fromValues(i[0],i[1],i[2],0,d[0],d[1],d[2],0,l[0],l[1],l[2],0,0,0,0,1)}function f(e,t,o){const c=o.projectToRenderScreen(e,r.createRenderScreenPointArray3()),a=o.projectToRenderScreen(t,r.createRenderScreenPointArray3());return null!=c&&null!=a?n.squaredLength(n.subtract(c,c,a)):0}e.createEdgeOffsetIntersectionPlane=d,e.createEdgeOffsetOperation=i,e.edgeOffsetRotationMatrix=u,e.screenEdgeLengthSquared=f,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
