/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["exports","../../../../core/handleUtils","../../../../core/reactiveUtils","../../../../geometry/support/meshVertexSpaceUtils","../../../../geometry/support/spatialReferenceUtils","../../../../layers/graphics/sources/interfaces","../../../ViewingMode"],(function(e,t,a,s,n,r,i){"use strict";function o(e,s){const{graphic:n}=e;return[a.watch((()=>e.displaying),(e=>{e?c(n,s):l(n,s)}),{...a.syncAndInitial}),t.makeHandle((()=>l(n,s)))]}function c(e,t){const{geometry:a}=e;p(a,t)&&e.notifyMeshTransformChanged({action:r.MeshTransformUpdateAction.EnableFastUpdates})}function l(e,t){const{geometry:a}=e;p(a,t)&&e.notifyMeshTransformChanged({action:r.MeshTransformUpdateAction.DisableFastUpdates})}function p(e,{state:{viewingMode:t},spatialReference:a}){if("mesh"!==e?.type)return!1;const{vertexSpace:r,spatialReference:o}=e;if(!s.isRelativeVertexSpace(r))return!1;const{type:c}=r;return t===i.ViewingMode.Global&&"local"===c||t===i.ViewingMode.Local&&n.equals(a,o)&&"georeferenced"===c&&!o.isGeographic}e.meshTransformFastUpdateHandles=o,e.tryDisableMeshTransformFastUpdates=l,e.tryEnableMeshTransformFastUpdates=c,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
