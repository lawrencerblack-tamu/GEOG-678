/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["exports","../../../../../chunks/vec32","../../../../../core/libs/gl-matrix-2/factories/vec3f64","../../../../../geometry/projection","../../../../../geometry/spatialReferenceEllipsoidUtils","../../../../../geometry/projection/projectVectorToVector","../../../../../geometry/support/vectorStacks","../../../support/mathUtils"],(function(e,t,r,s,c,o,i,n){"use strict";class a{constructor(e=r.create(),t=r.create()){this.startRenderSpace=e,this.endRenderSpace=t,this.type="euclidean"}eval(e,r,s){return t.lerp(r,this.startRenderSpace,this.endRenderSpace,e),s&&(t.subtract(s,this.endRenderSpace,this.startRenderSpace),t.normalize(s,s)),r}createRenderGeometry(e,r){const s=[],c=[],o=(r,o)=>{const i=d;t.subtract(i,r,e),s.push([i[0],i[1],i[2]]),c.push([o[0],o[1],o[2]])},n=r.worldUpAtPosition(this.eval(.5,h),i.sv3d.get());return o(this.startRenderSpace,n),o(this.endRenderSpace,n),{points:s,normals:c}}static fromPositionAndVector(e,s,c=1){return t.scale(h,s,c),t.add(h,e,h),new a(r.clone(e),r.clone(h))}}class p{_projectIn(e,r){this._project?o.projectVectorToVector(e,this.renderSpatialReference,r,this._pcpf):t.copy(r,e)}constructor(e,t,o){this.startRenderSpace=e,this.endRenderSpace=t,this.renderSpatialReference=o,this.type="geodesic",this._start=r.create(),this._end=r.create(),this._pcpf=c.getSphericalPCPF(o),this._project=s.canProjectWithoutEngine(o,this._pcpf),this._projectIn(e,this._start),this._projectIn(t,this._end)}eval(e,r,s){if(this._project)if(s){const c=d;n.slerpTangent(this._start,this._end,e,r,c),t.add(l,r,c),o.projectVectorToVector(r,this._pcpf,r,this.renderSpatialReference),o.projectVectorToVector(l,this._pcpf,l,this.renderSpatialReference),t.subtract(s,l,r),t.normalize(s,s)}else n.slerp(this._start,this._end,e,r),o.projectVectorToVector(r,this._pcpf,r,this.renderSpatialReference);else t.lerp(r,this._start,this._end,e),s&&(t.subtract(s,this._end,this._start),t.normalize(s,s));return r}createRenderGeometry(e,r){const s=[],c=[],o=(r,o)=>{const i=l;t.subtract(i,r,e),s.push([i[0],i[1],i[2]]),c.push([o[0],o[1],o[2]])},i=128+1&-2;for(let t=0;t<i;++t){const e=t/(i-1),s=h,c=d;this.eval(e,s),r.worldUpAtPosition(s,c),o(s,c)}return{points:s,normals:c}}}const h=r.create(),d=r.create(),l=r.create();e.EuclideanSegment=a,e.GeodesicSegment=p,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
