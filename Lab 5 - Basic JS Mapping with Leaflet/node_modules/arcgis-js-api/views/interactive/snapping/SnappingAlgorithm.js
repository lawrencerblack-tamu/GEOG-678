/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["exports","../../../core/unitUtils","../../../core/libs/gl-matrix-2/math/vec2","../../../support/elevationInfoUtils","../sketch/normalizedPoint","./Settings","./snappingUtils","../support/viewUtils"],(function(e,t,s,i,r,o,n,h){"use strict";class a{constructor(e,t){this.view=e,this.options=t,this.squaredShortLineThreshold=o.defaults.shortLineThreshold*o.defaults.shortLineThreshold}snap(e,t){return null!=t.vertexHandle?"vertex"!==t.vertexHandle.type?[]:this.snapExistingVertex(e,t):this.snapNewVertex(e,t)}edgeExceedsShortLineThreshold(e,t){return this.exceedsShortLineThreshold(r.fromAnyMapPoint(e.leftVertex.pos,this.view,t),r.fromAnyMapPoint(e.rightVertex.pos,this.view,t),t)}exceedsShortLineThreshold(e,t,{spatialReference:s}){return 0===this.squaredShortLineThreshold||n.squaredScreenDistance(h.vectorToScreenPoint(t,s,i.absoluteHeightElevationInfo,this.view),h.vectorToScreenPoint(e,s,i.absoluteHeightElevationInfo,this.view))>this.squaredShortLineThreshold}isVertical(e,i,{spatialReference:n}){const h=t.getMetersPerUnitForSR(n);return s.distance(r.asVec2(e),r.asVec2(i))*h<o.defaults.verticalLineThresholdMeters}squaredProximityThreshold(e){return"touch"===e?this._squaredTouchProximityThreshold:this._squaredMouseProximityThreshold}get _squaredMouseProximityThreshold(){return this.options.distance*this.options.distance}get _squaredTouchProximityThreshold(){const{distance:e,touchSensitivityMultiplier:t}=this.options,s=e*t;return s*s}}e.SnappingAlgorithm=a,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
