/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["exports","../../../chunks/tslib.es6","../../../core/Accessor","../../../core/maybe","../../../core/reactiveUtils","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/Logger","../../../core/RandomLCG","../../../core/accessorSupport/decorators/subclass","../../../support/themeUtils","./css","./content/tooltipContentFactory","../../../widgets/support/widgetUtils"],(function(t,e,o,n,i,s,r,c,a,l,p,d,u,h){"use strict";const y={base:`${d.base}`};function _({container:t,content:e,screenPoint:o,positionMode:n}){const{style:i}=t;if("fixed"!==n)if(null!=o&&null!=e){i.display="block";const e=h.isRTL(t),n=`translate(${Math.round(o.x)+f[0]*(e?-1:1)}px, ${Math.round(o.y)+f[1]}px)`;i.transform=e?`translate(-100%, 0) ${n}`:n}else i.display="none"}t.Tooltip=class extends o{constructor(t){super(t),this.info=null,this.positionMode="follow-cursor",this.content=null,this.contentContainer=(()=>{const t=document.createElement("div");return t.classList.add(y.base),p.setCalciteThemeClass(t),t})()}initialize(){const{contentContainer:t}=this;this.addHandles([i.watch((()=>this.view.overlay?.surface),(e=>{t.remove(),e?.appendChild(t)}),i.syncAndInitial),i.watch((()=>this.info),((e,o)=>{if(null!=this.content&&null!=e&&null!=o&&e.type===o.type)this.content.info=e;else{this.content=n.destroyMaybe(this.content);const o=u.tooltipContentFactory(this,e);o&&(this.content=o,o.container&&t.appendChild(o.container))}}),i.syncAndInitial),i.watch((()=>({container:this.contentContainer,content:this.content,screenPoint:this._screenPoint,positionMode:this.positionMode})),_,i.syncAndInitial)])}destroy(){this.info=null,this.content=n.destroyMaybe(this.content),this.contentContainer.remove()}get mode(){return this.content?.mode??"feedback"}get test(){return{visible:"none"!==this.contentContainer?.style.display}}get _screenPoint(){const t=this.view.inputManager;return t?.multiTouchActive?null:t?.latestPointerLocation}clear(){this.info=null}async enterInputMode(t){await(this.content?.enterInputMode(t))}async exitInputMode(){await(this.content?.exitInputMode())}},e.__decorate([s.property({nonNullable:!0})],t.Tooltip.prototype,"view",void 0),e.__decorate([s.property()],t.Tooltip.prototype,"info",void 0),e.__decorate([s.property()],t.Tooltip.prototype,"positionMode",void 0),e.__decorate([s.property()],t.Tooltip.prototype,"content",void 0),e.__decorate([s.property()],t.Tooltip.prototype,"mode",null),e.__decorate([s.property()],t.Tooltip.prototype,"contentContainer",void 0),e.__decorate([s.property()],t.Tooltip.prototype,"_screenPoint",null),t.Tooltip=e.__decorate([l.subclass("esri.views.interactive.tooltip.Tooltip")],t.Tooltip);const f=[20,20];Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
