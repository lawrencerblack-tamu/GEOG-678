/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["exports","../../geometry","../../core/screenUtils","../../layers/graphics/dehydratedPoint","../../layers/graphics/hydratedFeatures","../../support/elevationInfoUtils","../../geometry/SpatialReference","../../geometry/Point"],(function(e,t,n,r,i,o,s,a){"use strict";class c{constructor(e,t,n,r=null){this._elevationInfo=e,this.defaultZ=t,this._view=n,this._excludeGraphics=r}screenToMap(e){const{defaultZ:t,_view:r}=this,i=r.sceneIntersectionHelper.intersectElevationFromScreen(n.createScreenPointArray(e.x,e.y),this._elevationInfo,t??0,this._excludeGraphics);return null==t&&null!=i&&(i.z=void 0),i}mapToScreen(e){const t=r.makeDehydratedPoint(e.x,e.y,o.getConvertedElevation(this._view,e,this._elevationInfo),e.spatialReference);return this._view.toScreen(t)}constrainZ(e){const{defaultZ:t}=this;return null!=t&&e.z!==t&&((e=i.clonePoint(e)).z=t),e}}class l{constructor(e,t,n=[]){this.view=e,this.elevationInfo=t,this.exclude=n}screenToMap(e){const t=this.view.toMap(e,{exclude:this.exclude,excludeHud:!0});return null!=t&&(t.z=o.getZForElevationMode(t,this.view,this.elevationInfo)),t}mapToScreen(e){let t=e;return null!=this.elevationInfo&&(t=r.makeDehydratedPoint(e.x,e.y,o.getConvertedElevation(this.view,e,this.elevationInfo),e.spatialReference)),this.view.toScreen(t)}constrainZ(e){return e}}class u{constructor(e,t=!1,n=0){this.view=e,this.hasZ=t,this.defaultZ=n,this.mapToScreen=t=>e.toScreen(t),this.screenToMap=t?t=>{const r=e.toMap(t);return r.z=n,r}:t=>e.toMap(t)}constrainZ(e){const{defaultZ:t}=this;return this.hasZ&&e.z!==t&&((e=i.clonePoint(e)).z=t),e}}class h{screenToMap(e){const{x:t,y:n}=e;return new a({x:t,y:n,spatialReference:h.spatialReference})}mapToScreen(e){return n.createScreenPoint(e.x,e.y)}constrainZ(e){return e}}h.spatialReference=new s,e.ElevationDrawSurface=c,e.MapDrawSurface=u,e.SceneDrawSurface=l,e.ScreenDrawSurface=h,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
