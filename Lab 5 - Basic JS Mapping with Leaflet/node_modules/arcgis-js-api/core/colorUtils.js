/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["exports","../Color","../chunks/vec42","./libs/gl-matrix-2/factories/vec4f64"],(function(n,t,r,o){"use strict";function e(n){return"r"in n&&"g"in n&&"b"in n}function u(n){return"h"in n&&"s"in n&&"v"in n}function i(n){return"l"in n&&"a"in n&&"b"in n}function c(n){return"l"in n&&"c"in n&&"h"in n}function a(n){return"x"in n&&"y"in n&&"z"in n}const s=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],l=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function h(n,t){const r=[];let o,e;if(n[0].length!==t.length)throw new Error("dimensions do not match");const u=n.length,i=n[0].length;let c=0;for(o=0;o<u;o++){for(c=0,e=0;e<i;e++)c+=n[o][e]*t[e];r.push(c)}return r}function f(n){const t=[n.r/255,n.g/255,n.b/255].map((n=>n<=.04045?n/12.92:((n+.055)/1.055)**2.4)),r=h(s,t);return{x:100*r[0],y:100*r[1],z:100*r[2]}}function g(n){const t=h(l,[n.x/100,n.y/100,n.z/100]).map((n=>{const t=n<=.0031308?12.92*n:1.055*n**(1/2.4)-.055;return Math.min(1,Math.max(t,0))}));return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function b(n){const t=[n.x/95.047,n.y/100,n.z/108.883].map((n=>n>(6/29)**3?n**(1/3):1/3*(29/6)**2*n+4/29));return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function d(n){const t=n.l,r=[(t+16)/116+n.a/500,(t+16)/116,(t+16)/116-n.b/200].map((n=>n>6/29?n**3:3*(6/29)**2*(n-4/29)));return{x:95.047*r[0],y:100*r[1],z:108.883*r[2]}}function M(n){const t=n.l,r=n.a,o=n.b,e=Math.sqrt(r*r+o*o);let u=Math.atan2(o,r);return u=u>0?u:u+2*Math.PI,{l:t,c:e,h:u}}function m(n){const t=n.l,r=n.c,o=n.h;return{l:t,a:r*Math.cos(o),b:r*Math.sin(o)}}function p(n){return b(f(n))}function y(n){return g(d(n))}function B(n){return M(b(f(n)))}function k(n){return g(d(m(n)))}function x(n){const t=n.r,r=n.g,o=n.b,e=Math.max(t,r,o),u=e-Math.min(t,r,o);let i=e,c=0===u?0:e===t?(r-o)/u%6:e===r?(o-t)/u+2:(t-r)/u+4,a=0===u?0:u/i;return c<0&&(c+=6),c*=60,a*=100,i*=100/255,{h:c,s:a,v:i}}function C(n){const t=(n.h+360)%360/60,r=n.s/100,o=n.v/100*255,e=o*r,u=e*(1-Math.abs(t%2-1));let i;switch(Math.floor(t)){case 0:i={r:e,g:u,b:0};break;case 1:i={r:u,g:e,b:0};break;case 2:i={r:0,g:e,b:u};break;case 3:i={r:0,g:u,b:e};break;case 4:i={r:u,g:0,b:e};break;case 5:case 6:i={r:e,g:0,b:u};break;default:i={r:0,g:0,b:0}}return i.r=Math.round(i.r+o-e),i.g=Math.round(i.g+o-e),i.b=Math.round(i.b+o-e),i}function v(n){return e(n)?n:c(n)?k(n):i(n)?y(n):a(n)?g(n):u(n)?C(n):n}function w(n){if(u(n))return n;return x(v(n))}function A(n){return i(n)?n:p(v(n))}function T(n){return c(n)?n:B(v(n))}function G(n){return R(n).isBright?"light":"dark"}function R(n){let{r,g:o,b:e,a:u}=n;return u<1&&(r=Math.round(u*r+255*(1-u)),o=Math.round(u*o+255*(1-u)),e=Math.round(u*e+255*(1-u))),new t({r,g:o,b:e})}function q(n,t){const{r,g:o,b:e}=t?.ignoreAlpha?n:R(n);return.2126*r+.7152*o+.0722*e}var z;function H(r,o=n.BrightnessThreshold.High){return q(r,{ignoreAlpha:!0})>o?new t([0,0,0,r.a]):new t([255,255,255,r.a])}function L(n,t){const r=A(n);r.l*=1-t;const o=v(r),e=n.clone();return e.setColor(o),e.a=n.a,e}function O(n,t){const r=n.clone();return r.a*=t,r}function V(n,t){const r=w(n);r.s*=t;const o=v(r),e=n.clone();return e.setColor(o),e.a=n.a,e}function E(n){return t.toUnitRGBA(n)}function S(n,t){return n===t||null!=n&&n.equals(t)}function U(n,t){return n===t||null!=n&&null!=t&&r.equals(n,t)}function P(n){return o.fromValues(n[0],n[1],n[2],n.length>3?n[3]:1)}function j(n,r){const o=t.toUnitRGBA(n);return o[3]*=r,o}n.BrightnessThreshold=void 0,(z=n.BrightnessThreshold||(n.BrightnessThreshold={}))[z.Low=160]="Low",z[z.High=225]="High",n.colorEquals=S,n.colorVectorEquals=U,n.colorVectorToColorAndOpacity=P,n.darken=L,n.desaturate=V,n.getColorLuminance=q,n.getColorTheme=G,n.getContrast=H,n.isRGB=e,n.multiplyOpacity=O,n.multiplyOpacityToUnitRGBA=j,n.toHSV=w,n.toLAB=A,n.toLCH=T,n.toRGB=v,n.unitRGBAFromColor=E,Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})}));
