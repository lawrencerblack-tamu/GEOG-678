/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["exports","./RandomLCG"],(function(n,t){"use strict";const e=1.5,r=1/e,o=.5;function l(n,t){if(!t)return n;for(const e of t)n.push(e);return n}function i(n){if(!n)return;return n.length>0?n[0]:void 0}function u(n){if(!n)return;const t=n.length;return t>0?n[t-1]:void 0}function f(n,t){for(let e=n.length-1;e>=0;e--){const r=n[e];if(t(r))return r}}function c(n){return n}function s(n,t=c){if(!n||0===n.length)return;let e=n[0],r=t(e);for(let o=1;o<n.length;++o){const l=n[o],i=Number(t(l));i>r&&(r=i,e=l)}return e}function a(n,t=c){return s(n,(n=>-t(n)))}function h(n,t){return t?n.filter(((n,e,r)=>r.findIndex(t.bind(null,n))===e)):Array.from(new Set(n))}function d(n,t,e){if(null==n&&null==t)return!0;if(null==n||null==t||n.length!==t.length)return!1;if(e){for(let r=0;r<n.length;r++)if(!e(n[r],t[r]))return!1}else for(let r=0;r<n.length;r++)if(n[r]!==t[r])return!1;return!0}function g(n,t){let e=n.length!==t.length;e&&(n.length=t.length);for(let r=0;r<t.length;++r)n[r]!==t[r]&&(n[r]=t[r],e=!0);return e}function p(n,t,e){let r,o;return e?(r=t.filter((t=>!n.some((n=>e(n,t))))),o=n.filter((n=>!t.some((t=>e(t,n)))))):(r=t.filter((t=>!n.includes(t))),o=n.filter((n=>!t.includes(n)))),{added:r,removed:o}}function m(n,t,e){return n&&t?e?n.filter((n=>t.findIndex((t=>e(n,t)))>-1)):n.filter((n=>t.includes(n))):[]}function y(n){return n&&"number"==typeof n.length}function M(n,t){const e=n.length;if(0===e)return[];const r=[];for(let o=0;o<e;o+=t)r.push(n.slice(o,o+t));return r}const w=!!Array.prototype.fill;function x(n,t){if(w)return new Array(n).fill(t);const e=new Array(n);for(let r=0;r<n;r++)e[r]=t;return e}function v(n,t){void 0===t&&(t=n,n=0);const e=new Array(t-n);for(let r=n;r<t;r++)e[r-n]=r;return e}function S(n,t,e){const r=n.length;let o=0,l=r-1;for(;o<l;){const e=o+Math.floor((l-o)/2);t>n[e]?o=e+1:l=e}const i=n[o];return e?t>=n[r-1]?-1:i===t?o:o-1:i===t?o:-1}function b(n,t,e){if(!n||0===n.length)return;const r=n.length-1,o=n[0];if(t<=e(o))return o;const l=n[r];if(t>=e(l))return l;let i=0,u=0,f=r;for(;i<f;){u=i+Math.floor((f-i)/2);const o=n[u],l=e(o);if(l===t)return o;if(t<l){if(u>0){const r=n[u-1],i=e(r);if(t>i)return t-i>=l-t?o:r}f=u}else{if(u<r){const r=n[u+1],i=e(r);if(t<i)return t-l>=i-t?r:o}i=u+1}}return n[u]}class A{constructor(){this.last=0}}const k=new A;function I(n,t,e,r){r=r||k;const o=Math.max(0,r.last-10);for(let i=o;i<e;++i)if(n[i]===t)return r.last=i,i;const l=Math.min(o,e);for(let i=0;i<l;++i)if(n[i]===t)return r.last=i,i;return-1}function F(n,t,e,r){const o=e??n.length,l=I(n,t,o,r);if(-1!==l)return n[l]=n[o-1],null==e&&n.pop(),t}const O=new Set;function C(n,t,e=n.length,r=t.length,o,l){if(0===r||0===e)return e;O.clear();for(let u=0;u<r;++u)O.add(t[u]);o=o||k;const i=Math.max(0,o.last-10);for(let u=i;u<e;++u)if(O.has(n[u])&&(l?.push(n[u]),O.delete(n[u]),n[u]=n[e-1],--e,--u,0===O.size||0===e))return O.clear(),e;for(let u=0;u<i;++u)if(O.has(n[u])&&(l?.push(n[u]),O.delete(n[u]),n[u]=n[e-1],--e,--u,0===O.size||0===e))return O.clear(),e;return O.clear(),e}function L(n,t){let e=0;for(let r=0;r<n.length;++r){const o=n[r];t(o,r)&&(n[e]=o,e++)}n.length=e}function P(n,t,e){const r=n.length;if(t>=r)return n.slice(0);const o=T(e),l=new Set,i=[];for(;i.length<t;){const t=Math.floor(o()*r);l.has(t)||(l.add(t),i.push(n[t]))}return i}function T(n){return n?(z.seed=n,()=>z.getFloat()):Math.random}function q(n,t){const e=T(t);for(let r=n.length-1;r>0;r--){const t=Math.floor(e()*(r+1)),o=n[r];n[r]=n[t],n[t]=o}return n}const z=new t;function G(n,t){const e=n.indexOf(t);return-1!==e?(n.splice(e,1),t):null}function R(n,t){const e=new Map,r=n.length;for(let o=0;o<r;o++){const r=n[o],l=t(r,o,n),i=e.get(l);i?i.push(r):e.set(l,[r])}return e}function U(n,t){return null!=n}const j=[];n.PositionHint=A,n.addMany=l,n.binaryFindClosest=b,n.binaryIndexOf=S,n.constant=x,n.difference=p,n.emptyArray=j,n.equals=d,n.filterInPlace=L,n.findLast=f,n.first=i,n.groupToMap=R,n.indexOf=I,n.intersect=m,n.isArrayLike=y,n.isSome=U,n.last=u,n.max=s,n.min=a,n.pickRandom=P,n.range=v,n.reallocGrowthFactor=e,n.reallocShrinkFactor=r,n.reallocShrinkThreshold=o,n.remove=G,n.removeUnordered=F,n.removeUnorderedMany=C,n.shuffle=q,n.splitIntoChunks=M,n.unique=h,n.update=g,Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})}));
