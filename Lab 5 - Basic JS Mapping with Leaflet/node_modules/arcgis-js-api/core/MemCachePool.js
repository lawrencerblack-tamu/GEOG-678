/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
define(["exports","./MemCache"],(function(e,t){"use strict";class c{constructor(e,t){this._cache=e(t,((e,t,c)=>this._remove(e,t,c)))}hitrate(){return this._cache.hitRate}destroy(){this._cache.destroy()}clear(){this._cache.clear()}getSize(e){return this._cache.getSize(e)}pop(e){const t=this._cache.peek(e);if(!t)return;const c=t.pop();if(t.length>0){if(c){const s=this._cache.getSize(e)-Math.round(c.usedMemory);this._cache.updateSize(e,t,s)}}else this._cache.pop(e);return c}put(e,c,s=t.NoPriority){const o=this._cache.peek(e);if(!o)return void this._cache.put(e,[c],c.usedMemory,s);o.push(c);const h=this._cache.getSize(e)+Math.round(c.usedMemory);this._cache.updateSize(e,o,h)}_remove(e,c,s){switch(c){case t.RemoveMode.ALL:return e.forEach((e=>e.dispose())),0;case t.RemoveMode.SOME:{const t=e.shift();return t&&(s-=Math.round(t.usedMemory),t.dispose()),s}}}}e.MemCachePool=c,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
